

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fapilog v3 Architecture Document &mdash; fapilog 3.0.0-alpha.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="_static/custom.css" />
      <link rel="stylesheet" type="text/css" href="_static/custom.css" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=a275d612"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="_static/copybutton.js?v=30646c52"></script>
      <script src="_static/custom.js"></script>
      <script src="_static/custom.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #2980B9" >

          
          
          <a href="index.html" class="icon icon-home">
            fapilog
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="getting-started/index.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="getting-started/installation.html">Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="getting-started/installation.html#quick-install">Quick Install</a></li>
<li class="toctree-l3"><a class="reference internal" href="getting-started/installation.html#installation-options">Installation Options</a><ul>
<li class="toctree-l4"><a class="reference internal" href="getting-started/installation.html#basic-installation">Basic Installation</a></li>
<li class="toctree-l4"><a class="reference internal" href="getting-started/installation.html#with-extras">With Extras</a></li>
<li class="toctree-l4"><a class="reference internal" href="getting-started/installation.html#from-source">From Source</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="getting-started/installation.html#python-version-support">Python Version Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="getting-started/installation.html#dependencies">Dependencies</a><ul>
<li class="toctree-l4"><a class="reference internal" href="getting-started/installation.html#required-dependencies">Required Dependencies</a></li>
<li class="toctree-l4"><a class="reference internal" href="getting-started/installation.html#optional-dependencies">Optional Dependencies</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="getting-started/installation.html#environment-setup">Environment Setup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="getting-started/installation.html#virtual-environment-recommended">Virtual Environment (Recommended)</a></li>
<li class="toctree-l4"><a class="reference internal" href="getting-started/installation.html#conda-environment">Conda Environment</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="getting-started/installation.html#verification">Verification</a></li>
<li class="toctree-l3"><a class="reference internal" href="getting-started/installation.html#troubleshooting">Troubleshooting</a><ul>
<li class="toctree-l4"><a class="reference internal" href="getting-started/installation.html#common-issues">Common Issues</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="getting-started/installation.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="getting-started/quickstart.html">Quickstart Tutorial</a><ul>
<li class="toctree-l3"><a class="reference internal" href="getting-started/quickstart.html#zero-config-logging">Zero-Config Logging</a></li>
<li class="toctree-l3"><a class="reference internal" href="getting-started/quickstart.html#with-context">With Context</a></li>
<li class="toctree-l3"><a class="reference internal" href="getting-started/quickstart.html#using-runtime-for-cleanup">Using runtime() for Cleanup</a></li>
<li class="toctree-l3"><a class="reference internal" href="getting-started/quickstart.html#what-happens-automatically">What Happens Automatically</a></li>
<li class="toctree-l3"><a class="reference internal" href="getting-started/quickstart.html#environment-variables">Environment Variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="getting-started/quickstart.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="getting-started/hello-world.html">Hello World Walkthrough</a><ul>
<li class="toctree-l3"><a class="reference internal" href="getting-started/hello-world.html#minimal-app">Minimal App</a></li>
<li class="toctree-l3"><a class="reference internal" href="getting-started/hello-world.html#rotating-file-sink-example">Rotating File Sink Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="getting-started/hello-world.html#redactor-demo">Redactor Demo</a></li>
<li class="toctree-l3"><a class="reference internal" href="getting-started/hello-world.html#stopping-draining-logs">Stopping &amp; Draining Logs</a></li>
<li class="toctree-l3"><a class="reference internal" href="getting-started/hello-world.html#complete-example">Complete Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="getting-started/hello-world.html#what-youve-learned">What You’ve Learned</a></li>
<li class="toctree-l3"><a class="reference internal" href="getting-started/hello-world.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="getting-started/index.html#quick-start">Quick Start</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-started/index.html#what-youll-learn">What You’ll Learn</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-started/index.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="core-concepts/index.html">Core Concepts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="core-concepts/pipeline-architecture.html">Pipeline Architecture</a><ul>
<li class="toctree-l3"><a class="reference internal" href="core-concepts/pipeline-architecture.html#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="core-concepts/pipeline-architecture.html#pipeline-stages">Pipeline Stages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="core-concepts/pipeline-architecture.html#application-layer">1. Application Layer</a></li>
<li class="toctree-l4"><a class="reference internal" href="core-concepts/pipeline-architecture.html#context-binding">2. Context Binding</a></li>
<li class="toctree-l4"><a class="reference internal" href="core-concepts/pipeline-architecture.html#enrichers">3. Enrichers</a></li>
<li class="toctree-l4"><a class="reference internal" href="core-concepts/pipeline-architecture.html#redactors">4. Redactors</a></li>
<li class="toctree-l4"><a class="reference internal" href="core-concepts/pipeline-architecture.html#processors">5. Processors</a></li>
<li class="toctree-l4"><a class="reference internal" href="core-concepts/pipeline-architecture.html#queue">6. Queue</a></li>
<li class="toctree-l4"><a class="reference internal" href="core-concepts/pipeline-architecture.html#sinks">7. Sinks</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="core-concepts/pipeline-architecture.html#performance-characteristics">Performance Characteristics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="core-concepts/pipeline-architecture.html#async-processing">Async Processing</a></li>
<li class="toctree-l4"><a class="reference internal" href="core-concepts/pipeline-architecture.html#zero-copy-operations">Zero-Copy Operations</a></li>
<li class="toctree-l4"><a class="reference internal" href="core-concepts/pipeline-architecture.html#batching">Batching</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="core-concepts/pipeline-architecture.html#guarantees">Guarantees</a><ul>
<li class="toctree-l4"><a class="reference internal" href="core-concepts/pipeline-architecture.html#async-operations">1. Async Operations</a></li>
<li class="toctree-l4"><a class="reference internal" href="core-concepts/pipeline-architecture.html#bounded-memory">2. Bounded Memory</a></li>
<li class="toctree-l4"><a class="reference internal" href="core-concepts/pipeline-architecture.html#backpressure-handling">3. Backpressure Handling</a></li>
<li class="toctree-l4"><a class="reference internal" href="core-concepts/pipeline-architecture.html#deduplication">4. Deduplication</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="core-concepts/pipeline-architecture.html#configuration">Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="core-concepts/pipeline-architecture.html#pipeline-configuration">Pipeline Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="core-concepts/pipeline-architecture.html#environment-variables">Environment Variables</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="core-concepts/pipeline-architecture.html#monitoring">Monitoring</a><ul>
<li class="toctree-l4"><a class="reference internal" href="core-concepts/pipeline-architecture.html#pipeline-metrics">Pipeline Metrics</a></li>
<li class="toctree-l4"><a class="reference internal" href="core-concepts/pipeline-architecture.html#health-checks">Health Checks</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="core-concepts/pipeline-architecture.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="core-concepts/index.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="core-concepts/index.html#key-principles">Key Principles</a><ul>
<li class="toctree-l3"><a class="reference internal" href="core-concepts/index.html#async-first-design">1. Async-First Design</a></li>
<li class="toctree-l3"><a class="reference internal" href="core-concepts/index.html#zero-copy-processing">2. Zero-Copy Processing</a></li>
<li class="toctree-l3"><a class="reference internal" href="core-concepts/index.html#structured-by-default">3. Structured by Default</a></li>
<li class="toctree-l3"><a class="reference internal" href="core-concepts/index.html#plugin-architecture">4. Plugin Architecture</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="core-concepts/index.html#architecture-overview">Architecture Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="core-concepts/index.html#what-youll-learn">What You’ll Learn</a></li>
<li class="toctree-l2"><a class="reference internal" href="core-concepts/index.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="user-guide/index.html">User Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="user-guide/index.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="user-guide/index.html#quick-reference">Quick Reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="user-guide/index.html#basic-logging">Basic Logging</a></li>
<li class="toctree-l3"><a class="reference internal" href="user-guide/index.html#context-management">Context Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="user-guide/index.html#configuration">Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="user-guide/index.html#what-youll-learn">What You’ll Learn</a></li>
<li class="toctree-l2"><a class="reference internal" href="user-guide/index.html#common-patterns">Common Patterns</a><ul>
<li class="toctree-l3"><a class="reference internal" href="user-guide/index.html#request-logging">Request Logging</a></li>
<li class="toctree-l3"><a class="reference internal" href="user-guide/index.html#batch-processing">Batch Processing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="user-guide/index.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api-reference/index.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api-reference/top-level-functions.html">Top-Level Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api-reference/top-level-functions.html#get-logger">get_logger</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api-reference/top-level-functions.html#parameters">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/top-level-functions.html#returns">Returns</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/top-level-functions.html#examples">Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/top-level-functions.html#environment-variables">Environment Variables</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/top-level-functions.html#notes">Notes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api-reference/top-level-functions.html#runtime">runtime</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api-reference/top-level-functions.html#id1">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/top-level-functions.html#id2">Returns</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/top-level-functions.html#id3">Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/top-level-functions.html#id4">Notes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api-reference/top-level-functions.html#stop-and-drain">stop_and_drain</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api-reference/top-level-functions.html#id5">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/top-level-functions.html#id6">Returns</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/top-level-functions.html#id7">Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/top-level-functions.html#drainresult">DrainResult</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/top-level-functions.html#id8">Notes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api-reference/logger-methods.html">Logger Methods</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api-reference/logger-methods.html#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="api-reference/logger-methods.html#debug">debug</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api-reference/logger-methods.html#parameters">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/logger-methods.html#examples">Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/logger-methods.html#notes">Notes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api-reference/logger-methods.html#info">info</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api-reference/logger-methods.html#id1">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/logger-methods.html#id2">Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/logger-methods.html#id3">Notes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api-reference/logger-methods.html#warning">warning</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api-reference/logger-methods.html#id4">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/logger-methods.html#id5">Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/logger-methods.html#id6">Notes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api-reference/logger-methods.html#error">error</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api-reference/logger-methods.html#id7">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/logger-methods.html#id8">Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/logger-methods.html#id9">Notes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api-reference/logger-methods.html#critical">critical</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api-reference/logger-methods.html#id10">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/logger-methods.html#id11">Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/logger-methods.html#id12">Notes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api-reference/logger-methods.html#exception">exception</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api-reference/logger-methods.html#id13">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/logger-methods.html#id14">Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/logger-methods.html#id15">Notes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api-reference/logger-methods.html#close">close</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api-reference/logger-methods.html#id16">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/logger-methods.html#returns">Returns</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/logger-methods.html#id17">Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/logger-methods.html#id18">Notes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api-reference/context-binding.html">Context Binding</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api-reference/context-binding.html#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="api-reference/context-binding.html#bind">bind</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api-reference/context-binding.html#parameters">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/context-binding.html#examples">Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/context-binding.html#notes">Notes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api-reference/context-binding.html#unbind">unbind</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api-reference/context-binding.html#id1">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/context-binding.html#id2">Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/context-binding.html#id3">Notes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api-reference/context-binding.html#clear-context">clear_context</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api-reference/context-binding.html#id4">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/context-binding.html#returns">Returns</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/context-binding.html#id5">Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/context-binding.html#id6">Notes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api-reference/context-binding.html#context-inheritance">Context Inheritance</a></li>
<li class="toctree-l3"><a class="reference internal" href="api-reference/context-binding.html#common-patterns">Common Patterns</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api-reference/context-binding.html#request-context">Request Context</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/context-binding.html#service-context">Service Context</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/context-binding.html#debug-context">Debug Context</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api-reference/context-binding.html#best-practices">Best Practices</a></li>
<li class="toctree-l3"><a class="reference internal" href="api-reference/context-binding.html#performance-considerations">Performance Considerations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api-reference/configuration.html">Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api-reference/configuration.html#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="api-reference/configuration.html#fapilogsettings">FapilogSettings</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api-reference/configuration.html#core-settings">Core Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/configuration.html#file-sink-settings">File Sink Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/configuration.html#performance-settings">Performance Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/configuration.html#redaction-settings">Redaction Settings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api-reference/configuration.html#environment-variables">Environment Variables</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api-reference/configuration.html#core-configuration">Core Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/configuration.html#file-sink-configuration">File Sink Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/configuration.html#redaction-configuration">Redaction Configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api-reference/configuration.html#settings-hierarchy">Settings Hierarchy</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api-reference/configuration.html#environment-variables-highest-priority">1. Environment Variables (Highest Priority)</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/configuration.html#settings-classes-medium-priority">2. Settings Classes (Medium Priority)</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/configuration.html#default-values-lowest-priority">3. Default Values (Lowest Priority)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api-reference/configuration.html#configuration-examples">Configuration Examples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api-reference/configuration.html#development-environment">Development Environment</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/configuration.html#production-environment">Production Environment</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/configuration.html#high-performance-configuration">High-Performance Configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api-reference/configuration.html#environment-specific-configuration">Environment-Specific Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api-reference/configuration.html#development">Development</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/configuration.html#staging">Staging</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/configuration.html#production">Production</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api-reference/configuration.html#configuration-validation">Configuration Validation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api-reference/configuration.html#validation-rules">Validation Rules</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api-reference/configuration.html#hot-reloading">Hot Reloading</a></li>
<li class="toctree-l3"><a class="reference internal" href="api-reference/configuration.html#best-practices">Best Practices</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api-reference/plugins/index.html">Plugins</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api-reference/plugins/index.html#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="api-reference/plugins/index.html#plugin-types">Plugin Types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api-reference/plugins/index.html#sinks-output-plugins">Sinks (Output Plugins)</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/plugins/index.html#enrichers-input-context-plugins">Enrichers (Input/Context Plugins)</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/plugins/index.html#redactors-security-plugins">Redactors (Security Plugins)</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/plugins/index.html#processors-transform-plugins">Processors (Transform Plugins)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api-reference/plugins/index.html#plugin-architecture">Plugin Architecture</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api-reference/plugins/index.html#plugin-lifecycle">Plugin Lifecycle</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/plugins/index.html#plugin-configuration">Plugin Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/plugins/index.html#plugin-discovery">Plugin Discovery</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api-reference/plugins/index.html#built-in-plugins">Built-in Plugins</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api-reference/plugins/index.html#default-configuration">Default Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/plugins/index.html#plugin-dependencies">Plugin Dependencies</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api-reference/plugins/index.html#custom-plugin-development">Custom Plugin Development</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api-reference/plugins/index.html#creating-a-custom-sink">Creating a Custom Sink</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/plugins/index.html#creating-a-custom-enricher">Creating a Custom Enricher</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/plugins/index.html#creating-a-custom-redactor">Creating a Custom Redactor</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api-reference/plugins/index.html#plugin-configuration-examples">Plugin Configuration Examples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api-reference/plugins/index.html#development-environment">Development Environment</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/plugins/index.html#production-environment">Production Environment</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/plugins/index.html#high-performance-configuration">High-Performance Configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api-reference/plugins/index.html#plugin-health-monitoring">Plugin Health Monitoring</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api-reference/plugins/index.html#health-checks">Health Checks</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/plugins/index.html#plugin-metrics">Plugin Metrics</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api-reference/plugins/index.html#best-practices">Best Practices</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api-reference/lifecycle-results.html">Lifecycle &amp; Results</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api-reference/lifecycle-results.html#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="api-reference/lifecycle-results.html#drainresult">DrainResult</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api-reference/lifecycle-results.html#fields">Fields</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/lifecycle-results.html#sinkdrainresult">SinkDrainResult</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/lifecycle-results.html#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api-reference/lifecycle-results.html#runtime-lifecycle">Runtime Lifecycle</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api-reference/lifecycle-results.html#initialization">Initialization</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/lifecycle-results.html#startup-sequence">Startup Sequence</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/lifecycle-results.html#runtime-state">Runtime State</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api-reference/lifecycle-results.html#resource-management">Resource Management</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api-reference/lifecycle-results.html#memory-management">Memory Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/lifecycle-results.html#connection-management">Connection Management</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api-reference/lifecycle-results.html#graceful-shutdown">Graceful Shutdown</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api-reference/lifecycle-results.html#shutdown-sequence">Shutdown Sequence</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/lifecycle-results.html#shutdown-timeout">Shutdown Timeout</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/lifecycle-results.html#environment-variables">Environment Variables</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api-reference/lifecycle-results.html#health-monitoring">Health Monitoring</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api-reference/lifecycle-results.html#runtime-health">Runtime Health</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/lifecycle-results.html#health-checks">Health Checks</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api-reference/lifecycle-results.html#error-handling">Error Handling</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api-reference/lifecycle-results.html#runtime-errors">Runtime Errors</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/lifecycle-results.html#recovery-mechanisms">Recovery Mechanisms</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api-reference/lifecycle-results.html#performance-optimization">Performance Optimization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api-reference/lifecycle-results.html#runtime-tuning">Runtime Tuning</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/lifecycle-results.html#resource-limits">Resource Limits</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api-reference/lifecycle-results.html#monitoring-and-debugging">Monitoring and Debugging</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api-reference/lifecycle-results.html#runtime-metrics">Runtime Metrics</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/lifecycle-results.html#debug-information">Debug Information</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api-reference/lifecycle-results.html#best-practices">Best Practices</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api-reference/lifecycle-results.html#lifecycle-management">Lifecycle Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/lifecycle-results.html#id1">Resource Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/lifecycle-results.html#id2">Error Handling</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api-reference/lifecycle-results.html#configuration-reference">Configuration Reference</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api-reference/lifecycle-results.html#lifecycle-settings">Lifecycle Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/lifecycle-results.html#id3">Environment Variables</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api-reference/modules.html">API Modules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api-reference/plugins/index.html">Plugins</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api-reference/plugins/index.html#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/plugins/index.html#plugin-types">Plugin Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/plugins/index.html#plugin-architecture">Plugin Architecture</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/plugins/index.html#built-in-plugins">Built-in Plugins</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/plugins/index.html#custom-plugin-development">Custom Plugin Development</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/plugins/index.html#plugin-configuration-examples">Plugin Configuration Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/plugins/index.html#plugin-health-monitoring">Plugin Health Monitoring</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/plugins/index.html#best-practices">Best Practices</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api-reference/modules.html#core-modules">Core Modules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api-reference/modules.html#fapilog-core">fapilog.core</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/modules.html#fapilog-core-logger">fapilog.core.logger</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/modules.html#fapilog-containers">fapilog.containers</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/modules.html#fapilog-core-settings">fapilog.core.settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/modules.html#fapilog-core-context">fapilog.core.context</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/modules.html#fapilog-core-security">fapilog.core.security</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/modules.html#fapilog-core-observability">fapilog.core.observability</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api-reference/modules.html#plugin-system">Plugin System</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api-reference/modules.html#fapilog-plugins">fapilog.plugins</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/modules.html#fapilog-plugins-redactors">fapilog.plugins.redactors</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/modules.html#fapilog-plugins-sinks">fapilog.plugins.sinks</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/modules.html#fapilog-plugins-processors">fapilog.plugins.processors</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/modules.html#fapilog-plugins-enrichers">fapilog.plugins.enrichers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api-reference/modules.html#fastapi-integration">FastAPI Integration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api-reference/modules.html#fapilog-fastapi">fapilog.fastapi</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/modules.html#fapilog-fastapi-context">fapilog.fastapi.context</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api-reference/modules.html#utilities">Utilities</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api-reference/modules.html#fapilog-core-serialization">fapilog.core.serialization</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/modules.html#fapilog-core-validation">fapilog.core.validation</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/modules.html#fapilog-core-errors">fapilog.core.errors</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api-reference/index.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="api-reference/index.html#quick-reference">Quick Reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api-reference/index.html#top-level-functions">Top-Level Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="api-reference/index.html#logger-methods">Logger Methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="api-reference/index.html#context-binding">Context Binding</a></li>
<li class="toctree-l3"><a class="reference internal" href="api-reference/index.html#configuration">Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="api-reference/index.html#plugins">Plugins</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api-reference/index.html#sinks-output-plugins">Sinks (Output Plugins)</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/index.html#enrichers-input-context-plugins">Enrichers (Input/Context Plugins)</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/index.html#redactors-security-plugins">Redactors (Security Plugins)</a></li>
<li class="toctree-l4"><a class="reference internal" href="api-reference/index.html#processors-transform-plugins">Processors (Transform Plugins)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api-reference/index.html#lifecycle-results">Lifecycle &amp; Results</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="examples/index.html">Examples &amp; Recipes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="examples/index.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples/index.html#quick-examples">Quick Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="examples/index.html#basic-logging">Basic Logging</a></li>
<li class="toctree-l3"><a class="reference internal" href="examples/index.html#context-binding">Context Binding</a></li>
<li class="toctree-l3"><a class="reference internal" href="examples/index.html#file-logging">File Logging</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="examples/index.html#what-youll-learn">What You’ll Learn</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples/index.html#common-patterns">Common Patterns</a><ul>
<li class="toctree-l3"><a class="reference internal" href="examples/index.html#request-correlation">Request Correlation</a></li>
<li class="toctree-l3"><a class="reference internal" href="examples/index.html#batch-processing">Batch Processing</a></li>
<li class="toctree-l3"><a class="reference internal" href="examples/index.html#error-handling">Error Handling</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="examples/index.html#environment-specific-examples">Environment-Specific Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="examples/index.html#development">Development</a></li>
<li class="toctree-l3"><a class="reference internal" href="examples/index.html#production">Production</a></li>
<li class="toctree-l3"><a class="reference internal" href="examples/index.html#testing">Testing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="examples/index.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting/index.html">Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/index.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/index.html#quick-diagnosis">Quick Diagnosis</a><ul>
<li class="toctree-l3"><a class="reference internal" href="troubleshooting/index.html#check-system-health">Check System Health</a></li>
<li class="toctree-l3"><a class="reference internal" href="troubleshooting/index.html#check-configuration">Check Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="troubleshooting/index.html#check-metrics">Check Metrics</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/index.html#common-issues">Common Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="troubleshooting/index.html#logs-are-dropped-under-load">1. Logs Are Dropped Under Load</a></li>
<li class="toctree-l3"><a class="reference internal" href="troubleshooting/index.html#context-values-missing">2. Context Values Missing</a></li>
<li class="toctree-l3"><a class="reference internal" href="troubleshooting/index.html#file-sink-not-rotating">3. File Sink Not Rotating</a></li>
<li class="toctree-l3"><a class="reference internal" href="troubleshooting/index.html#serialization-errors">4. Serialization Errors</a></li>
<li class="toctree-l3"><a class="reference internal" href="troubleshooting/index.html#pii-showing-despite-redaction">5. PII Showing Despite Redaction</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/index.html#debug-mode">Debug Mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/index.html#performance-issues">Performance Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="troubleshooting/index.html#high-memory-usage">High Memory Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="troubleshooting/index.html#slow-logging">Slow Logging</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/index.html#getting-help">Getting Help</a><ul>
<li class="toctree-l3"><a class="reference internal" href="troubleshooting/index.html#self-service">Self-Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="troubleshooting/index.html#community-support">Community Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="troubleshooting/index.html#professional-support">Professional Support</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/index.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="faq.html#general-questions">General Questions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="faq.html#why-json-lines-by-default">Why JSON lines by default?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#how-to-add-custom-fields-globally">How to add custom fields globally?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#do-i-still-need-log-levels">Do I still need log levels?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#how-does-fapilog-compare-to-logging-structlog">How does fapilog compare to logging/structlog?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#technical-questions">Technical Questions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="faq.html#can-i-use-it-with-celery-async-jobs">Can I use it with Celery/async jobs?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#how-does-context-inheritance-work">How does context inheritance work?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#what-happens-if-a-sink-fails">What happens if a sink fails?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#performance-questions">Performance Questions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="faq.html#how-does-fapilog-handle-high-throughput">How does fapilog handle high throughput?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#whats-the-memory-overhead">What’s the memory overhead?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#how-fast-is-it">How fast is it?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#configuration-questions">Configuration Questions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="faq.html#can-i-use-configuration-files">Can I use configuration files?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#how-do-i-configure-different-environments">How do I configure different environments?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#can-i-change-configuration-at-runtime">Can I change configuration at runtime?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#integration-questions">Integration Questions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="faq.html#how-do-i-integrate-with-fastapi">How do I integrate with FastAPI?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#can-i-use-it-with-docker-kubernetes">Can I use it with Docker/Kubernetes?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#how-do-i-send-logs-to-external-systems">How do I send logs to external systems?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#support-questions">Support Questions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="faq.html#where-can-i-get-help">Where can I get help?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#how-do-i-report-a-bug">How do I report a bug?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#can-i-contribute-to-fapilog">Can I contribute to fapilog?</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contributing/index.html">Contributing to fapilog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contributing/index.html#getting-started">Getting Started</a><ul>
<li class="toctree-l3"><a class="reference internal" href="contributing/index.html#development-setup"><span class="xref myst">Development Setup</span></a></li>
<li class="toctree-l3"><a class="reference internal" href="contributing/index.html#code-style"><span class="xref myst">Code Style</span></a></li>
<li class="toctree-l3"><a class="reference internal" href="contributing/index.html#testing"><span class="xref myst">Testing</span></a></li>
<li class="toctree-l3"><a class="reference internal" href="contributing/index.html#documentation"><span class="xref myst">Documentation</span></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="contributing/index.html#development-workflow">Development Workflow</a><ul>
<li class="toctree-l3"><a class="reference internal" href="contributing/index.html#git-workflow"><span class="xref myst">Git Workflow</span></a></li>
<li class="toctree-l3"><a class="reference internal" href="contributing/index.html#code-review"><span class="xref myst">Code Review</span></a></li>
<li class="toctree-l3"><a class="reference internal" href="contributing/index.html#release-process"><span class="xref myst">Release Process</span></a></li>
<li class="toctree-l3"><a class="reference internal" href="contributing/index.html#ci-cd"><span class="xref myst">CI/CD</span></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="contributing/index.html#project-structure">Project Structure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="contributing/index.html#architecture"><span class="xref myst">Architecture</span></a></li>
<li class="toctree-l3"><a class="reference internal" href="contributing/index.html#code-organization"><span class="xref myst">Code Organization</span></a></li>
<li class="toctree-l3"><a class="reference internal" href="contributing/index.html#plugin-system"><span class="xref myst">Plugin System</span></a></li>
<li class="toctree-l3"><a class="reference internal" href="contributing/index.html#testing-strategy"><span class="xref myst">Testing Strategy</span></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="contributing/index.html#areas-to-contribute">Areas to Contribute</a><ul>
<li class="toctree-l3"><a class="reference internal" href="contributing/index.html#core-features"><span class="xref myst">Core Features</span></a></li>
<li class="toctree-l3"><a class="reference internal" href="contributing/index.html#plugins"><span class="xref myst">Plugins</span></a></li>
<li class="toctree-l3"><a class="reference internal" href="contributing/index.html#id1"><span class="xref myst">Documentation</span></a></li>
<li class="toctree-l3"><a class="reference internal" href="contributing/index.html#id2"><span class="xref myst">Testing</span></a></li>
<li class="toctree-l3"><a class="reference internal" href="contributing/index.html#performance"><span class="xref myst">Performance</span></a></li>
<li class="toctree-l3"><a class="reference internal" href="contributing/index.html#security"><span class="xref myst">Security</span></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="contributing/index.html#communication">Communication</a><ul>
<li class="toctree-l3"><a class="reference internal" href="contributing/index.html#discussions"><span class="xref myst">Discussions</span></a></li>
<li class="toctree-l3"><a class="reference internal" href="contributing/index.html#issues"><span class="xref myst">Issues</span></a></li>
<li class="toctree-l3"><a class="reference internal" href="contributing/index.html#community"><span class="xref myst">Community</span></a></li>
<li class="toctree-l3"><a class="reference internal" href="contributing/index.html#code-of-conduct"><span class="xref myst">Code of Conduct</span></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="contributing/index.html#resources">Resources</a><ul>
<li class="toctree-l3"><a class="reference internal" href="contributing/index.html#api-reference"><span class="xref myst">API Reference</span></a></li>
<li class="toctree-l3"><a class="reference internal" href="contributing/index.html#plugin-development"><span class="xref myst">Plugin Development</span></a></li>
<li class="toctree-l3"><a class="reference internal" href="contributing/index.html#testing-guide"><span class="xref myst">Testing Guide</span></a></li>
<li class="toctree-l3"><a class="reference internal" href="contributing/index.html#performance-guide"><span class="xref myst">Performance Guide</span></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="contributing/index.html#getting-help">Getting Help</a><ul>
<li class="toctree-l3"><a class="reference internal" href="contributing/index.html#faq"><span class="xref myst">FAQ</span></a></li>
<li class="toctree-l3"><a class="reference internal" href="contributing/index.html#troubleshooting"><span class="xref myst">Troubleshooting</span></a></li>
<li class="toctree-l3"><a class="reference internal" href="contributing/index.html#contact"><span class="xref myst">Contact</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="release-notes.html">Release Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="release-notes.html#current-version">Current Version</a><ul>
<li class="toctree-l3"><a class="reference internal" href="release-notes.html#whats-new-in-3-0-0">What’s New in 3.0.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="release-notes.html#breaking-changes">Breaking Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="release-notes.html#migration-guide">Migration Guide</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="release-notes.html#previous-versions">Previous Versions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="release-notes.html#fapilog-2-x-series">fapilog 2.x Series</a></li>
<li class="toctree-l3"><a class="reference internal" href="release-notes.html#fapilog-1-x-series">fapilog 1.x Series</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="release-notes.html#upgrade-guides">Upgrade Guides</a><ul>
<li class="toctree-l3"><a class="reference internal" href="release-notes.html#upgrading-to-3-0-0">Upgrading to 3.0.0</a><ul>
<li class="toctree-l4"><a class="reference internal" href="release-notes.html#update-dependencies">1. Update Dependencies</a></li>
<li class="toctree-l4"><a class="reference internal" href="release-notes.html#update-import-statements">2. Update Import Statements</a></li>
<li class="toctree-l4"><a class="reference internal" href="release-notes.html#update-configuration">3. Update Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="release-notes.html#update-plugin-code">4. Update Plugin Code</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="release-notes.html#upgrading-from-1-x-to-2-x">Upgrading from 1.x to 2.x</a><ul>
<li class="toctree-l4"><a class="reference internal" href="release-notes.html#id1">1. Update Dependencies</a></li>
<li class="toctree-l4"><a class="reference internal" href="release-notes.html#check-breaking-changes">2. Check Breaking Changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="release-notes.html#id2">3. Update Configuration</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="release-notes.html#compatibility">Compatibility</a><ul>
<li class="toctree-l3"><a class="reference internal" href="release-notes.html#python-versions">Python Versions</a></li>
<li class="toctree-l3"><a class="reference internal" href="release-notes.html#framework-compatibility">Framework Compatibility</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="release-notes.html#deprecation-policy">Deprecation Policy</a><ul>
<li class="toctree-l3"><a class="reference internal" href="release-notes.html#deprecation-timeline">Deprecation Timeline</a></li>
<li class="toctree-l3"><a class="reference internal" href="release-notes.html#currently-deprecated">Currently Deprecated</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="release-notes.html#roadmap">Roadmap</a><ul>
<li class="toctree-l3"><a class="reference internal" href="release-notes.html#upcoming-releases">Upcoming Releases</a><ul>
<li class="toctree-l4"><a class="reference internal" href="release-notes.html#fapilog-3-0-0-q1-2024">fapilog 3.0.0 (Q1 2024)</a></li>
<li class="toctree-l4"><a class="reference internal" href="release-notes.html#fapilog-3-1-0-q2-2024">fapilog 3.1.0 (Q2 2024)</a></li>
<li class="toctree-l4"><a class="reference internal" href="release-notes.html#fapilog-3-2-0-q3-2024">fapilog 3.2.0 (Q3 2024)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="release-notes.html#long-term-vision">Long-term Vision</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="release-notes.html#support">Support</a><ul>
<li class="toctree-l3"><a class="reference internal" href="release-notes.html#version-support">Version Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="release-notes.html#getting-help">Getting Help</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="appendices.html">Appendices</a><ul>
<li class="toctree-l2"><a class="reference internal" href="appendices.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendices.html#quick-reference">Quick Reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="appendices.html#common-terms">Common Terms</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendices.html#architecture-components">Architecture Components</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="appendices.html#glossary">Glossary</a><ul>
<li class="toctree-l3"><a class="reference internal" href="appendices.html#a">A</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendices.html#b">B</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendices.html#c">C</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendices.html#d">D</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendices.html#e">E</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendices.html#f">F</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendices.html#g">G</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendices.html#h">H</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendices.html#i">I</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendices.html#j">J</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendices.html#l">L</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendices.html#m">M</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendices.html#n">N</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendices.html#o">O</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendices.html#p">P</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendices.html#q">Q</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendices.html#r">R</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendices.html#s">S</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendices.html#t">T</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendices.html#u">U</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendices.html#v">V</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendices.html#w">W</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendices.html#z">Z</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="appendices.html#architecture-diagrams">Architecture Diagrams</a><ul>
<li class="toctree-l3"><a class="reference internal" href="appendices.html#high-level-architecture">High-Level Architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendices.html#pipeline-flow">Pipeline Flow</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendices.html#component-relationships">Component Relationships</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="appendices.html#license-credits">License &amp; Credits</a><ul>
<li class="toctree-l3"><a class="reference internal" href="appendices.html#license">License</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendices.html#credits">Credits</a><ul>
<li class="toctree-l4"><a class="reference internal" href="appendices.html#core-team">Core Team</a></li>
<li class="toctree-l4"><a class="reference internal" href="appendices.html#open-source-dependencies">Open Source Dependencies</a></li>
<li class="toctree-l4"><a class="reference internal" href="appendices.html#inspiration">Inspiration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="appendices.html#contributing">Contributing</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendices.html#acknowledgments">Acknowledgments</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #2980B9" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">fapilog</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Fapilog v3 Architecture Document</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/architecture.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="fapilog-v3-architecture-document">
<h1>Fapilog v3 Architecture Document<a class="headerlink" href="#fapilog-v3-architecture-document" title="Link to this heading"></a></h1>
<p>This document outlines the overall project architecture for <strong>Fapilog v3</strong>, including backend systems, shared services, and non-UI specific concerns. Its primary goal is to serve as the guiding architectural blueprint for AI-driven development, ensuring consistency and adherence to chosen patterns and technologies.</p>
<p><strong>Relationship to Frontend Architecture:</strong><br />
Since Fapilog v3 is primarily a Python library with CLI components and a future plugin marketplace, any web-based interfaces (plugin marketplace, monitoring dashboards) will require a separate Frontend Architecture Document that MUST be used in conjunction with this document. Core technology stack choices documented herein are definitive for the entire project.</p>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Link to this heading"></a></h2>
<section id="starter-template-or-existing-project">
<h3>Starter Template or Existing Project<a class="headerlink" href="#starter-template-or-existing-project" title="Link to this heading"></a></h3>
<p><strong>Decision:</strong> N/A - Complete greenfield development with no starter templates, building a Python library from scratch.</p>
<p><strong>Analysis from your project:</strong></p>
<ul class="simple">
<li><p>This is a Python library (not a web application)</p></li>
<li><p>Current structure suggests you’re building from scratch</p></li>
<li><p>Focus is on async-first architecture patterns</p></li>
<li><p>CLI components for tooling</p></li>
<li><p>Plugin marketplace infrastructure planned</p></li>
</ul>
</section>
<section id="change-log">
<h3>Change Log<a class="headerlink" href="#change-log" title="Link to this heading"></a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Date</p></th>
<th class="head"><p>Version</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Author</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>2024-01-XX</p></td>
<td><p>1.0</p></td>
<td><p>Initial architecture document creation</p></td>
<td><p>Winston (Senior System Architect)</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="high-level-architecture">
<h2>High Level Architecture<a class="headerlink" href="#high-level-architecture" title="Link to this heading"></a></h2>
<section id="technical-summary">
<h3>Technical Summary<a class="headerlink" href="#technical-summary" title="Link to this heading"></a></h3>
<p>Fapilog v3 employs a revolutionary <strong>async-first pipeline architecture</strong> designed for universal adoption from individual developers to enterprise-scale applications. The system utilizes <strong>zero-copy operations</strong> and <strong>parallel processing</strong> to achieve 500K-2M events/second throughput while maintaining perfect container isolation. Core architectural patterns include an <strong>extensible plugin ecosystem</strong>, <strong>enterprise compliance framework</strong>, and <strong>async-first component factory pattern</strong> that recreates v2 excellence in a pure async context. This architecture directly supports the PRD goals of achieving 9/10+ scores across all architectural categories while enabling both developer productivity and enterprise-grade reliability.</p>
</section>
<section id="high-level-overview">
<h3>High Level Overview<a class="headerlink" href="#high-level-overview" title="Link to this heading"></a></h3>
<p><strong>Architectural Style:</strong> <strong>Async-First Monolithic Library</strong> with <strong>Plugin-Based Extensibility</strong></p>
<ul class="simple">
<li><p><strong>Repository Structure:</strong> Monorepo (as specified in PRD technical assumptions)</p></li>
<li><p><strong>Service Architecture:</strong> Monolithic core with clear separation through plugin system</p></li>
<li><p><strong>Primary Data Flow:</strong> Async pipeline with parallel enrichment → processing → sink delivery</p></li>
<li><p><strong>Key Architectural Decisions:</strong></p>
<ul>
<li><p>Pure async-first design (no sync/async mixing)</p></li>
<li><p>Zero-copy operations throughout the pipeline</p></li>
<li><p>Container isolation with zero global state</p></li>
<li><p>Universal plugin ecosystem for extensibility</p></li>
<li><p>Enterprise compliance built into core architecture</p></li>
</ul>
</li>
</ul>
</section>
<section id="high-level-project-diagram">
<h3>High Level Project Diagram<a class="headerlink" href="#high-level-project-diagram" title="Link to this heading"></a></h3>
<div class="highlight-mermaid notranslate"><div class="highlight"><pre><span></span>graph TB
    subgraph &quot;Application Layer&quot;
        APP[&quot;Python Application&quot;]
        CLI[&quot;Fapilog CLI&quot;]
    end

    subgraph &quot;Fapilog v3 Core&quot;
        LOGGER[&quot;AsyncLogger&quot;]
        CONTAINER[&quot;AsyncLoggingContainer&quot;]
        EVENTS[&quot;LogEvent Pipeline&quot;]
    end

    subgraph &quot;Plugin Ecosystem&quot;
        ENRICHERS[&quot;Enricher Plugins&lt;br/&gt;Context, Metrics, Tracing&quot;]
        PROCESSORS[&quot;Processor Plugins&lt;br/&gt;Filtering, Transform, Monitor&quot;]
        SINKS[&quot;Sink Plugins&lt;br/&gt;File, DB, Cloud, SIEM&quot;]
    end

    subgraph &quot;Enterprise Features&quot;
        COMPLIANCE[&quot;Compliance Engine&lt;br/&gt;PCI-DSS, HIPAA, SOX&quot;]
        METRICS[&quot;Metrics Collection&lt;br/&gt;Performance, Health&quot;]
        MARKETPLACE[&quot;Plugin Marketplace&lt;br/&gt;Discovery, Install&quot;]
    end

    subgraph &quot;External Systems&quot;
        SIEM[&quot;SIEM Systems&lt;br/&gt;Splunk, ELK&quot;]
        CLOUD[&quot;Cloud Storage&lt;br/&gt;S3, Azure, GCP&quot;]
        MONITOR[&quot;Monitoring&lt;br/&gt;Datadog, Sentry&quot;]
    end

    APP --&gt; LOGGER
    CLI --&gt; CONTAINER
    LOGGER --&gt; CONTAINER
    CONTAINER --&gt; EVENTS

    EVENTS --&gt; ENRICHERS
    ENRICHERS --&gt; PROCESSORS
    PROCESSORS --&gt; SINKS

    CONTAINER --&gt; COMPLIANCE
    CONTAINER --&gt; METRICS
            MARKETPLACE --&gt; CONTAINER

        SINKS --&gt; SIEM
        SINKS --&gt; CLOUD
        SINKS --&gt; MONITOR

        subgraph &quot;Framework Integrations&quot;
            FASTAPI[&quot;FastAPI Integration Layer&lt;br/&gt;Middleware, DI, Lifecycle&quot;]
        end

        App --&gt; FASTAPI
        FASTAPI --&gt; LOGGER
        FASTAPI --&gt; CONTAINER

        style CONTAINER fill:#e1f5fe
        style EVENTS fill:#f3e5f5
        style FASTAPI fill:#fff3e0
    style COMPLIANCE fill:#fff3e0
</pre></div>
</div>
</section>
<section id="architectural-and-design-patterns">
<h3>Architectural and Design Patterns<a class="headerlink" href="#architectural-and-design-patterns" title="Link to this heading"></a></h3>
<p>Based on your PRD requirements and v2 excellence patterns, here are the key patterns that will guide the architecture:</p>
<ul class="simple">
<li><p><strong>Async-First Pipeline Pattern:</strong> Pure async/await throughout the logging pipeline with parallel processing - <em>Rationale:</em> Achieves 500K-2M events/second throughput target and 90% latency reduction from PRD requirements</p></li>
<li><p><strong>Container Isolation Pattern:</strong> Perfect isolation with zero global state using async context managers - <em>Rationale:</em> Recreates v2 excellence while enabling async patterns and preventing race conditions</p></li>
<li><p><strong>Dependency Injection Pattern:</strong> Constructor-based DI for plugins, containers, and core components - <em>Rationale:</em> Enables testability, container isolation, plugin flexibility, and enterprise customization without tight coupling</p></li>
<li><p><strong>Zero-Copy Operations Pattern:</strong> Memory views and efficient serialization throughout pipeline - <em>Rationale:</em> Achieves 80% memory reduction target and optimal performance for enterprise-scale deployments</p></li>
<li><p><strong>Universal Plugin Architecture:</strong> Extensible sinks, processors, and enrichers with async interfaces - <em>Rationale:</em> Enables ecosystem growth (100+ plugins by v3.1) and universal adoption from developers to enterprise</p></li>
<li><p><strong>Enterprise Compliance Pattern:</strong> Built-in PCI-DSS, HIPAA, SOX compliance with audit trails - <em>Rationale:</em> Addresses critical enterprise requirements identified in market research</p></li>
<li><p><strong>Async Component Factory Pattern:</strong> Revolutionary async component factory with zero-copy operations - <em>Rationale:</em> Recreates v2 factory excellence while enabling async-first instantiation and configuration</p></li>
<li><p><strong>Event-Driven Architecture:</strong> Rich metadata events with categories and severity levels - <em>Rationale:</em> Foundation for future alerting capabilities while maintaining structured logging excellence</p></li>
</ul>
</section>
</section>
<section id="tech-stack">
<h2>Tech Stack<a class="headerlink" href="#tech-stack" title="Link to this heading"></a></h2>
<p>This is the <strong>DEFINITIVE technology selection</strong> for Fapilog v3. These choices will serve as the single source of truth for all development.</p>
<p>Based on your async-first requirements, performance targets, and enterprise compliance needs, here are my recommendations:</p>
<section id="technology-stack-table">
<h3>Technology Stack Table<a class="headerlink" href="#technology-stack-table" title="Link to this heading"></a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Category</p></th>
<th class="head"><p>Technology</p></th>
<th class="head"><p>Version</p></th>
<th class="head"><p>Purpose</p></th>
<th class="head"><p>Rationale</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>Language</strong></p></td>
<td><p>Python</p></td>
<td><p>3.8+</p></td>
<td><p>Core development language</p></td>
<td><p>Async/await native support, typing, wide enterprise adoption</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Framework</strong></p></td>
<td><p>FastAPI</p></td>
<td><p>0.100+</p></td>
<td><p>API framework for plugin marketplace</p></td>
<td><p>Async-first, Pydantic v2 integration, excellent performance</p></td>
</tr>
<tr class="row-even"><td><p><strong>Type System</strong></p></td>
<td><p>Pydantic</p></td>
<td><p>v2</p></td>
<td><p>Data validation and serialization</p></td>
<td><p>Zero-copy serialization, async validation, enterprise compliance</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Async Runtime</strong></p></td>
<td><p>asyncio</p></td>
<td><p>Built-in</p></td>
<td><p>Core async operations</p></td>
<td><p>Native Python async, optimal for pipeline architecture</p></td>
</tr>
<tr class="row-even"><td><p><strong>Plugin Architecture</strong></p></td>
<td><p>importlib.metadata</p></td>
<td><p>Built-in</p></td>
<td><p>Plugin discovery and loading</p></td>
<td><p>Standard Python approach, no external dependencies</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Configuration</strong></p></td>
<td><p>Pydantic Settings</p></td>
<td><p>v2</p></td>
<td><p>Environment-based configuration</p></td>
<td><p>Type-safe, async loading, validation for enterprise compliance</p></td>
</tr>
<tr class="row-even"><td><p><strong>Testing Framework</strong></p></td>
<td><p>pytest</p></td>
<td><p>7.4+</p></td>
<td><p>Core testing framework</p></td>
<td><p>Excellent async support via pytest-asyncio</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Async Testing</strong></p></td>
<td><p>pytest-asyncio</p></td>
<td><p>0.21+</p></td>
<td><p>Async test support</p></td>
<td><p>Essential for async-first testing strategy</p></td>
</tr>
<tr class="row-even"><td><p><strong>Performance Testing</strong></p></td>
<td><p>pytest-benchmark</p></td>
<td><p>4.0+</p></td>
<td><p>Performance regression testing</p></td>
<td><p>Critical for 500K-2M events/second validation</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Type Checking</strong></p></td>
<td><p>mypy</p></td>
<td><p>1.5+</p></td>
<td><p>Static type analysis</p></td>
<td><p>100% async type coverage requirement</p></td>
</tr>
<tr class="row-even"><td><p><strong>Linting</strong></p></td>
<td><p>ruff</p></td>
<td><p>0.0.280+</p></td>
<td><p>Code quality and formatting</p></td>
<td><p>Fastest Python linter, async-aware</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Documentation</strong></p></td>
<td><p>MkDocs Material</p></td>
<td><p>9.2+</p></td>
<td><p>Documentation generation</p></td>
<td><p>Beautiful docs for community adoption</p></td>
</tr>
<tr class="row-even"><td><p><strong>CLI Framework</strong></p></td>
<td><p>Typer</p></td>
<td><p>0.9+</p></td>
<td><p>Command line interface</p></td>
<td><p>FastAPI ecosystem, excellent async support</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Metrics Collection</strong></p></td>
<td><p>Prometheus Client</p></td>
<td><p>0.17+</p></td>
<td><p>Performance metrics</p></td>
<td><p>Industry standard, enterprise SIEM integration</p></td>
</tr>
<tr class="row-even"><td><p><strong>Structured Logging</strong></p></td>
<td><p>structlog</p></td>
<td><p>23.1+</p></td>
<td><p>Internal structured logging</p></td>
<td><p>Async-first, zero-copy operations</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Plugin Packaging</strong></p></td>
<td><p>setuptools</p></td>
<td><p>68.0+</p></td>
<td><p>Plugin distribution</p></td>
<td><p>Standard Python packaging for marketplace</p></td>
</tr>
<tr class="row-even"><td><p><strong>Container Platform</strong></p></td>
<td><p>Docker</p></td>
<td><p>24.0+</p></td>
<td><p>Containerization</p></td>
<td><p>Enterprise deployment requirements</p></td>
</tr>
<tr class="row-odd"><td><p><strong>CI/CD</strong></p></td>
<td><p>GitHub Actions</p></td>
<td><p>Latest</p></td>
<td><p>Continuous integration</p></td>
<td><p>Plugin marketplace automation</p></td>
</tr>
<tr class="row-even"><td><p><strong>Code Coverage</strong></p></td>
<td><p>coverage.py</p></td>
<td><p>7.3+</p></td>
<td><p>Test coverage measurement</p></td>
<td><p>90%+ coverage requirement</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Security Scanning</strong></p></td>
<td><p>bandit</p></td>
<td><p>1.7+</p></td>
<td><p>Security vulnerability detection</p></td>
<td><p>Enterprise compliance validation</p></td>
</tr>
</tbody>
</table>
</section>
<section id="key-architectural-technology-decisions">
<h3>Key Architectural Technology Decisions:<a class="headerlink" href="#key-architectural-technology-decisions" title="Link to this heading"></a></h3>
<p><strong>Async-First Stack:</strong> Every component chosen supports native async/await patterns<br />
<strong>Zero-Copy Focus:</strong> Pydantic v2 and asyncio enable zero-copy operations throughout<br />
<strong>Enterprise Ready:</strong> All tools support enterprise compliance and audit requirements<br />
<strong>Plugin Ecosystem:</strong> Standard Python packaging enables community-driven growth<br />
<strong>Performance Validated:</strong> All choices validated for 500K-2M events/second targets</p>
</section>
</section>
<section id="data-models">
<h2>Data Models<a class="headerlink" href="#data-models" title="Link to this heading"></a></h2>
<p>Based on my analysis of your existing codebase and PRD requirements, here are the core data models that will drive the Fapilog v3 architecture:</p>
<section id="logevent">
<h3>LogEvent<a class="headerlink" href="#logevent" title="Link to this heading"></a></h3>
<p><strong>Purpose:</strong> The central data structure for all log events, designed for future alerting capabilities and enterprise compliance</p>
<p><strong>Key Attributes:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">message:</span> <span class="pre">str</span></code> - The primary log message content</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">level:</span> <span class="pre">str</span></code> - Standard logging level (DEBUG, INFO, WARNING, ERROR, CRITICAL)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">timestamp:</span> <span class="pre">datetime</span></code> - Event timestamp for chronological ordering</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">source:</span> <span class="pre">str</span></code> - Service/component name for distributed tracing</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">category:</span> <span class="pre">EventCategory</span></code> - Semantic categorization for alerting rules</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">severity:</span> <span class="pre">int</span></code> - Numeric severity (1-10) for alert prioritization</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tags:</span> <span class="pre">Dict[str,</span> <span class="pre">str]</span></code> - Key-value metadata for filtering and enrichment</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">context:</span> <span class="pre">Dict[str,</span> <span class="pre">Any]</span></code> - Request context and trace correlation</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">metrics:</span> <span class="pre">Dict[str,</span> <span class="pre">float]</span></code> - Performance metrics and measurements</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">correlation_id:</span> <span class="pre">str</span></code> - Distributed tracing and request correlation</p></li>
</ul>
<p><strong>Relationships:</strong></p>
<ul class="simple">
<li><p><strong>With AsyncLogger:</strong> Created and processed by logger instances</p></li>
<li><p><strong>With Plugin System:</strong> Enriched by enricher plugins, processed by processor plugins</p></li>
<li><p><strong>With Compliance Engine:</strong> Validated and redacted based on compliance standards</p></li>
</ul>
</section>
<section id="universalsettings">
<h3>UniversalSettings<a class="headerlink" href="#universalsettings" title="Link to this heading"></a></h3>
<p><strong>Purpose:</strong> Configuration model that drives all aspects of the async-first logging system with enterprise compliance features</p>
<p><strong>Key Attributes:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">level:</span> <span class="pre">str</span></code> - Global logging level filter</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sinks:</span> <span class="pre">List[str]</span></code> - Active sink configurations</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">async_processing:</span> <span class="pre">bool</span></code> - Enable async pipeline processing</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">batch_size:</span> <span class="pre">int</span></code> - Event batching for performance optimization</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">queue_max_size:</span> <span class="pre">int</span></code> - Maximum queue size for backpressure handling</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">max_workers:</span> <span class="pre">int</span></code> - Parallel processing worker count</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">compliance_standard:</span> <span class="pre">ComplianceStandard</span></code> - Enterprise compliance mode</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">overflow_strategy:</span> <span class="pre">OverflowStrategy</span></code> - Queue overflow behavior</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">plugin_config:</span> <span class="pre">Dict[str,</span> <span class="pre">Any]</span></code> - Plugin-specific configurations</p></li>
</ul>
<p><strong>Relationships:</strong></p>
<ul class="simple">
<li><p><strong>With AsyncLogger:</strong> Configures logger behavior and performance characteristics</p></li>
<li><p><strong>With Plugin Registry:</strong> Drives plugin loading and configuration</p></li>
<li><p><strong>With Compliance Engine:</strong> Determines compliance validation rules</p></li>
</ul>
</section>
<section id="eventcategory">
<h3>EventCategory<a class="headerlink" href="#eventcategory" title="Link to this heading"></a></h3>
<p><strong>Purpose:</strong> Semantic categorization enum for future alerting capabilities and enterprise monitoring</p>
<p><strong>Values:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ERROR</span></code> - Error conditions requiring investigation</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PERFORMANCE</span></code> - Performance-related events and metrics</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SECURITY</span></code> - Security events and compliance violations</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BUSINESS</span></code> - Business logic and workflow events</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SYSTEM</span></code> - System-level operational events</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">COMPLIANCE</span></code> - Compliance audit and validation events</p></li>
</ul>
<p><strong>Relationships:</strong></p>
<ul class="simple">
<li><p><strong>With LogEvent:</strong> Defines semantic category for alerting rules</p></li>
<li><p><strong>With Alerting System:</strong> Future integration point for alert routing</p></li>
</ul>
</section>
<section id="pluginmetadata">
<h3>PluginMetadata<a class="headerlink" href="#pluginmetadata" title="Link to this heading"></a></h3>
<p><strong>Purpose:</strong> Metadata model for plugin discovery, loading, and marketplace integration</p>
<p><strong>Key Attributes:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">name:</span> <span class="pre">str</span></code> - Plugin unique identifier</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">version:</span> <span class="pre">str</span></code> - Semantic version for compatibility</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">plugin_type:</span> <span class="pre">PluginType</span></code> - Sink, Processor, or Enricher classification</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">entry_point:</span> <span class="pre">str</span></code> - Module path for plugin loading</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dependencies:</span> <span class="pre">List[str]</span></code> - Required dependencies and versions</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">compliance_certified:</span> <span class="pre">bool</span></code> - Enterprise compliance validation status</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">performance_profile:</span> <span class="pre">Dict[str,</span> <span class="pre">float]</span></code> - Performance characteristics</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">configuration_schema:</span> <span class="pre">Dict[str,</span> <span class="pre">Any]</span></code> - Plugin configuration validation</p></li>
</ul>
<p><strong>Relationships:</strong></p>
<ul class="simple">
<li><p><strong>With Plugin Registry:</strong> Enables dynamic plugin discovery and loading</p></li>
<li><p><strong>With Plugin Marketplace:</strong> Supports community-driven ecosystem growth</p></li>
<li><p><strong>With Compliance Engine:</strong> Validates enterprise compliance requirements</p></li>
</ul>
</section>
<section id="asyncloggingcontainer">
<h3>AsyncLoggingContainer<a class="headerlink" href="#asyncloggingcontainer" title="Link to this heading"></a></h3>
<p><strong>Purpose:</strong> Container isolation model providing perfect isolation with zero global state</p>
<p><strong>Key Attributes:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">container_id:</span> <span class="pre">str</span></code> - Unique container identifier</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">settings:</span> <span class="pre">UniversalSettings</span></code> - Container-specific configuration</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">plugin_registry:</span> <span class="pre">PluginRegistry</span></code> - Isolated plugin instances</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">metrics_collector:</span> <span class="pre">MetricsCollector</span></code> - Container performance metrics</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">compliance_engine:</span> <span class="pre">ComplianceEngine</span></code> - Container compliance validation</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">async_pipeline:</span> <span class="pre">AsyncPipeline</span></code> - Isolated event processing pipeline</p></li>
</ul>
<p><strong>Relationships:</strong></p>
<ul class="simple">
<li><p><strong>With AsyncLogger:</strong> Provides isolated execution context</p></li>
<li><p><strong>With Plugin System:</strong> Maintains isolated plugin instances</p></li>
<li><p><strong>With Metrics System:</strong> Collects container-specific performance data</p></li>
</ul>
</section>
</section>
<section id="components">
<h2>Components<a class="headerlink" href="#components" title="Link to this heading"></a></h2>
<p>Based on the architectural patterns, tech stack, and data models defined above, here are the major logical components that will implement the Fapilog v3 async-first architecture:</p>
<section id="asynclogger">
<h3>AsyncLogger<a class="headerlink" href="#asynclogger" title="Link to this heading"></a></h3>
<p><strong>Responsibility:</strong> Primary interface for async-first logging with zero-copy operations and parallel processing</p>
<p><strong>Key Interfaces:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span> <span class="pre">info(message:</span> <span class="pre">str,</span> <span class="pre">**kwargs)</span> <span class="pre">-&gt;</span> <span class="pre">None</span></code> - Async logging methods</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span> <span class="pre">create(settings:</span> <span class="pre">UniversalSettings)</span> <span class="pre">-&gt;</span> <span class="pre">AsyncLogger</span></code> - Factory method</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span> <span class="pre">shutdown()</span> <span class="pre">-&gt;</span> <span class="pre">None</span></code> - Graceful resource cleanup</p></li>
</ul>
<p><strong>Dependencies:</strong> UniversalSettings, AsyncLoggingContainer, LogEvent pipeline<br />
<strong>Technology Stack:</strong> Python asyncio, Pydantic v2 for validation, zero-copy event creation</p>
</section>
<section id="id1">
<h3>AsyncLoggingContainer<a class="headerlink" href="#id1" title="Link to this heading"></a></h3>
<p><strong>Responsibility:</strong> Perfect isolation with zero global state, managing isolated plugin instances and pipeline execution</p>
<p><strong>Key Interfaces:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span> <span class="pre">create_logger(settings:</span> <span class="pre">UniversalSettings)</span> <span class="pre">-&gt;</span> <span class="pre">AsyncLogger</span></code> - Logger factory</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span> <span class="pre">load_plugins()</span> <span class="pre">-&gt;</span> <span class="pre">None</span></code> - Dynamic plugin loading and validation</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span> <span class="pre">get_metrics()</span> <span class="pre">-&gt;</span> <span class="pre">ContainerMetrics</span></code> - Performance monitoring</p></li>
</ul>
<p><strong>Dependencies:</strong> PluginRegistry, MetricsCollector, ComplianceEngine<br />
<strong>Technology Stack:</strong> asyncio context management, importlib.metadata for plugin discovery</p>
</section>
<section id="asyncpipeline">
<h3>AsyncPipeline<a class="headerlink" href="#asyncpipeline" title="Link to this heading"></a></h3>
<p><strong>Responsibility:</strong> Core async-first event processing pipeline implementing enrichment → processing → queue → sinks flow</p>
<p><strong>Key Interfaces:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span> <span class="pre">process_event(event:</span> <span class="pre">LogEvent)</span> <span class="pre">-&gt;</span> <span class="pre">None</span></code> - Main pipeline entry point</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span> <span class="pre">register_enricher(enricher:</span> <span class="pre">EnricherPlugin)</span> <span class="pre">-&gt;</span> <span class="pre">None</span></code> - Plugin registration</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span> <span class="pre">get_pipeline_metrics()</span> <span class="pre">-&gt;</span> <span class="pre">PipelineMetrics</span></code> - Performance monitoring</p></li>
</ul>
<p><strong>Dependencies:</strong> EnricherPlugins, ProcessorPlugins, SinkPlugins, AsyncQueue<br />
<strong>Technology Stack:</strong> asyncio parallel processing, zero-copy event passing, Prometheus metrics</p>
</section>
<section id="pluginregistry">
<h3>PluginRegistry<a class="headerlink" href="#pluginregistry" title="Link to this heading"></a></h3>
<p><strong>Responsibility:</strong> Dynamic plugin discovery, loading, and lifecycle management for the universal plugin ecosystem</p>
<p><strong>Key Interfaces:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span> <span class="pre">discover_plugins()</span> <span class="pre">-&gt;</span> <span class="pre">List[PluginMetadata]</span></code> - Plugin discovery</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span> <span class="pre">load_plugin(metadata:</span> <span class="pre">PluginMetadata)</span> <span class="pre">-&gt;</span> <span class="pre">Plugin</span></code> - Safe plugin loading</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span> <span class="pre">validate_plugin_compliance(plugin:</span> <span class="pre">Plugin)</span> <span class="pre">-&gt;</span> <span class="pre">bool</span></code> - Enterprise validation</p></li>
</ul>
<p><strong>Dependencies:</strong> PluginMetadata, ComplianceEngine, PluginMarketplace<br />
<strong>Technology Stack:</strong> importlib.metadata, setuptools entry points, async validation</p>
</section>
<section id="complianceengine">
<h3>ComplianceEngine<a class="headerlink" href="#complianceengine" title="Link to this heading"></a></h3>
<p><strong>Responsibility:</strong> Enterprise compliance validation and enforcement for PCI-DSS, HIPAA, SOX standards</p>
<p><strong>Key Interfaces:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span> <span class="pre">validate_event(event:</span> <span class="pre">LogEvent)</span> <span class="pre">-&gt;</span> <span class="pre">LogEvent</span></code> - Event compliance validation</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span> <span class="pre">redact_sensitive_data(event:</span> <span class="pre">LogEvent)</span> <span class="pre">-&gt;</span> <span class="pre">LogEvent</span></code> - PII redaction</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span> <span class="pre">audit_log_access(user:</span> <span class="pre">str,</span> <span class="pre">action:</span> <span class="pre">str)</span> <span class="pre">-&gt;</span> <span class="pre">None</span></code> - Audit trail creation</p></li>
</ul>
<p><strong>Dependencies:</strong> UniversalSettings, ComplianceStandard enums, audit storage<br />
<strong>Technology Stack:</strong> Pydantic v2 validation, structured audit logging, async compliance checks</p>
</section>
<section id="metricscollector">
<h3>MetricsCollector<a class="headerlink" href="#metricscollector" title="Link to this heading"></a></h3>
<p><strong>Responsibility:</strong> Comprehensive metrics collection with async-first patterns and zero-copy operations for 500K-2M events/second monitoring</p>
<p><strong>Key Interfaces:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span> <span class="pre">record_event_processed(duration:</span> <span class="pre">float)</span> <span class="pre">-&gt;</span> <span class="pre">None</span></code> - Event processing metrics</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span> <span class="pre">record_pipeline_throughput(events_per_second:</span> <span class="pre">float)</span> <span class="pre">-&gt;</span> <span class="pre">None</span></code> - Throughput tracking</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span> <span class="pre">export_metrics()</span> <span class="pre">-&gt;</span> <span class="pre">Dict[str,</span> <span class="pre">float]</span></code> - Metrics export for monitoring systems</p></li>
</ul>
<p><strong>Dependencies:</strong> Prometheus client, AsyncPipeline performance data<br />
<strong>Technology Stack:</strong> Prometheus client async support, zero-copy metric aggregation</p>
</section>
<section id="pluginmarketplace">
<h3>PluginMarketplace<a class="headerlink" href="#pluginmarketplace" title="Link to this heading"></a></h3>
<p><strong>Responsibility:</strong> Community-driven plugin ecosystem with discovery, installation, and validation capabilities</p>
<p><strong>Key Interfaces:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span> <span class="pre">search_plugins(query:</span> <span class="pre">str)</span> <span class="pre">-&gt;</span> <span class="pre">List[PluginMetadata]</span></code> - Plugin discovery</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span> <span class="pre">install_plugin(name:</span> <span class="pre">str,</span> <span class="pre">version:</span> <span class="pre">str)</span> <span class="pre">-&gt;</span> <span class="pre">bool</span></code> - Plugin installation</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span> <span class="pre">validate_plugin_security(plugin:</span> <span class="pre">PluginMetadata)</span> <span class="pre">-&gt;</span> <span class="pre">bool</span></code> - Security scanning</p></li>
</ul>
<p><strong>Dependencies:</strong> PluginRegistry, HTTP client for marketplace API, security scanner<br />
<strong>Technology Stack:</strong> FastAPI for marketplace API, async HTTP client, security validation</p>
</section>
<section id="asyncqueue">
<h3>AsyncQueue<a class="headerlink" href="#asyncqueue" title="Link to this heading"></a></h3>
<p><strong>Responsibility:</strong> High-performance async buffering and batching with overflow handling for zero-copy operations</p>
<p><strong>Key Interfaces:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span> <span class="pre">enqueue(event:</span> <span class="pre">LogEvent)</span> <span class="pre">-&gt;</span> <span class="pre">None</span></code> - Event queuing with backpressure</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span> <span class="pre">dequeue_batch(size:</span> <span class="pre">int)</span> <span class="pre">-&gt;</span> <span class="pre">List[LogEvent]</span></code> - Batch dequeuing</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span> <span class="pre">handle_overflow(strategy:</span> <span class="pre">OverflowStrategy)</span> <span class="pre">-&gt;</span> <span class="pre">None</span></code> - Overflow management</p></li>
</ul>
<p><strong>Dependencies:</strong> asyncio.Queue, OverflowStrategy, batch management<br />
<strong>Technology Stack:</strong> asyncio native queuing, zero-copy event references, batch optimization</p>
</section>
<section id="fastapiintegrationlayer">
<h3>FastAPIIntegrationLayer<a class="headerlink" href="#fastapiintegrationlayer" title="Link to this heading"></a></h3>
<p><strong>Responsibility:</strong> Framework integration for FastAPI applications providing middleware, dependency injection, lifecycle management, and testing utilities</p>
<p><strong>Key Interfaces:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">class</span> <span class="pre">FapilogMiddleware</span></code> - ASGI middleware for request-scoped logging with correlation ID propagation</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span> <span class="pre">get_logger()</span> <span class="pre">-&gt;</span> <span class="pre">AsyncLogger</span></code> - FastAPI dependency for logger injection</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">def</span> <span class="pre">register_fapilog_lifecycle(app:</span> <span class="pre">FastAPI,</span> <span class="pre">settings:</span> <span class="pre">UniversalSettings)</span> <span class="pre">-&gt;</span> <span class="pre">None</span></code> - Lifecycle hook registration</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">class</span> <span class="pre">FapilogExceptionHandler</span></code> - Optional exception logging integration</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">def</span> <span class="pre">fapilog_test_fixture()</span> <span class="pre">-&gt;</span> <span class="pre">AsyncLogger</span></code> - Test fixture for FastAPI applications</p></li>
</ul>
<p><strong>Dependencies:</strong> AsyncLogger, AsyncLoggingContainer, FastAPI application instance<br />
<strong>Technology Stack:</strong> FastAPI middleware, dependency injection, async context variables, pytest fixtures</p>
<p><strong>Key Features:</strong></p>
<ul class="simple">
<li><p><strong>Zero Global State</strong>: Each request gets independent logger instance with container isolation</p></li>
<li><p><strong>Correlation ID Propagation</strong>: Automatic correlation ID generation and async context propagation</p></li>
<li><p><strong>Request-Aware Logging</strong>: Optional request/response logging plugin with PII redaction</p></li>
<li><p><strong>Performance Optimized</strong>: &lt;1ms initialization overhead per request</p></li>
<li><p><strong>Testing Support</strong>: Comprehensive test fixtures for FastAPI application testing</p></li>
</ul>
</section>
<section id="component-diagrams">
<h3>Component Diagrams<a class="headerlink" href="#component-diagrams" title="Link to this heading"></a></h3>
<div class="highlight-mermaid notranslate"><div class="highlight"><pre><span></span>graph TB
    subgraph &quot;Container Isolation&quot;
        CONTAINER[&quot;AsyncLoggingContainer&quot;]
        LOGGER[&quot;AsyncLogger&quot;]
        PIPELINE[&quot;AsyncPipeline&quot;]
    end

    subgraph &quot;Plugin Ecosystem&quot;
        REGISTRY[&quot;PluginRegistry&quot;]
        MARKETPLACE[&quot;PluginMarketplace&quot;]
        ENRICHER[&quot;EnricherPlugins&quot;]
        PROCESSOR[&quot;ProcessorPlugins&quot;]
        SINK[&quot;SinkPlugins&quot;]
    end

    subgraph &quot;Enterprise Features&quot;
        COMPLIANCE[&quot;ComplianceEngine&quot;]
        METRICS[&quot;MetricsCollector&quot;]
        QUEUE[&quot;AsyncQueue&quot;]
    end

    subgraph &quot;Data Models&quot;
        EVENT[&quot;LogEvent&quot;]
        SETTINGS[&quot;UniversalSettings&quot;]
        METADATA[&quot;PluginMetadata&quot;]
    end

    CONTAINER --&gt; LOGGER
    CONTAINER --&gt; REGISTRY
    LOGGER --&gt; PIPELINE
    PIPELINE --&gt; QUEUE
    PIPELINE --&gt; ENRICHER
    PIPELINE --&gt; PROCESSOR
    PIPELINE --&gt; SINK

    REGISTRY --&gt; MARKETPLACE
    REGISTRY --&gt; METADATA

    PIPELINE --&gt; COMPLIANCE
    PIPELINE --&gt; METRICS

    LOGGER --&gt; EVENT
    CONTAINER --&gt; SETTINGS

    COMPLIANCE --&gt; EVENT
    METRICS --&gt; EVENT
    QUEUE --&gt; EVENT

    style CONTAINER fill:#e1f5fe
    style PIPELINE fill:#f3e5f5
    style COMPLIANCE fill:#fff3e0
    style EVENT fill:#e8f5e8
</pre></div>
</div>
</section>
</section>
<section id="external-apis">
<h2>External APIs<a class="headerlink" href="#external-apis" title="Link to this heading"></a></h2>
<section id="core-library-zero-external-dependencies">
<h3>Core Library: Zero External Dependencies<a class="headerlink" href="#core-library-zero-external-dependencies" title="Link to this heading"></a></h3>
<p>The core fapilog library has <strong>NO external API dependencies</strong>. It works completely offline and out-of-the-box.</p>
</section>
<section id="plugin-ecosystem-community-driven-via-pypi">
<h3>Plugin Ecosystem: Community-Driven via PyPI<a class="headerlink" href="#plugin-ecosystem-community-driven-via-pypi" title="Link to this heading"></a></h3>
<p><strong>Plugin Discovery via GitHub</strong></p>
<ul class="simple">
<li><p><strong>GitHub Topics</strong>: Search repositories with <code class="docutils literal notranslate"><span class="pre">fapilog-plugin</span></code> topic</p></li>
<li><p><strong>Awesome Fapilog</strong>: Curated list in community repository</p></li>
<li><p><strong>Plugin Template</strong>: Standard template for creating new plugins</p></li>
</ul>
<p><strong>Plugin Installation via PyPI</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Standard Python package installation</span>
pip<span class="w"> </span>install<span class="w"> </span>fapilog-splunk-sink
pip<span class="w"> </span>install<span class="w"> </span>fapilog-audit-trail
pip<span class="w"> </span>install<span class="w"> </span>fapilog-prometheus-metrics
</pre></div>
</div>
<p><strong>Plugin Configuration via Entry Points</strong></p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="c1"># pyproject.toml for plugin packages</span>
<span class="k">[project.entry-points.</span><span class="s2">&quot;fapilog.sinks&quot;</span><span class="k">]</span>
<span class="n">splunk</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;fapilog_splunk:SplunkSink&quot;</span>

<span class="k">[project.entry-points.</span><span class="s2">&quot;fapilog.processors&quot;</span><span class="k">]</span>
<span class="n">pii_redaction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;fapilog_compliance:PIIRedactionProcessor&quot;</span>
</pre></div>
</div>
</section>
<section id="enterprise-plugins-optional-external-apis">
<h3>Enterprise Plugins: Optional External APIs<a class="headerlink" href="#enterprise-plugins-optional-external-apis" title="Link to this heading"></a></h3>
<p><strong>Only when enterprise plugins are installed:</strong></p>
<ul class="simple">
<li><p><strong>Splunk HEC API</strong> - <code class="docutils literal notranslate"><span class="pre">fapilog-splunk-sink</span></code> plugin</p></li>
<li><p><strong>Prometheus Metrics</strong> - <code class="docutils literal notranslate"><span class="pre">fapilog-prometheus</span></code> plugin</p></li>
<li><p><strong>Elasticsearch API</strong> - <code class="docutils literal notranslate"><span class="pre">fapilog-elastic-sink</span></code> plugin</p></li>
<li><p><strong>Datadog Logs API</strong> - <code class="docutils literal notranslate"><span class="pre">fapilog-datadog-sink</span></code> plugin</p></li>
</ul>
</section>
</section>
<section id="built-in-core-features">
<h2>Built-in Core Features<a class="headerlink" href="#built-in-core-features" title="Link to this heading"></a></h2>
<p>Fapilog v3 includes essential features <strong>out of the box</strong> to ensure immediate productivity without requiring any plugins. These built-in components provide a complete logging solution while serving as reference implementations for the plugin ecosystem.</p>
<section id="core-sinks-built-in">
<h3>Core Sinks (Built-in)<a class="headerlink" href="#core-sinks-built-in" title="Link to this heading"></a></h3>
<p><strong>Essential output destinations included in core library:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Built-in sinks - no plugins required</span>
<span class="n">BUILTIN_SINKS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;stdout&quot;</span><span class="p">:</span> <span class="n">StdoutSink</span><span class="p">,</span>      <span class="c1"># Console output with color support</span>
    <span class="s2">&quot;stderr&quot;</span><span class="p">:</span> <span class="n">StderrSink</span><span class="p">,</span>      <span class="c1"># Error output with color support</span>
    <span class="s2">&quot;file&quot;</span><span class="p">:</span> <span class="n">FileSink</span><span class="p">,</span>          <span class="c1"># File output with rotation</span>
    <span class="s2">&quot;null&quot;</span><span class="p">:</span> <span class="n">NullSink</span><span class="p">,</span>          <span class="c1"># Discard (for testing/disabled)</span>
<span class="p">}</span>

<span class="k">class</span><span class="w"> </span><span class="nc">StdoutSink</span><span class="p">(</span><span class="n">BaseSink</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Built-in stdout sink with async support.&quot;&quot;&quot;</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">send</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">LogEvent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Send to stdout with optional color formatting.&quot;&quot;&quot;</span>
        <span class="n">formatted</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_event</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;colors&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">):</span>
            <span class="n">formatted</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorize_by_level</span><span class="p">(</span><span class="n">formatted</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">level</span><span class="p">)</span>

        <span class="c1"># Non-blocking stdout write</span>
        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_in_executor</span><span class="p">(</span>
            <span class="kc">None</span><span class="p">,</span> <span class="nb">print</span><span class="p">,</span> <span class="n">formatted</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>

<span class="k">class</span><span class="w"> </span><span class="nc">FileSink</span><span class="p">(</span><span class="n">BaseSink</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Built-in file sink with async I/O and rotation.&quot;&quot;&quot;</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">send</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">LogEvent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Write to file with async I/O.&quot;&quot;&quot;</span>
        <span class="n">formatted</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_event</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>

        <span class="k">async</span> <span class="k">with</span> <span class="n">aiofiles</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_path</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="k">await</span> <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">formatted</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Check if rotation needed</span>
        <span class="k">if</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">should_rotate</span><span class="p">():</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">rotate_file</span><span class="p">()</span>

        <span class="k">return</span> <span class="kc">True</span>
</pre></div>
</div>
</section>
<section id="core-processors-built-in">
<h3>Core Processors (Built-in)<a class="headerlink" href="#core-processors-built-in" title="Link to this heading"></a></h3>
<p><strong>Essential processing capabilities included in core library:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Built-in processors - no plugins required</span>
<span class="n">BUILTIN_PROCESSORS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;filter&quot;</span><span class="p">:</span> <span class="n">FilterProcessor</span><span class="p">,</span>        <span class="c1"># Level-based filtering</span>
    <span class="s2">&quot;throttle&quot;</span><span class="p">:</span> <span class="n">ThrottleProcessor</span><span class="p">,</span>    <span class="c1"># Rate limiting</span>
    <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="n">FormatProcessor</span><span class="p">,</span>        <span class="c1"># Message formatting</span>
    <span class="s2">&quot;dedupe&quot;</span><span class="p">:</span> <span class="n">DedupeProcessor</span><span class="p">,</span>        <span class="c1"># Duplicate detection</span>
<span class="p">}</span>

<span class="k">class</span><span class="w"> </span><span class="nc">FilterProcessor</span><span class="p">(</span><span class="n">BaseProcessor</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Built-in level-based filtering.&quot;&quot;&quot;</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">LogEvent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">LogEvent</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Filter events by level.&quot;&quot;&quot;</span>
        <span class="n">min_level</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;min_level&quot;</span><span class="p">,</span> <span class="s2">&quot;INFO&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">should_filter</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">level</span><span class="p">,</span> <span class="n">min_level</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">None</span>  <span class="c1"># Filter out</span>

        <span class="k">return</span> <span class="n">event</span>

<span class="k">class</span><span class="w"> </span><span class="nc">ThrottleProcessor</span><span class="p">(</span><span class="n">BaseProcessor</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Built-in rate limiting processor.&quot;&quot;&quot;</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">LogEvent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">LogEvent</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Rate limit events to prevent spam.&quot;&quot;&quot;</span>
        <span class="n">key</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">event</span><span class="o">.</span><span class="n">source</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">event</span><span class="o">.</span><span class="n">level</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="k">if</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">rate_limiter</span><span class="o">.</span><span class="n">is_allowed</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">event</span>

        <span class="c1"># Return throttled indicator on first drop</span>
        <span class="k">if</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">rate_limiter</span><span class="o">.</span><span class="n">is_first_drop</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">LogEvent</span><span class="p">(</span>
                <span class="n">message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Rate limit exceeded for </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2"> - throttling messages&quot;</span><span class="p">,</span>
                <span class="n">level</span><span class="o">=</span><span class="s2">&quot;WARNING&quot;</span><span class="p">,</span>
                <span class="n">source</span><span class="o">=</span><span class="s2">&quot;fapilog.throttle&quot;</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="kc">None</span>  <span class="c1"># Drop silently after first warning</span>
</pre></div>
</div>
</section>
<section id="core-enrichers-built-in">
<h3>Core Enrichers (Built-in)<a class="headerlink" href="#core-enrichers-built-in" title="Link to this heading"></a></h3>
<p><strong>Essential context enrichment included in core library:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Built-in enrichers - no plugins required</span>
<span class="n">BUILTIN_ENRICHERS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="n">TimestampEnricher</span><span class="p">,</span>    <span class="c1"># High-precision timestamps</span>
    <span class="s2">&quot;correlation&quot;</span><span class="p">:</span> <span class="n">CorrelationEnricher</span><span class="p">,</span> <span class="c1"># Request correlation IDs</span>
    <span class="s2">&quot;context&quot;</span><span class="p">:</span> <span class="n">ContextEnricher</span><span class="p">,</span>        <span class="c1"># Thread/async context</span>
    <span class="s2">&quot;hostname&quot;</span><span class="p">:</span> <span class="n">HostnameEnricher</span><span class="p">,</span>      <span class="c1"># System identification</span>
<span class="p">}</span>

<span class="k">class</span><span class="w"> </span><span class="nc">CorrelationEnricher</span><span class="p">(</span><span class="n">BaseEnricher</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Built-in correlation ID management.&quot;&quot;&quot;</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">enrich</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">LogEvent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LogEvent</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add or preserve correlation IDs.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">event</span><span class="o">.</span><span class="n">correlation_id</span><span class="p">:</span>
            <span class="c1"># Get from async context or generate new</span>
            <span class="n">event</span><span class="o">.</span><span class="n">correlation_id</span> <span class="o">=</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get_context_correlation_id</span><span class="p">()</span> <span class="ow">or</span>
                <span class="nb">str</span><span class="p">(</span><span class="n">uuid4</span><span class="p">())</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">event</span>

<span class="k">class</span><span class="w"> </span><span class="nc">ContextEnricher</span><span class="p">(</span><span class="n">BaseEnricher</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Built-in async context enrichment.&quot;&quot;&quot;</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">enrich</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">LogEvent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LogEvent</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add async task and thread context.&quot;&quot;&quot;</span>
        <span class="n">context_data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;task_name&quot;</span><span class="p">:</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">current_task</span><span class="p">()</span><span class="o">.</span><span class="n">get_name</span><span class="p">(),</span>
            <span class="s2">&quot;thread_id&quot;</span><span class="p">:</span> <span class="n">threading</span><span class="o">.</span><span class="n">get_ident</span><span class="p">(),</span>
            <span class="s2">&quot;process_id&quot;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">getpid</span><span class="p">(),</span>
        <span class="p">}</span>

        <span class="c1"># Merge with existing context</span>
        <span class="n">event</span><span class="o">.</span><span class="n">context</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="n">event</span><span class="o">.</span><span class="n">context</span><span class="p">,</span> <span class="o">**</span><span class="n">context_data</span><span class="p">}</span>
        <span class="k">return</span> <span class="n">event</span>
</pre></div>
</div>
</section>
<section id="core-formatters-built-in">
<h3>Core Formatters (Built-in)<a class="headerlink" href="#core-formatters-built-in" title="Link to this heading"></a></h3>
<p><strong>Essential output formatting included in core library:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Built-in formatters - no plugins required</span>
<span class="n">BUILTIN_FORMATTERS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;simple&quot;</span><span class="p">:</span> <span class="n">SimpleFormatter</span><span class="p">,</span>      <span class="c1"># Human-readable format</span>
    <span class="s2">&quot;json&quot;</span><span class="p">:</span> <span class="n">JSONFormatter</span><span class="p">,</span>          <span class="c1"># Structured JSON output</span>
    <span class="s2">&quot;logfmt&quot;</span><span class="p">:</span> <span class="n">LogfmtFormatter</span><span class="p">,</span>      <span class="c1"># Key=value format</span>
    <span class="s2">&quot;minimal&quot;</span><span class="p">:</span> <span class="n">MinimalFormatter</span><span class="p">,</span>    <span class="c1"># Compact format</span>
<span class="p">}</span>

<span class="k">class</span><span class="w"> </span><span class="nc">JSONFormatter</span><span class="p">(</span><span class="n">BaseFormatter</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Built-in JSON formatter for structured logging.&quot;&quot;&quot;</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">format</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">LogEvent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Format as JSON with proper async serialization.&quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="n">event</span><span class="o">.</span><span class="n">timestamp</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span>
            <span class="s2">&quot;level&quot;</span><span class="p">:</span> <span class="n">event</span><span class="o">.</span><span class="n">level</span><span class="p">,</span>
            <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="n">event</span><span class="o">.</span><span class="n">message</span><span class="p">,</span>
            <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="n">event</span><span class="o">.</span><span class="n">source</span><span class="p">,</span>
            <span class="s2">&quot;correlation_id&quot;</span><span class="p">:</span> <span class="n">event</span><span class="o">.</span><span class="n">correlation_id</span><span class="p">,</span>
            <span class="o">**</span><span class="n">event</span><span class="o">.</span><span class="n">context</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">json_serializer</span><span class="p">)</span>

<span class="k">class</span><span class="w"> </span><span class="nc">SimpleFormatter</span><span class="p">(</span><span class="n">BaseFormatter</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Built-in human-readable formatter.&quot;&quot;&quot;</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">format</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">LogEvent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Format for human consumption.&quot;&quot;&quot;</span>
        <span class="n">timestamp</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">timestamp</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">timestamp</span><span class="si">}</span><span class="s2"> [</span><span class="si">{</span><span class="n">event</span><span class="o">.</span><span class="n">level</span><span class="si">}</span><span class="s2">] </span><span class="si">{</span><span class="n">event</span><span class="o">.</span><span class="n">source</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">event</span><span class="o">.</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span>
</pre></div>
</div>
</section>
<section id="default-configuration">
<h3>Default Configuration<a class="headerlink" href="#default-configuration" title="Link to this heading"></a></h3>
<p><strong>Zero-configuration experience for developers:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Default settings - works immediately after pip install</span>
<span class="n">DEFAULT_SETTINGS</span> <span class="o">=</span> <span class="n">UniversalSettings</span><span class="p">(</span>
    <span class="c1"># Built-in sinks</span>
    <span class="n">sinks</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;stdout&quot;</span><span class="p">],</span>

    <span class="c1"># Built-in processors</span>
    <span class="n">processors</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;filter&quot;</span><span class="p">,</span> <span class="s2">&quot;throttle&quot;</span><span class="p">],</span>

    <span class="c1"># Built-in enrichers</span>
    <span class="n">enrichers</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;timestamp&quot;</span><span class="p">,</span> <span class="s2">&quot;correlation&quot;</span><span class="p">,</span> <span class="s2">&quot;context&quot;</span><span class="p">],</span>

    <span class="c1"># Built-in formatter</span>
    <span class="n">formatter</span><span class="o">=</span><span class="s2">&quot;simple&quot;</span><span class="p">,</span>

    <span class="c1"># Performance defaults</span>
    <span class="n">async_processing</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">batch_size</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
    <span class="n">queue_max_size</span><span class="o">=</span><span class="mi">10000</span><span class="p">,</span>

    <span class="c1"># Developer-friendly defaults</span>
    <span class="n">level</span><span class="o">=</span><span class="s2">&quot;INFO&quot;</span><span class="p">,</span>
    <span class="n">colors</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">enable_internal_logging</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># Silent by default</span>
<span class="p">)</span>

<span class="c1"># Immediate usage - no configuration required</span>
<span class="n">logger</span> <span class="o">=</span> <span class="k">await</span> <span class="n">AsyncLogger</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>  <span class="c1"># Uses defaults</span>
<span class="k">await</span> <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Hello World!&quot;</span><span class="p">)</span>   <span class="c1"># Works immediately</span>
</pre></div>
</div>
</section>
<section id="built-in-vs-plugin-feature-matrix">
<h3>Built-in vs Plugin Feature Matrix<a class="headerlink" href="#built-in-vs-plugin-feature-matrix" title="Link to this heading"></a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Category</p></th>
<th class="head"><p>Built-in Features</p></th>
<th class="head"><p>Plugin Features (Examples)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>Sinks</strong></p></td>
<td><p>stdout, stderr, file, null</p></td>
<td><p>splunk, elasticsearch, datadog, loki, syslog, kafka, webhook</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Processors</strong></p></td>
<td><p>filter, throttle, format, dedupe</p></td>
<td><p>pii-redaction, encryption, compression, sampling, alerting</p></td>
</tr>
<tr class="row-even"><td><p><strong>Enrichers</strong></p></td>
<td><p>timestamp, correlation, context, hostname</p></td>
<td><p>user-context, geo-location, performance-metrics, tracing</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Formatters</strong></p></td>
<td><p>simple, json, logfmt, minimal</p></td>
<td><p>custom-json, xml, protobuf, csv, syslog-rfc5424</p></td>
</tr>
<tr class="row-even"><td><p><strong>Compliance</strong></p></td>
<td><p>Input validation, basic security</p></td>
<td><p>pci-dss, hipaa, sox, gdpr, audit-trails</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Performance</strong></p></td>
<td><p>Async pipeline, batching</p></td>
<td><p>advanced-compression, sharding, caching, metrics</p></td>
</tr>
<tr class="row-even"><td><p><strong>Integrations</strong></p></td>
<td><p>FastAPI middleware, lifecycle, DI</p></td>
<td><p>request-logger, otel-formatter, tracing, custom frameworks</p></td>
</tr>
</tbody>
</table>
</section>
<section id="progressive-enhancement-philosophy">
<h3>Progressive Enhancement Philosophy<a class="headerlink" href="#progressive-enhancement-philosophy" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Level 1: Zero configuration (built-in features)</span>
<span class="n">logger</span> <span class="o">=</span> <span class="k">await</span> <span class="n">AsyncLogger</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>
<span class="k">await</span> <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Works immediately&quot;</span><span class="p">)</span>

<span class="c1"># Level 2: Basic customization (built-in features)</span>
<span class="n">settings</span> <span class="o">=</span> <span class="n">UniversalSettings</span><span class="p">(</span>
    <span class="n">sinks</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;file&quot;</span><span class="p">],</span>
    <span class="n">processors</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;filter&quot;</span><span class="p">,</span> <span class="s2">&quot;throttle&quot;</span><span class="p">],</span>
    <span class="n">formatter</span><span class="o">=</span><span class="s2">&quot;json&quot;</span><span class="p">,</span>
    <span class="n">level</span><span class="o">=</span><span class="s2">&quot;DEBUG&quot;</span>
<span class="p">)</span>
<span class="n">logger</span> <span class="o">=</span> <span class="k">await</span> <span class="n">AsyncLogger</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">settings</span><span class="p">)</span>

<span class="c1"># Level 3: Enterprise features (plugins)</span>
<span class="n">settings</span> <span class="o">=</span> <span class="n">UniversalSettings</span><span class="p">(</span>
    <span class="n">sinks</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;file&quot;</span><span class="p">,</span> <span class="s2">&quot;splunk-sink&quot;</span><span class="p">,</span> <span class="s2">&quot;datadog-sink&quot;</span><span class="p">],</span>
    <span class="n">processors</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;pii-redaction&quot;</span><span class="p">,</span> <span class="s2">&quot;encryption&quot;</span><span class="p">,</span> <span class="s2">&quot;filter&quot;</span><span class="p">],</span>
    <span class="n">enrichers</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;user-context&quot;</span><span class="p">,</span> <span class="s2">&quot;geo-location&quot;</span><span class="p">,</span> <span class="s2">&quot;correlation&quot;</span><span class="p">],</span>
    <span class="n">compliance_standards</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;pci-dss&quot;</span><span class="p">,</span> <span class="s2">&quot;hipaa&quot;</span><span class="p">]</span>
<span class="p">)</span>
<span class="n">logger</span> <span class="o">=</span> <span class="k">await</span> <span class="n">AsyncLogger</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">settings</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="core-library-guarantees">
<h3>Core Library Guarantees<a class="headerlink" href="#core-library-guarantees" title="Link to this heading"></a></h3>
<p><strong>What developers can rely on without any plugins:</strong></p>
<ol class="arabic simple">
<li><p><strong>Immediate Functionality</strong> - <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">fapilog</span></code> → works immediately</p></li>
<li><p><strong>Production Ready</strong> - File output with rotation, rate limiting, filtering</p></li>
<li><p><strong>Development Friendly</strong> - Colored console output, readable formats</p></li>
<li><p><strong>Performance</strong> - Async pipeline, batching, non-blocking I/O</p></li>
<li><p><strong>Reliability</strong> - Error handling, graceful degradation, container isolation</p></li>
<li><p><strong>Observability</strong> - Correlation IDs, context enrichment, structured output</p></li>
</ol>
<p><strong>The built-in features provide a complete logging solution that competes with existing libraries, while the plugin ecosystem enables unlimited extensibility for enterprise use cases.</strong></p>
</section>
</section>
<hr class="docutils" />
<section id="core-workflows">
<h2>Core Workflows<a class="headerlink" href="#core-workflows" title="Link to this heading"></a></h2>
<p>Here are the key system workflows that illustrate the async-first architecture and component interactions:</p>
<section id="high-performance-async-logging-workflow">
<h3>High-Performance Async Logging Workflow<a class="headerlink" href="#high-performance-async-logging-workflow" title="Link to this heading"></a></h3>
<div class="highlight-mermaid notranslate"><div class="highlight"><pre><span></span>sequenceDiagram
    participant App as Application
    participant Logger as AsyncLogger
    participant Container as AsyncLoggingContainer
    participant Pipeline as AsyncPipeline
    participant Enricher as EnricherPlugins
    participant Processor as ProcessorPlugins
    participant Queue as AsyncQueue
    participant Sink as SinkPlugins
    participant Compliance as ComplianceEngine
    participant Metrics as MetricsCollector

    Note over App, Metrics: High-Performance Async Logging Workflow

    App-&gt;&gt;Logger: await logger.info(&quot;message&quot;, **metadata)
    Logger-&gt;&gt;Container: get_pipeline()
    Container-&gt;&gt;Pipeline: process_event(LogEvent)

    par Parallel Enrichment
        Pipeline-&gt;&gt;Enricher: enrich_event(event)
        Enricher--&gt;&gt;Pipeline: enriched_event
    and Metrics Collection
        Pipeline-&gt;&gt;Metrics: record_event_start()
    end

    Pipeline-&gt;&gt;Processor: process_event(enriched_event)

    alt Compliance Validation Required
        Processor-&gt;&gt;Compliance: validate_event(event)
        Compliance--&gt;&gt;Processor: validated_event
    end

    Processor-&gt;&gt;Queue: enqueue(processed_event)

    par Async Background Processing
        Queue-&gt;&gt;Sink: dequeue_batch(events)
        Sink-&gt;&gt;Sink: async write to destinations
    and Performance Monitoring
        Pipeline-&gt;&gt;Metrics: record_event_processed()
    end

    Pipeline--&gt;&gt;Logger: processing_started
    Logger--&gt;&gt;App: None (async complete)
</pre></div>
</div>
</section>
<section id="plugin-discovery-and-loading-workflow">
<h3>Plugin Discovery and Loading Workflow<a class="headerlink" href="#plugin-discovery-and-loading-workflow" title="Link to this heading"></a></h3>
<div class="highlight-mermaid notranslate"><div class="highlight"><pre><span></span>sequenceDiagram
    participant Container as AsyncLoggingContainer
    participant Registry as PluginRegistry
    participant Marketplace as PluginMarketplace
    participant Compliance as ComplianceEngine
    participant Plugin as PluginInstance
    participant Pipeline as AsyncPipeline

    Note over Container, Pipeline: Plugin Discovery and Loading Workflow

    Container-&gt;&gt;Registry: discover_plugins()
    Registry-&gt;&gt;Marketplace: search_plugins(criteria)
    Marketplace--&gt;&gt;Registry: available_plugins[]

    loop For Each Plugin
        Registry-&gt;&gt;Marketplace: get_plugin_metadata(name)
        Marketplace--&gt;&gt;Registry: plugin_metadata

        alt Enterprise Deployment
            Registry-&gt;&gt;Compliance: validate_plugin_compliance(metadata)
            Compliance--&gt;&gt;Registry: compliance_result
        end

        alt Compliance Passed or Not Required
            Registry-&gt;&gt;Registry: load_plugin(metadata)
            Registry-&gt;&gt;Plugin: initialize(config)
            Plugin--&gt;&gt;Registry: plugin_instance
        end
    end

    Registry-&gt;&gt;Pipeline: register_plugins(loaded_plugins)
    Pipeline--&gt;&gt;Container: plugins_ready
</pre></div>
</div>
</section>
<section id="enterprise-compliance-and-audit-workflow">
<h3>Enterprise Compliance and Audit Workflow<a class="headerlink" href="#enterprise-compliance-and-audit-workflow" title="Link to this heading"></a></h3>
<div class="highlight-mermaid notranslate"><div class="highlight"><pre><span></span>sequenceDiagram
    participant Event as LogEvent
    participant Compliance as ComplianceEngine
    participant Audit as AuditLogger
    participant Redaction as RedactionEngine
    participant Validation as ValidationEngine
    participant SIEM as External SIEM

    Note over Event, SIEM: Enterprise Compliance and Audit Workflow

    Event-&gt;&gt;Compliance: validate_event(event)

    alt PII Detection Required
        Compliance-&gt;&gt;Redaction: scan_for_pii(event)
        Redaction--&gt;&gt;Compliance: redacted_event
    end

    Compliance-&gt;&gt;Validation: validate_schema(event, standard)

    alt Schema Validation Failed
        Validation--&gt;&gt;Compliance: validation_error
        Compliance-&gt;&gt;Audit: log_compliance_violation(event, error)
        Audit-&gt;&gt;SIEM: send_compliance_alert(violation)
    else Schema Valid
        Validation--&gt;&gt;Compliance: validation_passed
    end

    alt Audit Trail Required
        Compliance-&gt;&gt;Audit: log_audit_event(event)
        Audit-&gt;&gt;Audit: create_immutable_record(event)
    end

    Compliance--&gt;&gt;Event: compliant_event
</pre></div>
</div>
</section>
<section id="high-throughput-batch-processing-workflow">
<h3>High-Throughput Batch Processing Workflow<a class="headerlink" href="#high-throughput-batch-processing-workflow" title="Link to this heading"></a></h3>
<div class="highlight-mermaid notranslate"><div class="highlight"><pre><span></span>sequenceDiagram
    participant Queue as AsyncQueue
    participant Batch as BatchManager
    participant Sink1 as FileSink
    participant Sink2 as SplunkSink
    participant Sink3 as LokiSink
    participant Monitor as HealthMonitor
    participant Metrics as MetricsCollector

    Note over Queue, Metrics: High-Throughput Batch Processing Workflow

    Queue-&gt;&gt;Batch: dequeue_batch(batch_size)
    Batch-&gt;&gt;Batch: optimize_batch_for_sinks()

    par Parallel Sink Processing
        Batch-&gt;&gt;Sink1: async write_batch(file_events)
        Sink1-&gt;&gt;Sink1: async file operations
        Sink1--&gt;&gt;Batch: write_complete
    and
        Batch-&gt;&gt;Sink2: async send_to_splunk(splunk_events)
        Sink2-&gt;&gt;Sink2: async HTTP batch request
        Sink2--&gt;&gt;Batch: send_complete
    and
        Batch-&gt;&gt;Sink3: async push_to_loki(loki_events)
        Sink3-&gt;&gt;Sink3: async stream processing
        Sink3--&gt;&gt;Batch: push_complete
    end

    alt Sink Failure Detected
        Batch-&gt;&gt;Monitor: handle_sink_failure(sink, error)
        Monitor-&gt;&gt;Queue: retry_events(failed_events)
    end

    Batch-&gt;&gt;Metrics: record_batch_metrics(throughput, latency)
    Metrics-&gt;&gt;Metrics: update_performance_counters()

    Batch--&gt;&gt;Queue: batch_processed
</pre></div>
</div>
</section>
<section id="container-isolation-workflow">
<h3>Container Isolation Workflow<a class="headerlink" href="#container-isolation-workflow" title="Link to this heading"></a></h3>
<div class="highlight-mermaid notranslate"><div class="highlight"><pre><span></span>sequenceDiagram
    participant App as Application
    participant Container1 as Container-A
    participant Container2 as Container-B
    participant Logger1 as Logger-A
    participant Logger2 as Logger-B
    participant Pipeline1 as Pipeline-A
    participant Pipeline2 as Pipeline-B

    Note over App, Pipeline2: Container Isolation Workflow (Zero Global State)

    App-&gt;&gt;Container1: create_logger(settings_dev)
    Container1-&gt;&gt;Logger1: AsyncLogger.create()
    Logger1-&gt;&gt;Pipeline1: initialize_pipeline()

    par Isolated Container Creation
        App-&gt;&gt;Container2: create_logger(settings_prod)
        Container2-&gt;&gt;Logger2: AsyncLogger.create()
        Logger2-&gt;&gt;Pipeline2: initialize_pipeline()
    end

    Note over Container1, Pipeline1: Dev Environment Processing
    App-&gt;&gt;Logger1: log_event(dev_data)
    Logger1-&gt;&gt;Pipeline1: process(dev_event)
    Pipeline1-&gt;&gt;Pipeline1: dev_plugins_processing

    Note over Container2, Pipeline2: Prod Environment Processing (Isolated)
    App-&gt;&gt;Logger2: log_event(prod_data)
    Logger2-&gt;&gt;Pipeline2: process(prod_event)
    Pipeline2-&gt;&gt;Pipeline2: prod_plugins_processing

    Note over Container1, Pipeline2: Perfect Isolation - No Cross-Contamination
    Pipeline1--&gt;&gt;Logger1: dev_complete
    Pipeline2--&gt;&gt;Logger2: prod_complete
</pre></div>
</div>
</section>
</section>
<section id="rest-api-spec">
<h2>REST API Spec<a class="headerlink" href="#rest-api-spec" title="Link to this heading"></a></h2>
<section id="core-library-no-rest-api">
<h3>Core Library: No REST API<a class="headerlink" href="#core-library-no-rest-api" title="Link to this heading"></a></h3>
<p>The core fapilog library is a <strong>Python library only</strong> - no web server, no REST API, no complexity.</p>
</section>
<section id="optional-plugin-marketplace-api">
<h3>Optional Plugin Marketplace API<a class="headerlink" href="#optional-plugin-marketplace-api" title="Link to this heading"></a></h3>
<p>If the community grows large enough, a <strong>simple GitHub Pages site</strong> could provide:</p>
<ul class="simple">
<li><p>Plugin discovery and search</p></li>
<li><p>Installation instructions</p></li>
<li><p>Plugin ratings and reviews</p></li>
<li><p><strong>No database required</strong> - all data sourced from GitHub API and PyPI API</p></li>
</ul>
</section>
</section>
<section id="database-schema">
<h2>Database Schema<a class="headerlink" href="#database-schema" title="Link to this heading"></a></h2>
<section id="core-library-no-database">
<h3>Core Library: No Database<a class="headerlink" href="#core-library-no-database" title="Link to this heading"></a></h3>
<p>The core fapilog library requires <strong>zero database setup</strong>. It works immediately after <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">fapilog</span></code>.</p>
</section>
<section id="enterprise-plugin-databases">
<h3>Enterprise Plugin Databases<a class="headerlink" href="#enterprise-plugin-databases" title="Link to this heading"></a></h3>
<p>Individual plugins may include their own database requirements:</p>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">fapilog-audit-trail</span></code></strong> - May include SQLite/PostgreSQL schemas</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">fapilog-metrics-storage</span></code></strong> - May include time-series database schemas</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">fapilog-compliance-tracker</span></code></strong> - May include compliance violation tracking</p></li>
</ul>
<p><strong>Each plugin manages its own storage needs</strong> - not the core library’s responsibility.</p>
</section>
</section>
<section id="source-tree">
<h2>Source Tree<a class="headerlink" href="#source-tree" title="Link to this heading"></a></h2>
<div class="highlight-plaintext notranslate"><div class="highlight"><pre><span></span>fapilog/
├── src/
│   └── fapilog/
│       ├── __init__.py                 # Public API: AsyncLogger, UniversalSettings
│       ├── py.typed                    # Type information marker
│       │
│       ├── core/                       # Core async-first logging
│       │   ├── __init__.py
│       │   ├── logger.py               # AsyncLogger - main interface
│       │   ├── events.py               # LogEvent, EventCategory, EventSeverity
│       │   ├── settings.py             # UniversalSettings configuration
│       │   └── pipeline.py             # AsyncPipeline for event processing
│       │
│       ├── containers/                 # Perfect isolation (v2 excellence)
│       │   ├── __init__.py
│       │   └── container.py            # AsyncLoggingContainer
│       │
│       ├── plugins/                    # Universal plugin system
│       │   ├── __init__.py
│       │   ├── registry.py             # Plugin discovery via entry points
│       │   ├── base.py                 # Base plugin classes
│       │   ├── sinks/                  # Built-in sinks (stdout, file)
│       │   │   ├── __init__.py
│       │   │   ├── stdout.py           # Console output sink
│       │   │   ├── file.py             # File output sink
│       │   │   └── http.py             # Basic HTTP sink
│       │   ├── processors/             # Built-in processors
│       │   │   ├── __init__.py
│       │   │   └── formatter.py        # Basic log formatting
│       │   └── enrichers/              # Built-in enrichers
│       │       ├── __init__.py
│       │       └── timestamp.py        # Timestamp enrichment
│       │
│       ├── caching/                    # AsyncSmartCache (v2 excellence)
│       │   ├── __init__.py
│       │   └── smart_cache.py          # Race-condition-free caching
│       │
│       ├── metrics/                    # Optional built-in metrics
│       │   ├── __init__.py
│       │   └── collector.py            # Basic performance tracking
│       │
│       ├── fastapi/                    # FastAPI integration layer
│       │   ├── __init__.py
│       │   ├── middleware.py           # FapilogMiddleware for request context
│       │   ├── lifecycle.py            # App startup/shutdown hooks
│       │   ├── exceptions.py           # Exception logging integration
│       │   ├── di.py                   # Dependency injection via Depends
│       │   └── testing.py              # Test fixtures and utilities
│       │
│       └── cli/                        # Command line interface
│           ├── __init__.py
│           └── main.py                 # Basic CLI commands
│
├── plugins/                            # Example community plugins
│   ├── fapilog-splunk/                 # Enterprise Splunk integration
│   │   ├── src/fapilog_splunk/
│   │   ├── pyproject.toml
│   │   └── README.md
│   ├── fapilog-audit-trail/            # Enterprise audit trail
│   │   ├── src/fapilog_audit_trail/
│   │   ├── pyproject.toml
│   │   └── README.md
│   ├── fapilog-prometheus/             # Metrics collection
│   │   ├── src/fapilog_prometheus/
│   │   ├── pyproject.toml
│   │   └── README.md
│   ├── fapilog-request-logger/         # FastAPI request/response logging
│   │   ├── src/fapilog_request_logger/
│   │   ├── pyproject.toml
│   │   └── README.md
│   ├── fapilog-otel-formatter/         # OpenTelemetry formatting
│   │   ├── src/fapilog_otel_formatter/
│   │   ├── pyproject.toml
│   │   └── README.md
│   └── fapilog-compliance-pci/         # PCI-DSS compliance
│       ├── src/fapilog_compliance_pci/
│       ├── pyproject.toml
│       └── README.md
│
├── tests/                              # Comprehensive test suite
│   ├── unit/                           # Core library unit tests
│   │   ├── test_logger.py
│   │   ├── test_events.py
│   │   ├── test_container.py
│   │   └── test_plugins.py
│   ├── integration/                    # Plugin integration tests
│   │   ├── test_sink_plugins.py
│   │   └── test_processor_plugins.py
│   ├── performance/                    # 500K-2M events/second validation
│   │   ├── test_throughput.py
│   │   └── test_latency.py
│   └── plugin_examples/                # Plugin development examples
│       ├── example_sink.py
│       ├── example_processor.py
│       └── example_enricher.py
│
├── docs/                               # Documentation
│   ├── quickstart.md                   # Zero-config getting started
│   ├── plugin-development.md          # Plugin creation guide
│   ├── enterprise-guide.md            # Enterprise deployment
│   ├── performance-tuning.md          # 500K-2M optimization
│   ├── compliance-guide.md            # Compliance plugin usage
│   └── api-reference.md               # Complete API documentation
│
├── examples/                           # Usage examples
│   ├── basic_usage.py                  # Simple logger usage
│   ├── plugin_usage.py                # Using community plugins
│   ├── enterprise_setup.py            # Enterprise configuration
│   └── performance_demo.py            # High-throughput example
│
├── scripts/                            # Development and maintenance
│   ├── benchmark.py                    # Performance benchmarking
│   ├── plugin_validator.py            # Plugin validation utility
│   └── generate_docs.py               # Documentation generation
│
├── pyproject.toml                      # Core library packaging
├── README.md                           # Developer-first documentation
├── LICENSE                             # Apache 2.0 license
├── CONTRIBUTING.md                     # Community contribution guide
├── CHANGELOG.md                        # Version history
└── .github/                            # CI/CD and community
    ├── workflows/
    │   ├── ci.yml                      # Core library CI
    │   ├── plugin-ci.yml               # Plugin validation CI
    │   └── performance.yml             # Throughput validation
    └── ISSUE_TEMPLATE/
        ├── bug_report.md
        ├── feature_request.md
        └── plugin_request.md
</pre></div>
</div>
</section>
<section id="infrastructure-and-deployment">
<h2>Infrastructure and Deployment<a class="headerlink" href="#infrastructure-and-deployment" title="Link to this heading"></a></h2>
<p>Since Fapilog v3 is a <strong>Python library</strong> (not a service), the infrastructure and deployment approach is fundamentally different from traditional applications:</p>
<section id="infrastructure-as-code">
<h3>Infrastructure as Code<a class="headerlink" href="#infrastructure-as-code" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Tool:</strong> GitHub Actions (workflow automation)</p></li>
<li><p><strong>Location:</strong> <code class="docutils literal notranslate"><span class="pre">.github/workflows/</span></code></p></li>
<li><p><strong>Approach:</strong> Library-focused CI/CD with plugin ecosystem validation</p></li>
</ul>
</section>
<section id="deployment-strategy">
<h3>Deployment Strategy<a class="headerlink" href="#deployment-strategy" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Strategy:</strong> Package Distribution via PyPI</p></li>
<li><p><strong>CI/CD Platform:</strong> GitHub Actions</p></li>
<li><p><strong>Pipeline Configuration:</strong> <code class="docutils literal notranslate"><span class="pre">.github/workflows/ci.yml</span></code>, <code class="docutils literal notranslate"><span class="pre">.github/workflows/release.yml</span></code></p></li>
</ul>
</section>
<section id="environments">
<h3>Environments<a class="headerlink" href="#environments" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Development:</strong> Local development with <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-e</span> <span class="pre">.</span></code></p></li>
<li><p><strong>Testing:</strong> GitHub Actions runners with matrix testing (Python 3.8-3.12)</p></li>
<li><p><strong>Staging:</strong> TestPyPI for release candidates</p></li>
<li><p><strong>Production:</strong> PyPI for stable releases</p></li>
</ul>
</section>
<section id="environment-promotion-flow">
<h3>Environment Promotion Flow<a class="headerlink" href="#environment-promotion-flow" title="Link to this heading"></a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Local Development
       ↓
GitHub Actions CI (PR validation)
       ↓
TestPyPI (Release Candidates)
       ↓
PyPI (Stable Releases)
       ↓
User Environments (pip install fapilog)
</pre></div>
</div>
</section>
<section id="rollback-strategy">
<h3>Rollback Strategy<a class="headerlink" href="#rollback-strategy" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Primary Method:</strong> PyPI version pinning and yanking</p></li>
<li><p><strong>Trigger Conditions:</strong> Critical bugs, security vulnerabilities, performance regressions</p></li>
<li><p><strong>Recovery Time Objective:</strong> &lt; 1 hour (immediate PyPI package yank)</p></li>
</ul>
</section>
<section id="framework-lifecycle-integration">
<h3>Framework Lifecycle Integration<a class="headerlink" href="#framework-lifecycle-integration" title="Link to this heading"></a></h3>
<p><strong>FastAPI Application Deployment:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Recommended FastAPI integration pattern</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">fastapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">FastAPI</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">fapilog.fastapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">register_fapilog_lifecycle</span><span class="p">,</span> <span class="n">FapilogMiddleware</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">fapilog</span><span class="w"> </span><span class="kn">import</span> <span class="n">UniversalSettings</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">FastAPI</span><span class="p">()</span>

<span class="c1"># Register lifecycle hooks for clean startup/shutdown</span>
<span class="n">settings</span> <span class="o">=</span> <span class="n">UniversalSettings</span><span class="p">(</span>
    <span class="n">sinks</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;file&quot;</span><span class="p">,</span> <span class="s2">&quot;stdout&quot;</span><span class="p">],</span>
    <span class="n">processors</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;filter&quot;</span><span class="p">,</span> <span class="s2">&quot;throttle&quot;</span><span class="p">],</span>
    <span class="n">level</span><span class="o">=</span><span class="s2">&quot;INFO&quot;</span>
<span class="p">)</span>
<span class="n">register_fapilog_lifecycle</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">settings</span><span class="p">)</span>

<span class="c1"># Add middleware for request-scoped logging</span>
<span class="n">app</span><span class="o">.</span><span class="n">add_middleware</span><span class="p">(</span><span class="n">FapilogMiddleware</span><span class="p">,</span> <span class="n">correlation_header</span><span class="o">=</span><span class="s2">&quot;X-Request-ID&quot;</span><span class="p">)</span>

<span class="c1"># Container deployment (Docker/Kubernetes)</span>
<span class="c1"># No special Fapilog configuration needed - standard Python app deployment</span>
</pre></div>
</div>
<p><strong>Container Deployment Notes:</strong></p>
<ul class="simple">
<li><p><strong>Zero Special Setup</strong>: Fapilog is a library, not a service - no special container configuration</p></li>
<li><p><strong>Configuration via Environment</strong>: Standard environment variable configuration</p></li>
<li><p><strong>Graceful Shutdown</strong>: FastAPI lifecycle hooks ensure proper logger cleanup</p></li>
</ul>
</section>
</section>
<section id="error-handling-strategy">
<h2>Error Handling Strategy<a class="headerlink" href="#error-handling-strategy" title="Link to this heading"></a></h2>
<p>The error handling strategy balances <strong>developer simplicity</strong> (errors don’t crash apps) with <strong>enterprise observability</strong> (full error tracking via plugins).</p>
<section id="general-approach">
<h3>General Approach<a class="headerlink" href="#general-approach" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Error Model:</strong> Async-first exception hierarchy with graceful degradation</p></li>
<li><p><strong>Exception Hierarchy:</strong> Custom exceptions inheriting from <code class="docutils literal notranslate"><span class="pre">FapilogError</span></code> base class</p></li>
<li><p><strong>Error Propagation:</strong> Non-blocking - logging errors never crash user applications</p></li>
</ul>
</section>
<section id="logging-standards">
<h3>Logging Standards<a class="headerlink" href="#logging-standards" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Library:</strong> Python’s built-in <code class="docutils literal notranslate"><span class="pre">logging</span></code> module for internal fapilog logging</p></li>
<li><p><strong>Format:</strong> Structured JSON for enterprise compatibility</p></li>
<li><p><strong>Levels:</strong> DEBUG, INFO, WARNING, ERROR, CRITICAL aligned with user log levels</p></li>
<li><p><strong>Required Context:</strong></p>
<ul>
<li><p>Correlation ID: UUID4 format for tracing async operations</p></li>
<li><p>Service Context: <code class="docutils literal notranslate"><span class="pre">fapilog.core</span></code>, <code class="docutils literal notranslate"><span class="pre">fapilog.plugins.{plugin_name}</span></code></p></li>
<li><p>User Context: Never log user data in internal fapilog errors</p></li>
</ul>
</li>
</ul>
</section>
<section id="error-handling-patterns">
<h3>Error Handling Patterns<a class="headerlink" href="#error-handling-patterns" title="Link to this heading"></a></h3>
<section id="external-api-errors">
<h4>External API Errors<a class="headerlink" href="#external-api-errors" title="Link to this heading"></a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Plugin-specific retry policies for external integrations</span>
<span class="k">class</span><span class="w"> </span><span class="nc">ExternalAPIError</span><span class="p">(</span><span class="n">FapilogError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;External API integration errors.&quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="c1"># Retry configuration for enterprise plugins</span>
<span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">RetryConfig</span><span class="p">:</span>
    <span class="n">max_attempts</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="n">backoff_factor</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">2.0</span>
    <span class="n">max_delay</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">60.0</span>

<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">retry_with_backoff</span><span class="p">(</span><span class="n">operation</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">RetryConfig</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Async retry with exponential backoff.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">attempt</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">max_attempts</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="k">await</span> <span class="n">operation</span><span class="p">()</span>
        <span class="k">except</span> <span class="n">ExternalAPIError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">attempt</span> <span class="o">==</span> <span class="n">config</span><span class="o">.</span><span class="n">max_attempts</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                <span class="c1"># Final attempt failed - log but don&#39;t crash</span>
                <span class="k">await</span> <span class="n">internal_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                    <span class="s2">&quot;External API permanently failed&quot;</span><span class="p">,</span>
                    <span class="n">error</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span>
                    <span class="n">attempts</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">max_attempts</span>
                <span class="p">)</span>
                <span class="k">return</span> <span class="kc">None</span>  <span class="c1"># Graceful degradation</span>

            <span class="n">delay</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">backoff_factor</span> <span class="o">**</span> <span class="n">attempt</span><span class="p">,</span> <span class="n">config</span><span class="o">.</span><span class="n">max_delay</span><span class="p">)</span>
            <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">delay</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Circuit Breaker:</strong> Plugin-level circuit breakers for external services
<strong>Timeout Configuration:</strong> Configurable timeouts per plugin (default 30s)
<strong>Error Translation:</strong> Plugin errors mapped to user-friendly messages</p>
</section>
<section id="business-logic-errors">
<h4>Business Logic Errors<a class="headerlink" href="#business-logic-errors" title="Link to this heading"></a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Core library exceptions that users might handle</span>
<span class="k">class</span><span class="w"> </span><span class="nc">FapilogError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base exception for all fapilog errors.&quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="k">class</span><span class="w"> </span><span class="nc">ConfigurationError</span><span class="p">(</span><span class="n">FapilogError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Invalid configuration provided by user.&quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="k">class</span><span class="w"> </span><span class="nc">PluginError</span><span class="p">(</span><span class="n">FapilogError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Plugin loading or execution error.&quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="k">class</span><span class="w"> </span><span class="nc">PipelineError</span><span class="p">(</span><span class="n">FapilogError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Async pipeline processing error.&quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="c1"># User-facing error handling</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">safe_log_processing</span><span class="p">(</span><span class="n">event</span><span class="p">:</span> <span class="n">LogEvent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Process log event with comprehensive error handling.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">pipeline</span><span class="o">.</span><span class="n">process_event</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">except</span> <span class="n">PluginError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="c1"># Plugin failed - log internally but continue</span>
        <span class="k">await</span> <span class="n">internal_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
            <span class="s2">&quot;Plugin processing failed&quot;</span><span class="p">,</span>
            <span class="n">plugin</span><span class="o">=</span><span class="n">e</span><span class="o">.</span><span class="n">plugin_name</span><span class="p">,</span>
            <span class="n">error</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span>
            <span class="n">correlation_id</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">correlation_id</span>
        <span class="p">)</span>
        <span class="c1"># Try fallback processing without failed plugin</span>
        <span class="k">await</span> <span class="n">pipeline</span><span class="o">.</span><span class="n">process_event_safe_mode</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">except</span> <span class="n">PipelineError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="c1"># Pipeline failed - log internally, use emergency fallback</span>
        <span class="k">await</span> <span class="n">internal_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
            <span class="s2">&quot;Pipeline processing failed&quot;</span><span class="p">,</span>
            <span class="n">error</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span>
            <span class="n">correlation_id</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">correlation_id</span>
        <span class="p">)</span>
        <span class="c1"># Emergency fallback: direct to stdout</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;FAPILOG EMERGENCY: </span><span class="si">{</span><span class="n">event</span><span class="o">.</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="c1"># Unexpected error - never crash user application</span>
        <span class="k">await</span> <span class="n">internal_logger</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span>
            <span class="s2">&quot;Unexpected fapilog error&quot;</span><span class="p">,</span>
            <span class="n">error</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span>
            <span class="n">correlation_id</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">correlation_id</span>
        <span class="p">)</span>
        <span class="c1"># Emergency fallback</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;FAPILOG CRITICAL: </span><span class="si">{</span><span class="n">event</span><span class="o">.</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>
</pre></div>
</div>
<p><strong>Custom Exceptions:</strong> Specific exception types for different failure modes
<strong>User-Facing Errors:</strong> Clear error messages for configuration issues
<strong>Error Codes:</strong> Structured error codes for enterprise monitoring</p>
</section>
<section id="data-consistency">
<h4>Data Consistency<a class="headerlink" href="#data-consistency" title="Link to this heading"></a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Container isolation ensures no cross-contamination on errors</span>
<span class="k">class</span><span class="w"> </span><span class="nc">ContainerIsolationError</span><span class="p">(</span><span class="n">FapilogError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Container isolation violation.&quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="c1"># Transaction-like behavior for batch processing</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">process_event_batch</span><span class="p">(</span><span class="n">events</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">LogEvent</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">BatchResult</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Process events with partial failure handling.&quot;&quot;&quot;</span>
    <span class="n">successful</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">failed</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">events</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">await</span> <span class="n">process_single_event</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
            <span class="n">successful</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">failed</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">event</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span>
            <span class="c1"># Continue processing other events</span>
            <span class="k">await</span> <span class="n">internal_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;Event processing failed in batch&quot;</span><span class="p">,</span>
                <span class="n">event_id</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">correlation_id</span><span class="p">,</span>
                <span class="n">error</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="p">)</span>

    <span class="k">return</span> <span class="n">BatchResult</span><span class="p">(</span>
        <span class="n">successful_count</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">successful</span><span class="p">),</span>
        <span class="n">failed_count</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">failed</span><span class="p">),</span>
        <span class="n">failed_events</span><span class="o">=</span><span class="n">failed</span>
    <span class="p">)</span>

<span class="c1"># Idempotency for retry scenarios</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">idempotent_event_processing</span><span class="p">(</span><span class="n">event</span><span class="p">:</span> <span class="n">LogEvent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Ensure event processing is idempotent.&quot;&quot;&quot;</span>
    <span class="c1"># Check if event already processed (via correlation_id)</span>
    <span class="k">if</span> <span class="k">await</span> <span class="n">was_event_processed</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">correlation_id</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="c1"># Mark event as being processed</span>
    <span class="k">await</span> <span class="n">mark_event_processing</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">correlation_id</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">process_event</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
        <span class="k">await</span> <span class="n">mark_event_completed</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">correlation_id</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">mark_event_failed</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">correlation_id</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
        <span class="k">raise</span>
</pre></div>
</div>
<p><strong>Transaction Strategy:</strong> Batch-level transactions with partial failure handling
<strong>Compensation Logic:</strong> Automatic retry and fallback mechanisms
<strong>Idempotency:</strong> Correlation ID-based deduplication for retry scenarios</p>
</section>
</section>
</section>
<hr class="docutils" />
<section id="developer-friendly-error-experience">
<h2>Developer-Friendly Error Experience<a class="headerlink" href="#developer-friendly-error-experience" title="Link to this heading"></a></h2>
<section id="default-behavior-silent-resilience">
<h3>Default Behavior: Silent Resilience<a class="headerlink" href="#default-behavior-silent-resilience" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># This should never crash user applications</span>
<span class="n">logger</span> <span class="o">=</span> <span class="k">await</span> <span class="n">AsyncLogger</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>
<span class="k">await</span> <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;This works even if plugins fail&quot;</span><span class="p">)</span>  <span class="c1"># Always succeeds</span>
</pre></div>
</div>
</section>
<section id="optional-error-observability">
<h3>Optional Error Observability<a class="headerlink" href="#optional-error-observability" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Developers can opt into error monitoring</span>
<span class="n">settings</span> <span class="o">=</span> <span class="n">UniversalSettings</span><span class="p">(</span>
    <span class="n">enable_internal_logging</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="c1"># See fapilog&#39;s own errors</span>
    <span class="n">internal_log_level</span><span class="o">=</span><span class="s2">&quot;WARNING&quot;</span><span class="p">,</span>  <span class="c1"># Only serious issues</span>
    <span class="n">error_callback</span><span class="o">=</span><span class="n">my_error_handler</span>  <span class="c1"># Custom error handling</span>
<span class="p">)</span>

<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">my_error_handler</span><span class="p">(</span><span class="n">error</span><span class="p">:</span> <span class="n">FapilogError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Custom error handling for application monitoring.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">error</span><span class="p">,</span> <span class="n">PluginError</span><span class="p">):</span>
        <span class="c1"># Handle plugin failures in application</span>
        <span class="k">await</span> <span class="n">send_to_monitoring</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Fapilog plugin failed: </span><span class="si">{</span><span class="n">error</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="enterprise-error-integration">
<h3>Enterprise Error Integration<a class="headerlink" href="#enterprise-error-integration" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Enterprise plugins can provide rich error monitoring</span>
<span class="n">settings</span> <span class="o">=</span> <span class="n">UniversalSettings</span><span class="p">(</span>
    <span class="n">sinks</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;stdout&quot;</span><span class="p">,</span> <span class="s2">&quot;error-tracking-sink&quot;</span><span class="p">],</span>  <span class="c1"># Plugin for error monitoring</span>
    <span class="n">processors</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;error-enrichment&quot;</span><span class="p">],</span>  <span class="c1"># Add context to errors</span>
    <span class="n">error_handling_mode</span><span class="o">=</span><span class="s2">&quot;enterprise&quot;</span>  <span class="c1"># Enhanced error tracking</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="plugin-error-isolation">
<h2>Plugin Error Isolation<a class="headerlink" href="#plugin-error-isolation" title="Link to this heading"></a></h2>
<section id="plugin-failure-containment">
<h3>Plugin Failure Containment<a class="headerlink" href="#plugin-failure-containment" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Plugin failures don&#39;t affect other plugins or core library</span>
<span class="k">class</span><span class="w"> </span><span class="nc">PluginExecutor</span><span class="p">:</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">execute_plugin_safe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plugin</span><span class="p">:</span> <span class="n">Plugin</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">LogEvent</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Execute plugin with complete error isolation.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">wait_for</span><span class="p">(</span>
                <span class="n">plugin</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">event</span><span class="p">),</span>
                <span class="n">timeout</span><span class="o">=</span><span class="n">plugin</span><span class="o">.</span><span class="n">timeout</span> <span class="ow">or</span> <span class="mf">30.0</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">TimeoutError</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">handle_plugin_timeout</span><span class="p">(</span><span class="n">plugin</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">handle_plugin_error</span><span class="p">(</span><span class="n">plugin</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_plugin_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plugin_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">error</span><span class="p">:</span> <span class="ne">Exception</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle plugin errors without affecting other plugins.&quot;&quot;&quot;</span>
        <span class="c1"># Log plugin error internally</span>
        <span class="k">await</span> <span class="n">internal_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
            <span class="s2">&quot;Plugin execution failed&quot;</span><span class="p">,</span>
            <span class="n">plugin</span><span class="o">=</span><span class="n">plugin_name</span><span class="p">,</span>
            <span class="n">error</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">error</span><span class="p">),</span>
            <span class="n">error_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">error</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span>
        <span class="p">)</span>

        <span class="c1"># Optionally disable failing plugin temporarily</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">should_disable_plugin</span><span class="p">(</span><span class="n">plugin_name</span><span class="p">,</span> <span class="n">error</span><span class="p">):</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">temporarily_disable_plugin</span><span class="p">(</span><span class="n">plugin_name</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="graceful-degradation">
<h3>Graceful Degradation<a class="headerlink" href="#graceful-degradation" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Core functionality continues even with plugin failures</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">process_with_fallbacks</span><span class="p">(</span><span class="n">event</span><span class="p">:</span> <span class="n">LogEvent</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Process event with multiple fallback levels.&quot;&quot;&quot;</span>

    <span class="c1"># Try full plugin pipeline</span>
    <span class="k">if</span> <span class="k">await</span> <span class="n">try_full_pipeline</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
        <span class="k">return</span>

    <span class="c1"># Try essential plugins only</span>
    <span class="k">if</span> <span class="k">await</span> <span class="n">try_essential_plugins</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
        <span class="k">return</span>

    <span class="c1"># Try built-in sinks only</span>
    <span class="k">if</span> <span class="k">await</span> <span class="n">try_builtin_sinks</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
        <span class="k">return</span>

    <span class="c1"># Emergency fallback: direct output</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;EMERGENCY LOG: </span><span class="si">{</span><span class="n">event</span><span class="o">.</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="framework-hook-error-handling">
<h3>Framework Hook Error Handling<a class="headerlink" href="#framework-hook-error-handling" title="Link to this heading"></a></h3>
<p><strong>FastAPI Exception Integration:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Optional FastAPI exception handler integration</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">fastapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">Request</span><span class="p">,</span> <span class="n">HTTPException</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">fapilog.fastapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_logger</span>

<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">fapilog_exception_handler</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">exc</span><span class="p">:</span> <span class="ne">Exception</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Optional exception logging for FastAPI applications.&quot;&quot;&quot;</span>
    <span class="n">logger</span> <span class="o">=</span> <span class="k">await</span> <span class="n">get_logger</span><span class="p">()</span>  <span class="c1"># Get request-scoped logger</span>

    <span class="c1"># Log exception with full context</span>
    <span class="k">await</span> <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
        <span class="s2">&quot;Unhandled FastAPI exception&quot;</span><span class="p">,</span>
        <span class="n">exception_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">exc</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
        <span class="n">exception_message</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">exc</span><span class="p">),</span>
        <span class="n">request_method</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="p">,</span>
        <span class="n">request_url</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">url</span><span class="p">),</span>
        <span class="n">request_headers</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">headers</span><span class="p">),</span>
        <span class="c1"># Correlation ID automatically included via request context</span>
    <span class="p">)</span>

    <span class="c1"># Let FastAPI handle the actual HTTP response</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">exc</span><span class="p">,</span> <span class="n">HTTPException</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">exc</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span><span class="n">status_code</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">detail</span><span class="o">=</span><span class="s2">&quot;Internal server error&quot;</span><span class="p">)</span>

<span class="c1"># Register with FastAPI</span>
<span class="n">app</span><span class="o">.</span><span class="n">add_exception_handler</span><span class="p">(</span><span class="ne">Exception</span><span class="p">,</span> <span class="n">fapilog_exception_handler</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Framework Hook Isolation:</strong></p>
<ul class="simple">
<li><p><strong>No Global State</strong>: Exception hooks operate on request-scoped loggers</p></li>
<li><p><strong>Error Isolation</strong>: Framework hook failures never affect core logging</p></li>
<li><p><strong>Optional Integration</strong>: Framework hooks are completely optional and non-intrusive</p></li>
</ul>
</section>
</section>
<section id="coding-standards">
<h2>Coding Standards<a class="headerlink" href="#coding-standards" title="Link to this heading"></a></h2>
<p>These standards are <strong>MANDATORY for AI agents</strong> and critical for maintaining code quality. Focused on project-specific conventions and preventing common async/plugin mistakes.</p>
<section id="core-standards">
<h3>Core Standards<a class="headerlink" href="#core-standards" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Languages &amp; Runtimes:</strong> Python 3.8+ with asyncio for all async operations</p></li>
<li><p><strong>Style &amp; Linting:</strong> ruff (replaces black, isort, flake8) with async-aware rules</p></li>
<li><p><strong>Test Organization:</strong> <code class="docutils literal notranslate"><span class="pre">tests/{unit,integration,performance}/test_*.py</span></code> with pytest-asyncio</p></li>
</ul>
</section>
<section id="naming-conventions">
<h3>Naming Conventions<a class="headerlink" href="#naming-conventions" title="Link to this heading"></a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Element</p></th>
<th class="head"><p>Convention</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Async Functions</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span> <span class="pre">snake_case()</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span> <span class="pre">process_event()</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Plugin Classes</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">PascalCase</span></code> ending in type</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SplunkSink</span></code>, <code class="docutils literal notranslate"><span class="pre">PIIProcessor</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Event Fields</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">snake_case</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">correlation_id</span></code>, <code class="docutils literal notranslate"><span class="pre">event_category</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Settings</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">snake_case</span></code> with descriptive names</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">async_processing</span></code>, <code class="docutils literal notranslate"><span class="pre">queue_max_size</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Constants</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">UPPER_SNAKE_CASE</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DEFAULT_BATCH_SIZE</span></code>, <code class="docutils literal notranslate"><span class="pre">MAX_RETRY_ATTEMPTS</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="critical-rules">
<h3>Critical Rules<a class="headerlink" href="#critical-rules" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Async Everywhere:</strong> All I/O operations must use async/await - never blocking calls in async context</p></li>
<li><p><strong>Plugin Error Isolation:</strong> All plugin operations must be wrapped in try/catch with graceful degradation</p></li>
<li><p><strong>Container Isolation:</strong> Never use global state - all state must be container-scoped</p></li>
<li><p><strong>Zero-Copy Operations:</strong> Pass LogEvent by reference, never copy event data unnecessarily</p></li>
<li><p><strong>Correlation ID Propagation:</strong> All async operations must propagate correlation_id for tracing</p></li>
<li><p><strong>Plugin Entry Points:</strong> All plugins must use standard Python entry points, never dynamic imports</p></li>
<li><p><strong>Configuration Validation:</strong> All settings must use Pydantic v2 validation with clear error messages</p></li>
<li><p><strong>Emergency Fallbacks:</strong> All critical paths must have fallback mechanisms that never crash user apps</p></li>
<li><p><strong>FastAPI Integration Isolation:</strong> FastAPI integrations must not break context isolation or introduce global state</p></li>
</ul>
</section>
<section id="dependency-injection-patterns">
<h3>Dependency Injection Patterns<a class="headerlink" href="#dependency-injection-patterns" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># ✅ CORRECT: Constructor-based dependency injection for plugins</span>
<span class="k">class</span><span class="w"> </span><span class="nc">AsyncLoggingContainer</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">settings</span><span class="p">:</span> <span class="n">UniversalSettings</span><span class="p">,</span>
                 <span class="n">plugin_registry</span><span class="p">:</span> <span class="n">PluginRegistry</span><span class="p">,</span>
                 <span class="n">metrics_collector</span><span class="p">:</span> <span class="n">MetricsCollector</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">settings</span> <span class="o">=</span> <span class="n">settings</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plugin_registry</span> <span class="o">=</span> <span class="n">plugin_registry</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metrics_collector</span> <span class="o">=</span> <span class="n">metrics_collector</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">create_logger</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AsyncLogger</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Inject dependencies into logger.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">AsyncLogger</span><span class="p">(</span>
            <span class="n">container</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
            <span class="n">pipeline</span><span class="o">=</span><span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_pipeline</span><span class="p">()</span>
        <span class="p">)</span>

<span class="c1"># ✅ CORRECT: Plugin dependency injection</span>
<span class="k">class</span><span class="w"> </span><span class="nc">SplunkSink</span><span class="p">(</span><span class="n">BaseSink</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">config</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
                 <span class="n">http_client</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientSession</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
        <span class="c1"># Allow injection for testing, create default for production</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">http_client</span> <span class="o">=</span> <span class="n">http_client</span> <span class="ow">or</span> <span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientSession</span><span class="p">()</span>

<span class="c1"># ❌ WRONG: Hard-coded dependencies</span>
<span class="k">class</span><span class="w"> </span><span class="nc">BadContainer</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">settings</span><span class="p">:</span> <span class="n">UniversalSettings</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">settings</span> <span class="o">=</span> <span class="n">settings</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plugin_registry</span> <span class="o">=</span> <span class="n">PluginRegistry</span><span class="p">()</span>  <span class="c1"># Hard-coded, not testable</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span> <span class="o">=</span> <span class="n">MetricsCollector</span><span class="p">()</span>        <span class="c1"># Can&#39;t inject mocks</span>
</pre></div>
</div>
</section>
</section>
<section id="test-strategy-and-standards">
<h2>Test Strategy and Standards<a class="headerlink" href="#test-strategy-and-standards" title="Link to this heading"></a></h2>
<p>Comprehensive testing approach focused on <strong>async-first validation</strong>, <strong>plugin ecosystem reliability</strong>, and <strong>500K-2M events/second performance verification</strong>.</p>
<section id="testing-philosophy">
<h3>Testing Philosophy<a class="headerlink" href="#testing-philosophy" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Approach:</strong> Test-driven development with async-first patterns throughout</p></li>
<li><p><strong>Coverage Goals:</strong> 90%+ test coverage with emphasis on async code paths and plugin interactions</p></li>
<li><p><strong>Test Pyramid:</strong> Balanced distribution favoring fast unit tests with comprehensive integration testing</p></li>
</ul>
</section>
<section id="test-types-and-organization">
<h3>Test Types and Organization<a class="headerlink" href="#test-types-and-organization" title="Link to this heading"></a></h3>
<section id="unit-tests">
<h4>Unit Tests<a class="headerlink" href="#unit-tests" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><strong>Framework:</strong> pytest 7.4+ with pytest-asyncio 0.21+ for async support</p></li>
<li><p><strong>File Convention:</strong> <code class="docutils literal notranslate"><span class="pre">tests/unit/test_{module_name}.py</span></code></p></li>
<li><p><strong>Location:</strong> <code class="docutils literal notranslate"><span class="pre">tests/unit/</span></code> mirroring <code class="docutils literal notranslate"><span class="pre">src/fapilog/</span></code> structure</p></li>
<li><p><strong>Mocking Library:</strong> unittest.mock with async mock support</p></li>
<li><p><strong>Coverage Requirement:</strong> 95% for core library, 85% for plugins</p></li>
</ul>
<p><strong>AI Agent Requirements:</strong></p>
<ul class="simple">
<li><p>Generate tests for all public async methods</p></li>
<li><p>Cover edge cases and error conditions with async patterns</p></li>
<li><p>Follow AAA pattern (Arrange, Act, Assert) with async context</p></li>
<li><p>Mock all external dependencies and I/O operations</p></li>
<li><p>Test container isolation with multiple concurrent containers</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Unit test example for async logger</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pytest</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">asyncio</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">unittest.mock</span><span class="w"> </span><span class="kn">import</span> <span class="n">AsyncMock</span><span class="p">,</span> <span class="n">patch</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">asyncio</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_async_logger_info</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test async logger info method.&quot;&quot;&quot;</span>
    <span class="c1"># Arrange</span>
    <span class="n">settings</span> <span class="o">=</span> <span class="n">UniversalSettings</span><span class="p">(</span><span class="n">async_processing</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">container</span> <span class="o">=</span> <span class="k">await</span> <span class="n">AsyncLoggingContainer</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">settings</span><span class="p">)</span>
    <span class="n">logger</span> <span class="o">=</span> <span class="k">await</span> <span class="n">container</span><span class="o">.</span><span class="n">get_logger</span><span class="p">()</span>

    <span class="c1"># Act</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;test message&quot;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="s2">&quot;test&quot;</span><span class="p">)</span>

    <span class="c1"># Assert</span>
    <span class="k">assert</span> <span class="n">result</span> <span class="ow">is</span> <span class="kc">True</span>
    <span class="k">assert</span> <span class="n">logger</span><span class="o">.</span><span class="n">_last_event</span><span class="o">.</span><span class="n">message</span> <span class="o">==</span> <span class="s2">&quot;test message&quot;</span>
    <span class="k">assert</span> <span class="n">logger</span><span class="o">.</span><span class="n">_last_event</span><span class="o">.</span><span class="n">source</span> <span class="o">==</span> <span class="s2">&quot;test&quot;</span>

    <span class="c1"># Cleanup</span>
    <span class="k">await</span> <span class="n">container</span><span class="o">.</span><span class="n">shutdown</span><span class="p">()</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">asyncio</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_plugin_error_isolation</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test that plugin errors don&#39;t crash logger.&quot;&quot;&quot;</span>
    <span class="c1"># Arrange</span>
    <span class="n">failing_plugin</span> <span class="o">=</span> <span class="n">AsyncMock</span><span class="p">(</span><span class="n">side_effect</span><span class="o">=</span><span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Plugin failed&quot;</span><span class="p">))</span>
    <span class="n">settings</span> <span class="o">=</span> <span class="n">UniversalSettings</span><span class="p">(</span><span class="n">sinks</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;failing-sink&quot;</span><span class="p">])</span>

    <span class="k">with</span> <span class="n">patch</span><span class="p">(</span><span class="s1">&#39;fapilog.plugins.registry.load_plugin&#39;</span><span class="p">,</span> <span class="n">return_value</span><span class="o">=</span><span class="n">failing_plugin</span><span class="p">):</span>
        <span class="n">container</span> <span class="o">=</span> <span class="k">await</span> <span class="n">AsyncLoggingContainer</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">settings</span><span class="p">)</span>
        <span class="n">logger</span> <span class="o">=</span> <span class="k">await</span> <span class="n">container</span><span class="o">.</span><span class="n">get_logger</span><span class="p">()</span>

    <span class="c1"># Act - should not raise despite plugin failure</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;test with failing plugin&quot;</span><span class="p">)</span>

    <span class="c1"># Assert</span>
    <span class="k">assert</span> <span class="n">result</span> <span class="ow">is</span> <span class="kc">True</span>  <span class="c1"># Graceful degradation</span>

    <span class="k">await</span> <span class="n">container</span><span class="o">.</span><span class="n">shutdown</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="integration-tests">
<h4>Integration Tests<a class="headerlink" href="#integration-tests" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><strong>Scope:</strong> Cross-component interactions, plugin loading, async pipeline flows</p></li>
<li><p><strong>Location:</strong> <code class="docutils literal notranslate"><span class="pre">tests/integration/</span></code></p></li>
<li><p><strong>Test Infrastructure:</strong></p>
<ul>
<li><p><strong>Async Queue Testing:</strong> Real asyncio.Queue instances with controlled scenarios</p></li>
<li><p><strong>Plugin Loading:</strong> Actual entry point discovery and loading</p></li>
<li><p><strong>Container Isolation:</strong> Multiple containers with different configurations</p></li>
</ul>
</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Integration test example</span>
<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">asyncio</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_full_pipeline_integration</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test complete async pipeline from logger to sink.&quot;&quot;&quot;</span>
    <span class="c1"># Arrange</span>
    <span class="n">events_received</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">TestSink</span><span class="p">(</span><span class="n">BaseSink</span><span class="p">):</span>
        <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">send</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">LogEvent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
            <span class="n">events_received</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>

    <span class="c1"># Register test sink</span>
    <span class="k">with</span> <span class="n">patch</span><span class="p">(</span><span class="s1">&#39;fapilog.plugins.registry.discover_sinks&#39;</span><span class="p">,</span>
               <span class="n">return_value</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;test-sink&#39;</span><span class="p">:</span> <span class="n">TestSink</span><span class="p">}):</span>
        <span class="n">settings</span> <span class="o">=</span> <span class="n">UniversalSettings</span><span class="p">(</span>
            <span class="n">sinks</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;test-sink&quot;</span><span class="p">],</span>
            <span class="n">async_processing</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">batch_size</span><span class="o">=</span><span class="mi">10</span>
        <span class="p">)</span>
        <span class="n">container</span> <span class="o">=</span> <span class="k">await</span> <span class="n">AsyncLoggingContainer</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">settings</span><span class="p">)</span>
        <span class="n">logger</span> <span class="o">=</span> <span class="k">await</span> <span class="n">container</span><span class="o">.</span><span class="n">get_logger</span><span class="p">()</span>

        <span class="c1"># Act</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">25</span><span class="p">):</span>  <span class="c1"># Test batching</span>
            <span class="k">await</span> <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Message </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Wait for async processing</span>
        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>

        <span class="c1"># Assert</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">events_received</span><span class="p">)</span> <span class="o">==</span> <span class="mi">25</span>
        <span class="k">assert</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">LogEvent</span><span class="p">)</span> <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">events_received</span><span class="p">)</span>

        <span class="k">await</span> <span class="n">container</span><span class="o">.</span><span class="n">shutdown</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="performance-tests">
<h4>Performance Tests<a class="headerlink" href="#performance-tests" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><strong>Framework:</strong> pytest-benchmark 4.0+ for performance regression testing</p></li>
<li><p><strong>Scope:</strong> 500K-2M events/second validation, latency measurement, memory usage</p></li>
<li><p><strong>Environment:</strong> Dedicated performance test environment</p></li>
<li><p><strong>Test Data:</strong> Realistic log event payloads with varying sizes</p></li>
</ul>
</section>
</section>
<section id="test-data-management">
<h3>Test Data Management<a class="headerlink" href="#test-data-management" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Strategy:</strong> Factory pattern for creating realistic test data</p></li>
<li><p><strong>Fixtures:</strong> Shared async fixtures for containers, loggers, and plugins</p></li>
<li><p><strong>Factories:</strong> Event factories with varying complexity and size</p></li>
<li><p><strong>Cleanup:</strong> Automatic async resource cleanup in teardown</p></li>
</ul>
</section>
<section id="continuous-testing">
<h3>Continuous Testing<a class="headerlink" href="#continuous-testing" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>CI Integration:</strong> All tests run on every PR with matrix testing</p></li>
<li><p><strong>Performance Monitoring:</strong> Benchmark results tracked over time</p></li>
<li><p><strong>Plugin Validation:</strong> Community plugins tested against new releases</p></li>
<li><p><strong>Coverage Reporting:</strong> Automatic coverage reports with trend analysis</p></li>
</ul>
</section>
<section id="fastapi-test-utilities">
<h3>FastAPI Test Utilities<a class="headerlink" href="#fastapi-test-utilities" title="Link to this heading"></a></h3>
<p><strong>Test Fixtures for FastAPI Integration:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># FastAPI test fixtures in fapilog.fastapi.testing</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pytest</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">fastapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">FastAPI</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">fastapi.testclient</span><span class="w"> </span><span class="kn">import</span> <span class="n">TestClient</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">fapilog.fastapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">register_fapilog_lifecycle</span><span class="p">,</span> <span class="n">FapilogMiddleware</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">fapilog</span><span class="w"> </span><span class="kn">import</span> <span class="n">UniversalSettings</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">fapilog_test_app</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create FastAPI app with Fapilog for testing.&quot;&quot;&quot;</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">FastAPI</span><span class="p">()</span>
    <span class="n">settings</span> <span class="o">=</span> <span class="n">UniversalSettings</span><span class="p">(</span>
        <span class="n">sinks</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;memory&quot;</span><span class="p">],</span>  <span class="c1"># Memory sink for test assertions</span>
        <span class="n">processors</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;filter&quot;</span><span class="p">,</span> <span class="s2">&quot;throttle&quot;</span><span class="p">],</span>
        <span class="n">level</span><span class="o">=</span><span class="s2">&quot;DEBUG&quot;</span>
    <span class="p">)</span>
    <span class="n">register_fapilog_lifecycle</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">settings</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">add_middleware</span><span class="p">(</span><span class="n">FapilogMiddleware</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">app</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span><span class="w"> </span><span class="nf">fapilog_memory_sink</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Capture log events for assertions.&quot;&quot;&quot;</span>
    <span class="n">events</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">MemorySink</span><span class="p">:</span>
        <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">send</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
            <span class="n">events</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>

    <span class="k">return</span> <span class="n">MemorySink</span><span class="p">(),</span> <span class="n">events</span>

<span class="c1"># Test example for FastAPI integration</span>
<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">asyncio</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_fastapi_request_logging</span><span class="p">(</span><span class="n">fapilog_test_app</span><span class="p">,</span> <span class="n">fapilog_memory_sink</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test that FastAPI requests are logged correctly.&quot;&quot;&quot;</span>
    <span class="n">sink</span><span class="p">,</span> <span class="n">events</span> <span class="o">=</span> <span class="n">fapilog_memory_sink</span>

    <span class="c1"># Register test endpoint</span>
    <span class="nd">@fapilog_test_app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/test&quot;</span><span class="p">)</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_endpoint</span><span class="p">(</span><span class="n">logger</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">get_logger</span><span class="p">)):</span>
        <span class="k">await</span> <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Test endpoint called&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">}</span>

    <span class="c1"># Make request</span>
    <span class="k">with</span> <span class="n">TestClient</span><span class="p">(</span><span class="n">fapilog_test_app</span><span class="p">)</span> <span class="k">as</span> <span class="n">client</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/test&quot;</span><span class="p">)</span>

    <span class="c1"># Assert logging behavior</span>
    <span class="k">assert</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">events</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">1</span>
    <span class="k">assert</span> <span class="nb">any</span><span class="p">(</span><span class="s2">&quot;Test endpoint called&quot;</span> <span class="ow">in</span> <span class="n">event</span><span class="o">.</span><span class="n">message</span> <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">events</span><span class="p">)</span>
    <span class="c1"># Verify correlation ID propagation</span>
    <span class="n">correlation_ids</span> <span class="o">=</span> <span class="p">[</span><span class="n">event</span><span class="o">.</span><span class="n">correlation_id</span> <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">events</span> <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">correlation_id</span><span class="p">]</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">correlation_ids</span><span class="p">))</span> <span class="o">==</span> <span class="mi">1</span>  <span class="c1"># All events share same correlation ID</span>
</pre></div>
</div>
<p><strong>Test Utilities Features:</strong></p>
<ul class="simple">
<li><p><strong>Memory Sink</strong>: Capture log events for assertions without side effects</p></li>
<li><p><strong>Mock Fixtures</strong>: Pre-configured FastAPI apps with Fapilog integration</p></li>
<li><p><strong>Assertion Helpers</strong>: Utilities for verifying logging behavior in FastAPI tests</p></li>
<li><p><strong>Correlation Verification</strong>: Test correlation ID propagation across async operations</p></li>
<li><p><strong>Performance Testing</strong>: Utilities for measuring logging overhead in FastAPI applications</p></li>
</ul>
</section>
</section>
<section id="security">
<h2>Security<a class="headerlink" href="#security" title="Link to this heading"></a></h2>
<p>Security implementation focused on <strong>core library safety</strong>, <strong>plugin ecosystem security</strong>, and <strong>enterprise compliance</strong> while maintaining developer simplicity.</p>
<section id="input-validation">
<h3>Input Validation<a class="headerlink" href="#input-validation" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Validation Library:</strong> Pydantic v2 for all configuration and event validation</p></li>
<li><p><strong>Validation Location:</strong> At API boundaries before any processing begins</p></li>
<li><p><strong>Required Rules:</strong></p>
<ul>
<li><p>All external inputs MUST be validated before entering the async pipeline</p></li>
<li><p>Validation at configuration loading and event creation points</p></li>
<li><p>Whitelist approach for allowed values and patterns</p></li>
<li><p>Async validation patterns for performance-critical paths</p></li>
</ul>
</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Core input validation patterns</span>
<span class="k">class</span><span class="w"> </span><span class="nc">LogEvent</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;LogEvent with comprehensive validation.&quot;&quot;&quot;</span>

    <span class="n">message</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">min_length</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">10000</span><span class="p">)</span>
    <span class="n">level</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;^(DEBUG|INFO|WARNING|ERROR|CRITICAL)$&#39;</span><span class="p">)</span>
    <span class="n">timestamp</span><span class="p">:</span> <span class="n">datetime</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">)</span>
    <span class="n">source</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span>
    <span class="n">correlation_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid4</span><span class="p">()))</span>

    <span class="c1"># Security: Prevent code injection in log messages</span>
    <span class="nd">@field_validator</span><span class="p">(</span><span class="s1">&#39;message&#39;</span><span class="p">)</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">validate_message_security</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate message for security concerns.&quot;&quot;&quot;</span>
        <span class="c1"># Remove potential script injections</span>
        <span class="n">dangerous_patterns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;&lt;script&#39;</span><span class="p">,</span> <span class="s1">&#39;javascript:&#39;</span><span class="p">,</span> <span class="s1">&#39;data:text/html&#39;</span><span class="p">]</span>
        <span class="n">message_lower</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">pattern</span> <span class="ow">in</span> <span class="n">dangerous_patterns</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">pattern</span> <span class="ow">in</span> <span class="n">message_lower</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Potentially dangerous content detected: </span><span class="si">{</span><span class="n">pattern</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">v</span>

<span class="k">class</span><span class="w"> </span><span class="nc">UniversalSettings</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Settings with security validation.&quot;&quot;&quot;</span>

    <span class="n">sinks</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;stdout&quot;</span><span class="p">],</span> <span class="n">min_items</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">async_processing</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">batch_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">ge</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">le</span><span class="o">=</span><span class="mi">10000</span><span class="p">)</span>  <span class="c1"># Prevent memory attacks</span>
    <span class="n">queue_max_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">10000</span><span class="p">,</span> <span class="n">ge</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">le</span><span class="o">=</span><span class="mi">1000000</span><span class="p">)</span>  <span class="c1"># DoS protection</span>

    <span class="nd">@field_validator</span><span class="p">(</span><span class="s1">&#39;sinks&#39;</span><span class="p">)</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">validate_sink_names</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate sink names against injection attacks.&quot;&quot;&quot;</span>
        <span class="n">safe_pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^[a-zA-Z0-9_-]+$&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">sink</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">safe_pattern</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">sink</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid sink name: </span><span class="si">{</span><span class="n">sink</span><span class="si">}</span><span class="s2">. Use alphanumeric, underscore, hyphen only.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">v</span>
</pre></div>
</div>
</section>
<section id="authentication-authorization">
<h3>Authentication &amp; Authorization<a class="headerlink" href="#authentication-authorization" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Auth Method:</strong> Plugin-based authentication for enterprise features</p></li>
<li><p><strong>Session Management:</strong> Stateless design - no session management in core library</p></li>
<li><p><strong>Required Patterns:</strong></p>
<ul>
<li><p>Core library has no authentication (it’s a library, not a service)</p></li>
<li><p>Enterprise plugins implement their own auth as needed</p></li>
<li><p>Plugin marketplace uses PyPI’s existing authentication</p></li>
<li><p>No user management in core library</p></li>
</ul>
</li>
</ul>
</section>
<section id="secrets-management">
<h3>Secrets Management<a class="headerlink" href="#secrets-management" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Development:</strong> Environment variables with <code class="docutils literal notranslate"><span class="pre">.env</span></code> files (not committed)</p></li>
<li><p><strong>Production:</strong> Plugin-specific secret management (enterprise choice)</p></li>
<li><p><strong>Code Requirements:</strong></p>
<ul>
<li><p>NEVER hardcode secrets in core library or plugins</p></li>
<li><p>Access secrets via configuration validation only</p></li>
<li><p>No secrets in logs or error messages</p></li>
<li><p>Plugin developers responsible for their own secret management</p></li>
</ul>
</li>
</ul>
</section>
<section id="plugin-security">
<h3>Plugin Security<a class="headerlink" href="#plugin-security" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Plugin Isolation:</strong> Each plugin runs in isolated async context</p></li>
<li><p><strong>Code Execution:</strong> Plugins use standard Python entry points (no eval/exec)</p></li>
<li><p><strong>Resource Limits:</strong> Timeouts and memory limits per plugin</p></li>
<li><p><strong>Security Scanning:</strong> Plugin validation framework for community plugins</p></li>
</ul>
</section>
<section id="data-protection">
<h3>Data Protection<a class="headerlink" href="#data-protection" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Encryption at Rest:</strong> Plugin responsibility - core library doesn’t store data</p></li>
<li><p><strong>Encryption in Transit:</strong> HTTPS enforcement for network plugins</p></li>
<li><p><strong>PII Handling:</strong> Optional PII detection and redaction via plugins</p></li>
<li><p><strong>Logging Restrictions:</strong> No sensitive data in internal fapilog logs</p></li>
</ul>
</section>
<section id="dependency-security">
<h3>Dependency Security<a class="headerlink" href="#dependency-security" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Scanning Tool:</strong> bandit for security vulnerability detection</p></li>
<li><p><strong>Update Policy:</strong> Monthly security dependency reviews</p></li>
<li><p><strong>Approval Process:</strong> All new dependencies require security review</p></li>
</ul>
</section>
<section id="security-testing">
<h3>Security Testing<a class="headerlink" href="#security-testing" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>SAST Tool:</strong> bandit for static analysis security testing</p></li>
<li><p><strong>DAST Tool:</strong> Plugin-specific dynamic testing for network operations</p></li>
<li><p><strong>Penetration Testing:</strong> Annual third-party security assessment for enterprise features</p></li>
</ul>
</section>
</section>
<section id="checklist-results-report">
<h2>Checklist Results Report<a class="headerlink" href="#checklist-results-report" title="Link to this heading"></a></h2>
<p><strong>Architecture Document Status:</strong> ✅ <strong>Complete and Ready for Validation</strong></p>
<p><strong>Document Summary:</strong></p>
<ul class="simple">
<li><p><strong>Total Sections:</strong> 16 comprehensive sections</p></li>
<li><p><strong>Architecture Focus:</strong> Developer-first simplicity with enterprise extensibility</p></li>
<li><p><strong>Core Approach:</strong> Async-first Python library with plugin ecosystem</p></li>
<li><p><strong>Key Revisions:</strong> Simplified from complex enterprise infrastructure to library-focused design</p></li>
<li><p><strong>Performance Target:</strong> 500K-2M events/second with zero-copy operations</p></li>
<li><p><strong>Plugin Strategy:</strong> PyPI + GitHub based community ecosystem</p></li>
</ul>
</section>
<section id="next-steps">
<h2>Next Steps<a class="headerlink" href="#next-steps" title="Link to this heading"></a></h2>
<p>After completing the Fapilog v3 architecture:</p>
<section id="immediate-development-priorities">
<h3>Immediate Development Priorities<a class="headerlink" href="#immediate-development-priorities" title="Link to this heading"></a></h3>
<ol class="arabic simple">
<li><p><strong>Core Library Foundation</strong></p>
<ul class="simple">
<li><p>Implement AsyncLogger with async-first patterns</p></li>
<li><p>Build AsyncLoggingContainer with perfect isolation</p></li>
<li><p>Create universal plugin system with entry points</p></li>
<li><p>Establish async pipeline with parallel processing</p></li>
</ul>
</li>
<li><p><strong>Plugin Ecosystem Bootstrap</strong></p>
<ul class="simple">
<li><p>Develop core sink plugins (stdout, file, http)</p></li>
<li><p>Create plugin development documentation and templates</p></li>
<li><p>Establish community contribution guidelines</p></li>
<li><p>Build plugin validation and testing framework</p></li>
</ul>
</li>
<li><p><strong>Performance Validation</strong></p>
<ul class="simple">
<li><p>Implement performance benchmarking suite</p></li>
<li><p>Validate 500K-2M events/second targets</p></li>
<li><p>Optimize zero-copy operations and async patterns</p></li>
<li><p>Create continuous performance monitoring</p></li>
</ul>
</li>
</ol>
</section>
<section id="development-team-handoff">
<h3>Development Team Handoff<a class="headerlink" href="#development-team-handoff" title="Link to this heading"></a></h3>
<p><strong>For AI Development Agents:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">You</span> <span class="n">are</span> <span class="n">now</span> <span class="n">implementing</span> <span class="n">Fapilog</span> <span class="n">v3</span> <span class="n">based</span> <span class="n">on</span> <span class="n">this</span> <span class="n">comprehensive</span> <span class="n">architecture</span> <span class="n">document</span><span class="o">.</span>

<span class="n">Key</span> <span class="n">Implementation</span> <span class="n">Priorities</span><span class="p">:</span>
<span class="mf">1.</span> <span class="n">Follow</span> <span class="n">the</span> <span class="k">async</span><span class="o">-</span><span class="n">first</span> <span class="n">patterns</span> <span class="n">exactly</span> <span class="k">as</span> <span class="n">specified</span>
<span class="mf">2.</span> <span class="n">Implement</span> <span class="n">plugin</span> <span class="n">isolation</span> <span class="k">with</span> <span class="n">graceful</span> <span class="n">error</span> <span class="n">handling</span>
<span class="mf">3.</span> <span class="n">Maintain</span> <span class="n">zero</span><span class="o">-</span><span class="n">copy</span> <span class="n">operations</span> <span class="n">throughout</span> <span class="n">the</span> <span class="n">pipeline</span>
<span class="mf">4.</span> <span class="n">Ensure</span> <span class="n">container</span> <span class="n">isolation</span> <span class="n">prevents</span> <span class="n">cross</span><span class="o">-</span><span class="n">contamination</span>
<span class="mf">5.</span> <span class="n">Build</span> <span class="n">developer</span><span class="o">-</span><span class="n">first</span> <span class="n">simplicity</span> <span class="k">with</span> <span class="n">enterprise</span> <span class="n">plugin</span> <span class="n">extensibility</span>

<span class="n">Architecture</span> <span class="n">Document</span><span class="p">:</span> <span class="n">docs</span><span class="o">/</span><span class="n">architecture</span><span class="o">.</span><span class="n">md</span>
<span class="n">Coding</span> <span class="n">Standards</span><span class="p">:</span> <span class="n">Section</span> <span class="mi">13</span> <span class="n">contains</span> <span class="n">mandatory</span> <span class="n">patterns</span> <span class="k">for</span> <span class="n">AI</span> <span class="n">agents</span>
<span class="n">Performance</span> <span class="n">Targets</span><span class="p">:</span> <span class="mi">500</span><span class="n">K</span><span class="o">-</span><span class="mi">2</span><span class="n">M</span> <span class="n">events</span><span class="o">/</span><span class="n">second</span> <span class="k">with</span> <span class="o">&lt;</span><span class="mi">1</span><span class="n">ms</span> <span class="n">latency</span>
<span class="n">Plugin</span> <span class="n">Strategy</span><span class="p">:</span> <span class="n">Standard</span> <span class="n">Python</span> <span class="n">entry</span> <span class="n">points</span> <span class="k">with</span> <span class="n">PyPI</span> <span class="n">distribution</span>

<span class="n">Start</span> <span class="k">with</span> <span class="n">AsyncLogger</span> <span class="ow">and</span> <span class="n">AsyncLoggingContainer</span> <span class="k">as</span> <span class="n">the</span> <span class="n">foundation</span><span class="p">,</span> <span class="n">then</span> <span class="n">build</span> <span class="n">the</span> <span class="n">plugin</span> <span class="n">system</span><span class="o">.</span>
</pre></div>
</div>
<p><strong>For Human Developers:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Fapilog</span> <span class="n">v3</span> <span class="n">Architecture</span> <span class="n">Implementation</span> <span class="n">Guide</span>

<span class="n">This</span> <span class="n">architecture</span> <span class="n">balances</span> <span class="n">developer</span> <span class="n">simplicity</span> <span class="p">(</span><span class="s2">&quot;works out of box&quot;</span><span class="p">)</span> <span class="k">with</span> <span class="n">enterprise</span> <span class="n">extensibility</span> <span class="p">(</span><span class="n">plugin</span> <span class="n">ecosystem</span><span class="p">)</span><span class="o">.</span>

<span class="n">Core</span> <span class="n">Principles</span><span class="p">:</span>
<span class="o">-</span> <span class="n">Async</span><span class="o">-</span><span class="n">first</span> <span class="n">throughout</span> <span class="o">-</span> <span class="n">never</span> <span class="n">mix</span> <span class="n">sync</span><span class="o">/</span><span class="k">async</span> <span class="n">patterns</span>
<span class="o">-</span> <span class="n">Plugin</span><span class="o">-</span><span class="n">based</span> <span class="n">everything</span> <span class="o">-</span> <span class="n">enterprise</span> <span class="n">features</span> <span class="n">are</span> <span class="n">optional</span> <span class="n">plugins</span>
<span class="o">-</span> <span class="n">Container</span> <span class="n">isolation</span> <span class="o">-</span> <span class="n">perfect</span> <span class="n">isolation</span> <span class="k">with</span> <span class="n">zero</span> <span class="k">global</span> <span class="n">state</span>
<span class="o">-</span> <span class="n">Developer</span> <span class="n">experience</span> <span class="o">-</span> <span class="n">zero</span> <span class="n">configuration</span> <span class="n">required</span> <span class="k">for</span> <span class="n">basic</span> <span class="n">usage</span>
<span class="o">-</span> <span class="n">Enterprise</span> <span class="n">ready</span> <span class="o">-</span> <span class="n">full</span> <span class="n">compliance</span> <span class="ow">and</span> <span class="n">observability</span> <span class="n">via</span> <span class="n">plugins</span>

<span class="n">Implementation</span> <span class="n">Sequence</span><span class="p">:</span>
<span class="mf">1.</span> <span class="n">Core</span> <span class="n">library</span> <span class="p">(</span><span class="n">AsyncLogger</span><span class="p">,</span> <span class="n">Container</span><span class="p">,</span> <span class="n">Pipeline</span><span class="p">)</span>
<span class="mf">2.</span> <span class="n">Plugin</span> <span class="n">system</span> <span class="p">(</span><span class="n">Registry</span><span class="p">,</span> <span class="n">Base</span> <span class="n">classes</span><span class="p">,</span> <span class="n">Built</span><span class="o">-</span><span class="n">ins</span><span class="p">)</span>
<span class="mf">3.</span> <span class="n">Community</span> <span class="n">plugins</span> <span class="p">(</span><span class="n">Splunk</span><span class="p">,</span> <span class="n">Prometheus</span><span class="p">,</span> <span class="n">Audit</span> <span class="n">trail</span><span class="p">)</span>
<span class="mf">4.</span> <span class="n">Performance</span> <span class="n">optimization</span> <span class="p">(</span><span class="mi">500</span><span class="n">K</span><span class="o">-</span><span class="mi">2</span><span class="n">M</span> <span class="n">events</span><span class="o">/</span><span class="n">second</span><span class="p">)</span>
<span class="mf">5.</span> <span class="n">Enterprise</span> <span class="n">features</span> <span class="p">(</span><span class="n">Compliance</span><span class="p">,</span> <span class="n">Security</span><span class="p">,</span> <span class="n">Monitoring</span><span class="p">)</span>

<span class="n">Reference</span><span class="p">:</span> <span class="n">docs</span><span class="o">/</span><span class="n">architecture</span><span class="o">.</span><span class="n">md</span> <span class="k">for</span> <span class="n">complete</span> <span class="n">implementation</span> <span class="n">guidance</span>
</pre></div>
</div>
</section>
<section id="community-ecosystem-development">
<h3>Community Ecosystem Development<a class="headerlink" href="#community-ecosystem-development" title="Link to this heading"></a></h3>
<ol class="arabic simple">
<li><p><strong>Plugin Marketplace Strategy</strong></p>
<ul class="simple">
<li><p>Create awesome-fapilog repository for plugin discovery</p></li>
<li><p>Establish plugin development standards and templates</p></li>
<li><p>Build community recognition and contribution programs</p></li>
<li><p>Develop plugin security validation framework</p></li>
</ul>
</li>
<li><p><strong>Documentation and Education</strong></p>
<ul class="simple">
<li><p>Create developer-focused quick start guides</p></li>
<li><p>Build comprehensive plugin development tutorials</p></li>
<li><p>Establish enterprise deployment and compliance guides</p></li>
<li><p>Create performance optimization documentation</p></li>
</ul>
</li>
<li><p><strong>Community Growth</strong></p>
<ul class="simple">
<li><p>Engage Python logging community with async-first benefits</p></li>
<li><p>Target enterprise users with compliance and performance features</p></li>
<li><p>Build contributor community around plugin development</p></li>
<li><p>Establish feedback loops for continuous improvement</p></li>
</ul>
</li>
</ol>
</section>
<section id="enterprise-adoption-strategy">
<h3>Enterprise Adoption Strategy<a class="headerlink" href="#enterprise-adoption-strategy" title="Link to this heading"></a></h3>
<ol class="arabic simple">
<li><p><strong>Compliance and Security</strong></p>
<ul class="simple">
<li><p>Develop enterprise compliance plugin suite (PCI-DSS, HIPAA, SOX)</p></li>
<li><p>Create security validation and scanning frameworks</p></li>
<li><p>Build enterprise monitoring and observability plugins</p></li>
<li><p>Establish enterprise support and consulting services</p></li>
</ul>
</li>
<li><p><strong>Integration and Deployment</strong></p>
<ul class="simple">
<li><p>Create SIEM integration plugins (Splunk, ELK, etc.)</p></li>
<li><p>Build cloud platform integration guides</p></li>
<li><p>Develop container and Kubernetes deployment examples</p></li>
<li><p>Create enterprise configuration and tuning guides</p></li>
</ul>
</li>
</ol>
<hr class="docutils" />
<p><strong>The architecture is now complete and ready for implementation. This document serves as the definitive guide for building Fapilog v3 as a revolutionary async-first logging library that achieves both developer simplicity and enterprise power.</strong></p>
</section>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Chris Haste.
      <span class="lastupdated">Last updated on August 19, 2025.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>