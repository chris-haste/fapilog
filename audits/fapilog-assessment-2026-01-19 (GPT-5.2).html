

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Open Source Library Assessment Report — fapilog &mdash; fapilog latest documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=9edc463e" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=c6e86fd7"></script>
      <script src="../_static/doctools.js?v=fd6eb6e6"></script>
      <script src="../_static/sphinx_highlight.js?v=6ffebe34"></script>
      <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../_static/copybutton.js?v=30646c52"></script>
      <script src="../_static/custom.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="fapilog: Open Source Library Assessment Report" href="fapilog-assessment-2026-01-19%20%28Gemini-3-Flash%29.html" />
    <link rel="prev" title="Fapilog Open Source Library Assessment" href="fapilog-assessment-2026-01-19%20%28Claude-Opus-4.5%29.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #2980B9" >

          
          
          <a href="../index.html" class="icon icon-home">
            fapilog
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting-started/index.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/installation.html">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/quickstart.html">Quickstart Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/hello-world.html">Hello World Walkthrough</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../core-concepts/index.html">Core Concepts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../core-concepts/pipeline-architecture.html">Pipeline Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core-concepts/envelope.html">Envelope</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core-concepts/context-binding.html">Context Binding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core-concepts/batching-backpressure.html">Batching &amp; Backpressure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core-concepts/redaction.html">Redaction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core-concepts/sinks.html">Sinks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core-concepts/metrics.html">Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core-concepts/diagnostics-resilience.html">Diagnostics Resilience</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core-concepts/diagnostics-resilience.html#id1">Diagnostics &amp; Resilience</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../user-guide/index.html">User Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../user-guide/configuration.html">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user-guide/environment-variables.html">Environment Variable Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user-guide/using-logger.html">Using the Logger</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user-guide/context-enrichment.html">Context Enrichment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user-guide/rotating-file-sink.html">Rotating File Sink</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user-guide/sink-routing.html">Sink routing by level</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user-guide/redactors.html">Redactors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user-guide/redaction-guarantee.html">Redaction Guarantee</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user-guide/graceful-shutdown.html">Graceful Shutdown</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user-guide/performance-tuning.html">Performance Tuning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user-guide/benchmarks.html">Performance Benchmarks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user-guide/integration-guide.html">Integration Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user-guide/fastapi.html">FastAPI / ASGI Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user-guide/comparisons.html">Comparisons: fapilog vs stdlib, structlog, loguru</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user-guide/reliability-defaults.html">Reliability Defaults and Guardrails</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user-guide/testing-plugins.html">Testing Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user-guide/webhook-security.html">Webhook Security</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../enterprise.html">Enterprise Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api-reference/index.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../api-reference/top-level-functions.html">Top-Level Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-reference/logger-methods.html">Logger Methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-reference/context-binding.html">Context Binding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-reference/audit-trail.html">Audit Trail</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-reference/configuration.html">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-reference/types.html">Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-reference/plugins/index.html">Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-reference/lifecycle-results.html">Lifecycle &amp; Results</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-reference/modules.html">API Modules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../examples/index.html">Examples &amp; Recipes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../examples/fastapi-logging.html">FastAPI Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/cli-tools.html">Logging in Scripts/CLIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/redacting-secrets.html">Redacting Secrets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/structured-error-logging.html">Structured Error Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/kubernetes-file-sink.html">Kubernetes File Sink</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/prometheus-metrics.html">Prometheus Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/sampling-debug-logs.html">Sampling Debug Logs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/size-limited-destinations.html">Handling Size-Limited Destinations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/cloudwatch_logging/index.html">CloudWatch Logging (LocalStack)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/cloud-sinks/index.html">Cloud Sink Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../plugins/index.html">Plugin Development</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../plugins/authoring.html">Authoring Fapilog Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/contracts-and-versioning.html">Plugin Contracts and API Versioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/redactors.html">Redactors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/sinks.html">Sinks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/enrichers.html">Enrichers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/filters.html">Filters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/processors.html">Processors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/testing.html">Plugin Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/configuration.html">Plugin Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/health-checks.html">Plugin Health Checks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/error-handling.html">Plugin Error Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../patterns.html">Integration Patterns</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting/index.html">Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting/logs-dropped-under-load.html">Logs Dropped Under Load</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting/destination-size-limits.html">Logs Rejected by Destination Size Limits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting/context-values-missing.html">Context Values Missing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting/file-sink-not-rotating.html">File Sink Not Rotating</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting/serialization-errors.html">Serialization Errors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting/pii-showing-despite-redaction.html">PII Showing Despite Redaction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting/cloudwatch-sink.html">CloudWatch Sink Issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting/loki-sink.html">Loki Sink Issues</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">Contributing to fapilog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../contributing/test-categories.html">Test Categories</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/contract-tests.html">Contract Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/changelog.html">Changelog Workflow</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../appendices.html">Appendices</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../env-vars.html">Environment Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../settings-guide.html">Settings Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../schema-guide.html">Schema Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../schema-migration-v1.0-to-v1.1.html">Schema Migration Guide: v1.0 to v1.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugin-guide.html">Plugin Catalog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../redaction-guarantees.html">Redaction Guarantees</a></li>
<li class="toctree-l2"><a class="reference internal" href="../security-operator-workflows.html">Security Remediation &amp; Approval Workflows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quality-signals.html">Quality Signals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../adr/0003-canonical-log-schema-v1.1.html">ADR-0003: Canonical Log Schema v1.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../adr/0004-encryption-out-of-scope.html">ADR-0004: Encryption Out of Scope</a></li>
<li class="toctree-l2"><a class="reference internal" href="fapilog-assessment-2026-01-19%20%28Claude-Opus-4.5%29.html">Fapilog Open Source Library Assessment</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Open Source Library Assessment Report — <code class="docutils literal notranslate"><span class="pre">fapilog</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="fapilog-assessment-2026-01-19%20%28Gemini-3-Flash%29.html">fapilog: Open Source Library Assessment Report</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #2980B9" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">fapilog</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../appendices.html">Appendices</a></li>
      <li class="breadcrumb-item active">Open Source Library Assessment Report — <code class="docutils literal notranslate"><span class="pre">fapilog</span></code></li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/audits/fapilog-assessment-2026-01-19 (GPT-5.2).md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="open-source-library-assessment-report-fapilog">
<h1>Open Source Library Assessment Report — <code class="docutils literal notranslate"><span class="pre">fapilog</span></code><a class="headerlink" href="#open-source-library-assessment-report-fapilog" title="Link to this heading"></a></h1>
<section id="executive-summary">
<h2>Executive Summary<a class="headerlink" href="#executive-summary" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">fapilog</span></code> is a feature-rich, pipeline-oriented logging library</strong>: bounded queue, batching, backpressure/drop policy, pluggable stages (filters/enrichers/redactors/processors/sinks), and FastAPI integration.</p></li>
<li><p><strong>It is not “faster logging” in the general case</strong>; it is slower than stdlib under fast local sinks, sometimes drastically.</p></li>
<li><p><strong>Where it shines is slow sinks / bursts</strong>: app-side latency protection is a real, documented win.</p></li>
<li><p><strong>Security posture is above average</strong> for a Python logging library: external plugins blocked by default, fallback redaction, webhook signing defaults, SBOM + pip-audit workflow.</p></li>
<li><p><strong>Preset safety is a footgun</strong>: the <code class="docutils literal notranslate"><span class="pre">fastapi</span></code> preset disables redaction.</p></li>
<li><p><strong>Engineering discipline is strong</strong>: contract tests, diff coverage, doc accuracy checks, release guardrails.</p></li>
<li><p><strong>Complexity is significant</strong> in core modules; this is powerful but raises long-term maintenance risk.</p></li>
<li><p><strong>Add-ons exist</strong> for audit and tamper-evident logging, but tamper add-on admits placeholder components.</p></li>
</ul>
<p><strong>Verdict: Trial</strong> — Despite strong quality gates and a compelling slow-sink story, the performance/memory tradeoffs and some security footguns (preset redaction behavior) demand a real-world spike before production adoption.</p>
<p><strong>Weighted Score: 71.1 / 100</strong> | <strong>Confidence: Medium</strong></p>
</section>
<hr class="docutils" />
<section id="phase-0-context-scope-done-first">
<h2>Phase 0 — Context &amp; Scope (done first)<a class="headerlink" href="#phase-0-context-scope-done-first" title="Link to this heading"></a></h2>
<section id="a-library-identity-version-signals-language-domain">
<h3>A) Library identity / version signals / language / domain<a class="headerlink" href="#a-library-identity-version-signals-language-domain" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Library</strong>: <code class="docutils literal notranslate"><span class="pre">fapilog</span></code> (“Production-ready logging for the modern Python stack”) (<code class="docutils literal notranslate"><span class="pre">README.md</span></code>).</p></li>
<li><p><strong>Language</strong>: Python (requires <strong>Python &gt;= 3.10</strong>) (<code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> → <code class="docutils literal notranslate"><span class="pre">[project].requires-python</span></code>).</p></li>
<li><p><strong>Primary domain</strong>: async-first, structured logging for services, with FastAPI integration, plugin-based sinks/enrichers/redactors, backpressure/batching, and safety guardrails (<code class="docutils literal notranslate"><span class="pre">README.md</span></code> sections “Why fapilog?”, “FastAPI request logging”, “Architecture”; <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/logger.py</span></code>; <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/worker.py</span></code>).</p></li>
<li><p><strong>Version signals</strong></p>
<ul>
<li><p>Git tags present locally: <code class="docutils literal notranslate"><span class="pre">v0.3.0</span></code> … <code class="docutils literal notranslate"><span class="pre">v0.3.5</span></code> (<code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">tag</span> <span class="pre">--list</span></code> output).</p></li>
<li><p>Project uses VCS-derived versioning: Hatch VCS hook writes <code class="docutils literal notranslate"><span class="pre">src/fapilog/_version.py</span></code> (<code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> → <code class="docutils literal notranslate"><span class="pre">[tool.hatch.version]</span></code>, <code class="docutils literal notranslate"><span class="pre">[tool.hatch.build.hooks.vcs]</span></code>).</p></li>
<li><p>Local working tree version currently: <code class="docutils literal notranslate"><span class="pre">0.3.6.dev391+gf1ab16f71</span></code> (<code class="docutils literal notranslate"><span class="pre">src/fapilog/_version.py</span></code>), i.e., <strong>ahead of last tag</strong>.</p></li>
<li><p>Docs benchmark page claims “fapilog 0.3.6” in its environment table (<code class="docutils literal notranslate"><span class="pre">docs/user-guide/benchmarks.md</span></code>), which is <strong>not a released tag</strong> in this checkout (tags stop at <code class="docutils literal notranslate"><span class="pre">v0.3.5</span></code>). This is a <strong>docs accuracy risk</strong> if published docs are meant to align to the latest PyPI release.</p></li>
</ul>
</li>
</ul>
</section>
<section id="b-primary-user-personas">
<h3>B) Primary user personas<a class="headerlink" href="#b-primary-user-personas" title="Link to this heading"></a></h3>
<p>Based on docs, code surface, and add-ons:</p>
<ul class="simple">
<li><p><strong>App developers (FastAPI/async)</strong>: want “one-liner” setup, request correlation, structured events (<code class="docutils literal notranslate"><span class="pre">README.md</span></code> “FastAPI request logging”; <code class="docutils literal notranslate"><span class="pre">src/fapilog/fastapi/setup.py</span></code>).</p></li>
<li><p><strong>Platform teams / SREs</strong>: care about non-blocking behavior, backpressure, metrics hooks, sink failure behavior (<code class="docutils literal notranslate"><span class="pre">README.md</span></code> “Non‑blocking under slow sinks”, “Operational visibility”; <code class="docutils literal notranslate"><span class="pre">docs/user-guide/reliability-defaults.md</span></code>; <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/worker.py</span></code>; <code class="docutils literal notranslate"><span class="pre">src/fapilog/metrics/metrics.py</span></code> (exists per tree)).</p></li>
<li><p><strong>Security / compliance teams</strong>: redaction defaults, safe fallback behavior, audit/tamper add-ons (<code class="docutils literal notranslate"><span class="pre">README.md</span></code> “Security &amp; compliance guardrails”; <code class="docutils literal notranslate"><span class="pre">docs/user-guide/reliability-defaults.md</span></code> redaction; <code class="docutils literal notranslate"><span class="pre">src/fapilog/plugins/sinks/fallback.py</span></code>; <code class="docutils literal notranslate"><span class="pre">packages/fapilog-audit/*</span></code>; <code class="docutils literal notranslate"><span class="pre">packages/fapilog-tamper/*</span></code>).</p></li>
<li><p><strong>Library/plugin authors</strong>: plugin protocols, metadata, validation mode, entry-point allowlisting (<code class="docutils literal notranslate"><span class="pre">docs/plugins/contracts-and-versioning.md</span></code>; <code class="docutils literal notranslate"><span class="pre">src/fapilog/plugins/loader.py</span></code>; <code class="docutils literal notranslate"><span class="pre">src/fapilog/plugins/versioning.py</span></code>; <code class="docutils literal notranslate"><span class="pre">src/fapilog/testing/validators.py</span></code> (exists per tree)).</p></li>
</ul>
</section>
<section id="c-intended-runtime-contexts">
<h3>C) Intended runtime contexts<a class="headerlink" href="#c-intended-runtime-contexts" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Async servers</strong> (FastAPI/Starlette): explicit middleware and lifespan integration (<code class="docutils literal notranslate"><span class="pre">src/fapilog/fastapi/setup.py</span></code>, <code class="docutils literal notranslate"><span class="pre">src/fapilog/fastapi/logging.py</span></code>, <code class="docutils literal notranslate"><span class="pre">src/fapilog/fastapi/context.py</span></code>).</p></li>
<li><p><strong>Sync services / scripts</strong>: sync facade runs a background event loop in a dedicated thread when no running loop exists (<code class="docutils literal notranslate"><span class="pre">src/fapilog/core/logger.py</span></code> → <code class="docutils literal notranslate"><span class="pre">SyncLoggerFacade.start()</span></code> and worker “THREAD LOOP MODE”).</p></li>
<li><p><strong>Containerized / CI contexts</strong>: default log level selection uses CI detection and TTY detection (<code class="docutils literal notranslate"><span class="pre">src/fapilog/core/defaults.py</span></code>; also described in <code class="docutils literal notranslate"><span class="pre">docs/user-guide/configuration.md</span></code>).</p></li>
<li><p><strong>CLI</strong>: core CLI is explicitly placeholder (“not implemented”) (<code class="docutils literal notranslate"><span class="pre">README.md</span></code> stability table says “CLI: Placeholder”; <code class="docutils literal notranslate"><span class="pre">src/fapilog/cli/main.py</span></code>).</p></li>
</ul>
</section>
<section id="d-evaluation-constraints">
<h3>D) Evaluation constraints<a class="headerlink" href="#d-evaluation-constraints" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>None provided</strong> by the user in this prompt.
I therefore evaluated for a “typical” modern Python service context (FastAPI/async, structured logs, production operability, security hygiene) and explicitly call out where workload-specific validation is required (see the “If I had 2 hours” plan).</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="phase-1-repo-inventory-health">
<h2>Phase 1 — Repo Inventory &amp; Health<a class="headerlink" href="#phase-1-repo-inventory-health" title="Link to this heading"></a></h2>
<section id="repo-snapshot-structure-what-it-contains">
<h3>Repo snapshot (structure &amp; what it contains)<a class="headerlink" href="#repo-snapshot-structure-what-it-contains" title="Link to this heading"></a></h3>
<p>High-signal directories (from workspace layout + targeted listings):</p>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">src/fapilog/</span></code></strong>: the library implementation, including:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">core/</span></code>: queue, worker, serialization, settings, routing, circuit breakers, retries, resources, etc. (<code class="docutils literal notranslate"><span class="pre">src/fapilog/core/*</span></code> per <code class="docutils literal notranslate"><span class="pre">LS</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fastapi/</span></code>: middleware and setup helpers (<code class="docutils literal notranslate"><span class="pre">src/fapilog/fastapi/*</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">plugins/</span></code>: plugin loader, registries, built-in plugin implementations for sinks/enrichers/redactors/filters/processors (<code class="docutils literal notranslate"><span class="pre">src/fapilog/plugins/*</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">metrics/</span></code>: internal metrics collector (<code class="docutils literal notranslate"><span class="pre">src/fapilog/metrics/metrics.py</span></code> exists per tree; metrics enabled via settings in <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/settings.py</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cli/</span></code>: placeholder CLI (<code class="docutils literal notranslate"><span class="pre">src/fapilog/cli/main.py</span></code> prints placeholder).</p></li>
</ul>
</li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">tests/</span></code></strong>: substantial test suite with:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">contract/</span></code>: schema compatibility tests (<code class="docutils literal notranslate"><span class="pre">tests/contract/test_envelope_contract.py</span></code>, <code class="docutils literal notranslate"><span class="pre">tests/contract/test_schema_validation.py</span></code>, etc. per <code class="docutils literal notranslate"><span class="pre">LS</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">integration/</span></code>: sink integrations (LocalStack CloudWatch, Loki, Postgres), FastAPI middleware tests, worker lifecycle tests (<code class="docutils literal notranslate"><span class="pre">tests/integration/*</span></code> per <code class="docutils literal notranslate"><span class="pre">LS</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">property/</span></code>: property-based tests (<code class="docutils literal notranslate"><span class="pre">tests/property/*</span></code> per <code class="docutils literal notranslate"><span class="pre">LS</span></code>).</p></li>
</ul>
</li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">docs/</span></code></strong>: very large documentation set:</p>
<ul>
<li><p>user guide, architecture docs, plugin docs, troubleshooting, ADRs, PRDs, stories, API reference (<code class="docutils literal notranslate"><span class="pre">docs/*</span></code> per <code class="docutils literal notranslate"><span class="pre">LS</span></code>).</p></li>
</ul>
</li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">examples/</span></code></strong>: runnable examples for FastAPI setups, cloud sinks, Loki, Postgres, presets (<code class="docutils literal notranslate"><span class="pre">examples/*</span></code> per <code class="docutils literal notranslate"><span class="pre">LS</span></code>).</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">packages/</span></code></strong>: related add-on packages:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">fapilog-audit/</span></code> (audit trail sink) (<code class="docutils literal notranslate"><span class="pre">packages/fapilog-audit/*</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fapilog-tamper/</span></code> (tamper-evident logging plugin + CLI) (<code class="docutils literal notranslate"><span class="pre">packages/fapilog-tamper/*</span></code>).</p></li>
</ul>
</li>
</ul>
</section>
<section id="packaging-distribution-approach">
<h3>Packaging/distribution approach<a class="headerlink" href="#packaging-distribution-approach" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Build system</strong>: Hatch (<code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> → <code class="docutils literal notranslate"><span class="pre">[build-system]</span></code> uses <code class="docutils literal notranslate"><span class="pre">hatchling</span></code>; extensive <code class="docutils literal notranslate"><span class="pre">tool.hatch.envs.*</span></code> definitions).</p></li>
<li><p><strong>Versioning</strong>: VCS-derived dynamic version (<code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> → <code class="docutils literal notranslate"><span class="pre">[project].dynamic</span> <span class="pre">=</span> <span class="pre">[&quot;version&quot;]</span></code>; <code class="docutils literal notranslate"><span class="pre">[tool.hatch.version]</span> <span class="pre">source=&quot;vcs&quot;</span></code>; version file <code class="docutils literal notranslate"><span class="pre">src/fapilog/_version.py</span></code>).</p></li>
<li><p><strong>Typing</strong>: declares “Typed” classifier and includes <code class="docutils literal notranslate"><span class="pre">py.typed</span></code> (<code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> classifiers include <code class="docutils literal notranslate"><span class="pre">Typing</span> <span class="pre">::</span> <span class="pre">Typed</span></code>; <code class="docutils literal notranslate"><span class="pre">src/fapilog/py.typed</span></code> exists).</p></li>
<li><p><strong>Python support</strong>: <code class="docutils literal notranslate"><span class="pre">&gt;=3.10</span></code> (<code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>).</p></li>
<li><p><strong>Core dependencies (runtime)</strong>: <code class="docutils literal notranslate"><span class="pre">pydantic&gt;=2.11.0</span></code>, <code class="docutils literal notranslate"><span class="pre">pydantic-settings&gt;=2.0.0</span></code>, <code class="docutils literal notranslate"><span class="pre">httpx&gt;=0.24.0</span></code>, <code class="docutils literal notranslate"><span class="pre">orjson&gt;=3.9.15</span></code> (explicitly called out as CVE-fixed), <code class="docutils literal notranslate"><span class="pre">packaging&gt;=23.0</span></code> (<code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>).</p></li>
<li><p><strong>Optional extras</strong>: <code class="docutils literal notranslate"><span class="pre">fastapi</span></code>, <code class="docutils literal notranslate"><span class="pre">aws</span></code> (<code class="docutils literal notranslate"><span class="pre">boto3</span></code>), <code class="docutils literal notranslate"><span class="pre">metrics</span></code> (<code class="docutils literal notranslate"><span class="pre">prometheus-client</span></code>), <code class="docutils literal notranslate"><span class="pre">system</span></code> (<code class="docutils literal notranslate"><span class="pre">psutil</span></code> non-win32), <code class="docutils literal notranslate"><span class="pre">postgres</span></code> (<code class="docutils literal notranslate"><span class="pre">asyncpg</span></code>), plus <code class="docutils literal notranslate"><span class="pre">dev</span></code>, <code class="docutils literal notranslate"><span class="pre">docs</span></code>, and aggregate <code class="docutils literal notranslate"><span class="pre">all</span></code> (<code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>).</p></li>
<li><p><strong>Locking</strong>: repository includes <code class="docutils literal notranslate"><span class="pre">uv.lock</span></code> with pinned transitive versions for reproducible environments (<code class="docutils literal notranslate"><span class="pre">uv.lock</span></code> header shows <code class="docutils literal notranslate"><span class="pre">requires-python</span> <span class="pre">=</span> <span class="pre">&quot;&gt;=3.10&quot;</span></code> and many locked packages).</p></li>
</ul>
</section>
<section id="maintenance-signals-local-evidence-first">
<h3>Maintenance signals (local evidence first)<a class="headerlink" href="#maintenance-signals-local-evidence-first" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Release tags</strong>: up to <code class="docutils literal notranslate"><span class="pre">v0.3.5</span></code> present locally (<code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">tag</span> <span class="pre">--list</span></code> output).</p></li>
<li><p><strong>Recency</strong>: last commit in this checkout is 2026-01-19 (<code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">log</span> <span class="pre">-1</span></code> output).</p></li>
<li><p><strong>Changelog discipline</strong>: detailed <code class="docutils literal notranslate"><span class="pre">CHANGELOG.md</span></code> with Keep-a-Changelog format and explicit breaking changes and security items (<code class="docutils literal notranslate"><span class="pre">CHANGELOG.md</span></code>).</p></li>
<li><p><strong>Project maturity signal</strong>: classified as “Beta” (<code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> classifier <code class="docutils literal notranslate"><span class="pre">Development</span> <span class="pre">Status</span> <span class="pre">::</span> <span class="pre">4</span> <span class="pre">-</span> <span class="pre">Beta</span></code>).</p></li>
</ul>
<p><strong>Important limitation:</strong> I did not authenticate against GitHub’s API here, and web search results were inconsistent about PyPI versions/repo metadata. I therefore treat <strong>GitHub issues/PR responsiveness and community size as “unknown”</strong> unless confirmed by repository-local evidence.</p>
</section>
<section id="governance-contributor-experience">
<h3>Governance &amp; contributor experience<a class="headerlink" href="#governance-contributor-experience" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Maintainer</strong>: single named maintainer (<code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> maintainer list shows Chris Haste).</p></li>
<li><p><strong>Contributing guide</strong>: present with workflow, quality checks, and public API policy (<code class="docutils literal notranslate"><span class="pre">CONTRIBUTING.md</span></code>).</p></li>
<li><p><strong>Code of Conduct</strong>: present (workspace root includes <code class="docutils literal notranslate"><span class="pre">CODE_OF_CONDUCT.md</span></code>; also referenced in <code class="docutils literal notranslate"><span class="pre">CHANGELOG.md</span></code>).</p></li>
<li><p><strong>Security policy</strong>: present (<code class="docutils literal notranslate"><span class="pre">SECURITY.md</span></code>) with reporting email and timelines.</p></li>
</ul>
</section>
<section id="ci-cd-and-quality-gates">
<h3>CI/CD and quality gates<a class="headerlink" href="#ci-cd-and-quality-gates" title="Link to this heading"></a></h3>
<p>Evidence from workflows:</p>
<ul class="simple">
<li><p><strong>CI pipeline</strong> (<code class="docutils literal notranslate"><span class="pre">.github/workflows/ci.yml</span></code>):</p>
<ul>
<li><p>Lint: <code class="docutils literal notranslate"><span class="pre">ruff</span></code> (<code class="docutils literal notranslate"><span class="pre">hatch</span> <span class="pre">run</span> <span class="pre">lint:lint</span></code>).</p></li>
<li><p>Typecheck: <code class="docutils literal notranslate"><span class="pre">mypy</span></code> (<code class="docutils literal notranslate"><span class="pre">hatch</span> <span class="pre">run</span> <span class="pre">typecheck:typecheck</span></code>).</p></li>
<li><p>Contract tests: schema compatibility tests (<code class="docutils literal notranslate"><span class="pre">tests/contract/</span></code>).</p></li>
<li><p>Tests + coverage with selection logic for PRs; uploads Codecov; enforces diff-cover ≥ 90% changed lines (<code class="docutils literal notranslate"><span class="pre">diff-cover</span> <span class="pre">coverage.xml</span> <span class="pre">--fail-under=90</span></code>).</p></li>
<li><p>Benchmark smoke test runs <code class="docutils literal notranslate"><span class="pre">scripts/benchmarking.py</span></code> (<code class="docutils literal notranslate"><span class="pre">.github/workflows/ci.yml</span></code> job <code class="docutils literal notranslate"><span class="pre">benchmark-smoke</span></code>).</p></li>
<li><p>Docs build + doc accuracy check in CI (<code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">scripts/check_doc_accuracy.py</span></code>; <code class="docutils literal notranslate"><span class="pre">sphinx-build</span> <span class="pre">-W</span></code>).</p></li>
</ul>
</li>
<li><p><strong>Security scan &amp; SBOM</strong> (<code class="docutils literal notranslate"><span class="pre">.github/workflows/security-sbom.yml</span></code>):</p>
<ul>
<li><p>Generates CycloneDX SBOM (<code class="docutils literal notranslate"><span class="pre">cyclonedx-py</span> <span class="pre">environment</span> <span class="pre">-o</span> <span class="pre">sbom.json</span></code>) and runs <code class="docutils literal notranslate"><span class="pre">pip-audit</span></code> (<code class="docutils literal notranslate"><span class="pre">pip-audit</span> <span class="pre">-f</span> <span class="pre">json</span> <span class="pre">-o</span> <span class="pre">audit.json</span></code>) and uploads artifacts.</p></li>
</ul>
</li>
<li><p><strong>Workflow validation</strong> (<code class="docutils literal notranslate"><span class="pre">.github/workflows/validate-workflows.yml</span></code>):</p>
<ul>
<li><p>YAML syntax checks use <code class="docutils literal notranslate"><span class="pre">yaml.safe_load</span></code> and a regex-based “potential secrets” scan for workflow files.</p></li>
</ul>
</li>
<li><p><strong>Release automation</strong> (<code class="docutils literal notranslate"><span class="pre">.github/workflows/release.yml</span></code>):</p>
<ul>
<li><p>Tag-driven release, validates changelog contains the version, runs tests, builds wheel/sdist, verifies built version matches tag, publishes to PyPI, deploys docs, creates GitHub release.</p></li>
</ul>
</li>
</ul>
</section>
<section id="licensing-compliance-basics">
<h3>Licensing &amp; compliance basics<a class="headerlink" href="#licensing-compliance-basics" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>License</strong>: Apache 2.0 (<code class="docutils literal notranslate"><span class="pre">LICENSE</span></code>, <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> license field).</p></li>
<li><p><strong>Dependency posture</strong></p>
<ul>
<li><p>Core uses <strong>minimum version constraints</strong> (not pinned) (<code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> dependencies).</p></li>
<li><p>Repository also includes <strong><code class="docutils literal notranslate"><span class="pre">uv.lock</span></code></strong> for reproducible builds/CI environments.</p></li>
<li><p>Security notes appear in dependency constraints: <code class="docutils literal notranslate"><span class="pre">orjson&gt;=3.9.15</span></code> explicitly mentions CVE fix (<code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> comment).</p></li>
</ul>
</li>
<li><p><strong>CLA/DCO</strong>: not observed in files reviewed (no <code class="docutils literal notranslate"><span class="pre">CLA.md</span></code>/DCO mention in top-level docs examined); unknown.</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="phase-2-capabilities-discovery-advertised-vs-nonadvertised">
<h2>Phase 2 — Capabilities Discovery (Advertised vs Non‑advertised)<a class="headerlink" href="#phase-2-capabilities-discovery-advertised-vs-nonadvertised" title="Link to this heading"></a></h2>
<section id="sampling-strategy-for-non-advertised-discovery">
<h3>Sampling strategy (for “non-advertised” discovery)<a class="headerlink" href="#sampling-strategy-for-non-advertised-discovery" title="Link to this heading"></a></h3>
<p>Because this repository is large, I used a focused sampling strategy:</p>
<ul class="simple">
<li><p><strong>Docs/README</strong>: <code class="docutils literal notranslate"><span class="pre">README.md</span></code>, <code class="docutils literal notranslate"><span class="pre">docs/user-guide/configuration.md</span></code>, <code class="docutils literal notranslate"><span class="pre">docs/user-guide/reliability-defaults.md</span></code>, <code class="docutils literal notranslate"><span class="pre">docs/user-guide/benchmarks.md</span></code>, <code class="docutils literal notranslate"><span class="pre">docs/plugins/contracts-and-versioning.md</span></code>, <code class="docutils literal notranslate"><span class="pre">docs/user-guide/webhook-security.md</span></code>, <code class="docutils literal notranslate"><span class="pre">docs/quality-signals.md</span></code>.</p></li>
<li><p><strong>Core code</strong>: <code class="docutils literal notranslate"><span class="pre">src/fapilog/__init__.py</span></code>, <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/settings.py</span></code>, <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/logger.py</span></code>, <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/worker.py</span></code>, <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/serialization.py</span></code>, <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/envelope.py</span></code>, <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/diagnostics.py</span></code>, <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/sink_writers.py</span></code>, <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/circuit_breaker.py</span></code>, plus “enterprise-ish” modules <code class="docutils literal notranslate"><span class="pre">retry.py</span></code>, <code class="docutils literal notranslate"><span class="pre">resources.py</span></code>, <code class="docutils literal notranslate"><span class="pre">hot_reload.py</span></code>, <code class="docutils literal notranslate"><span class="pre">access_control.py</span></code>.</p></li>
<li><p><strong>Key built-in sinks</strong>: <code class="docutils literal notranslate"><span class="pre">plugins/sinks/rotating_file.py</span></code>, <code class="docutils literal notranslate"><span class="pre">plugins/sinks/webhook.py</span></code>, <code class="docutils literal notranslate"><span class="pre">plugins/sinks/fallback.py</span></code>, and contrib sinks <code class="docutils literal notranslate"><span class="pre">cloudwatch.py</span></code>, <code class="docutils literal notranslate"><span class="pre">loki.py</span></code>, <code class="docutils literal notranslate"><span class="pre">postgres.py</span></code>.</p></li>
<li><p><strong>FastAPI integration</strong>: <code class="docutils literal notranslate"><span class="pre">src/fapilog/fastapi/setup.py</span></code>, <code class="docutils literal notranslate"><span class="pre">src/fapilog/fastapi/logging.py</span></code>, <code class="docutils literal notranslate"><span class="pre">src/fapilog/fastapi/context.py</span></code>, plus integration test <code class="docutils literal notranslate"><span class="pre">tests/integration/test_fastapi_logging_middleware.py</span></code>.</p></li>
<li><p><strong>Tooling/CI</strong>: <code class="docutils literal notranslate"><span class="pre">.github/workflows/ci.yml</span></code>, <code class="docutils literal notranslate"><span class="pre">.github/workflows/security-sbom.yml</span></code>, <code class="docutils literal notranslate"><span class="pre">scripts/benchmarking.py</span></code>, <code class="docutils literal notranslate"><span class="pre">.pre-commit-config.yaml</span></code>.</p></li>
<li><p><strong>Add-ons</strong>: <code class="docutils literal notranslate"><span class="pre">packages/fapilog-audit/*</span></code>, <code class="docutils literal notranslate"><span class="pre">packages/fapilog-tamper/*</span></code>.</p></li>
</ul>
</section>
<section id="capability-catalog-advertised-vs-non-advertised">
<h3>Capability Catalog (Advertised vs Non-advertised)<a class="headerlink" href="#capability-catalog-advertised-vs-non-advertised" title="Link to this heading"></a></h3>
<p>Legend for maturity: <strong>Stable / Beta / Experimental</strong> based on explicit docs + project version status.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Capability</p></th>
<th class="head text-right"><p>Advertised?</p></th>
<th class="head"><p>Evidence (docs/code path)</p></th>
<th class="head"><p>Maturity</p></th>
<th class="head"><p>Notes / constraints</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Async-first log pipeline (background worker, queue, batching)</p></td>
<td class="text-right"><p>Y</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">README.md</span></code> (“Non‑blocking…”, architecture diagram); <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/logger.py</span></code> (worker modes), <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/worker.py</span></code> (batch loop)</p></td>
<td><p>Beta</p></td>
<td><p>Designed to reduce app-side latency under slow sinks; adds overhead under fast sinks (see benchmarks).</p></td>
</tr>
<tr class="row-odd"><td><p>Backpressure + bounded queue + drop/wait policy</p></td>
<td class="text-right"><p>Y</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">README.md</span></code> “Predictable under bursts”; <code class="docutils literal notranslate"><span class="pre">docs/user-guide/reliability-defaults.md</span></code>; <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/worker.py</span></code> <code class="docutils literal notranslate"><span class="pre">enqueue_with_backpressure()</span></code></p></td>
<td><p>Beta</p></td>
<td><p>“Same-thread” nuance: sync facade drops immediately when called on worker loop thread (<code class="docutils literal notranslate"><span class="pre">docs/user-guide/reliability-defaults.md</span></code>; <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/logger.py</span></code>).</p></td>
</tr>
<tr class="row-even"><td><p>Structured JSON envelope v1.1 with semantic groupings</p></td>
<td class="text-right"><p>Y</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">CHANGELOG.md</span></code> breaking notes about schema v1.1; <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/envelope.py</span></code>; <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/serialization.py</span></code></p></td>
<td><p>Beta</p></td>
<td><p>Timestamp normalized to RFC3339 UTC string (<code class="docutils literal notranslate"><span class="pre">src/fapilog/core/serialization.py</span></code>).</p></td>
</tr>
<tr class="row-odd"><td><p>Context binding via <code class="docutils literal notranslate"><span class="pre">bind()/unbind()/clear_context()</span></code> (ContextVar)</p></td>
<td class="text-right"><p>Y</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">README.md</span></code> “Context binding”; <code class="docutils literal notranslate"><span class="pre">docs/user-guide/comparisons.md</span></code>; <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/logger.py</span></code> (bound context var); <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/envelope.py</span></code> moves request/user fields into <code class="docutils literal notranslate"><span class="pre">context</span></code></p></td>
<td><p>Beta</p></td>
<td><p>Binding is per task/thread via ContextVar.</p></td>
</tr>
<tr class="row-even"><td><p>FastAPI one-liner lifespan setup (<code class="docutils literal notranslate"><span class="pre">setup_logging</span></code>)</p></td>
<td class="text-right"><p>Y</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">README.md</span></code> FastAPI section; <code class="docutils literal notranslate"><span class="pre">docs/user-guide/configuration.md</span></code> “FastAPI one-liner”; <code class="docutils literal notranslate"><span class="pre">src/fapilog/fastapi/setup.py</span></code></p></td>
<td><p>Beta</p></td>
<td><p>Automatically registers middleware unless <code class="docutils literal notranslate"><span class="pre">auto_middleware=False</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p>FastAPI request context middleware (request/user/tenant/trace/span)</p></td>
<td class="text-right"><p>Y</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">README.md</span></code> shows <code class="docutils literal notranslate"><span class="pre">RequestContextMiddleware</span></code>; <code class="docutils literal notranslate"><span class="pre">src/fapilog/fastapi/context.py</span></code> parses headers and W3C <code class="docutils literal notranslate"><span class="pre">traceparent</span></code></p></td>
<td><p>Beta</p></td>
<td><p>Uses incoming headers <code class="docutils literal notranslate"><span class="pre">X-Request-ID</span></code>, <code class="docutils literal notranslate"><span class="pre">X-User-ID</span></code>, <code class="docutils literal notranslate"><span class="pre">X-Tenant-ID</span></code>, <code class="docutils literal notranslate"><span class="pre">traceparent</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p>FastAPI request logging middleware (completion/error logs, sampling, header redaction)</p></td>
<td class="text-right"><p>Y</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">README.md</span></code>; <code class="docutils literal notranslate"><span class="pre">src/fapilog/fastapi/logging.py</span></code>; integration tests <code class="docutils literal notranslate"><span class="pre">tests/integration/test_fastapi_logging_middleware.py</span></code></p></td>
<td><p>Beta</p></td>
<td><p>Sampling only applies to successes; errors always logged (<code class="docutils literal notranslate"><span class="pre">src/fapilog/fastapi/logging.py</span></code>; tests validate sampling).</p></td>
</tr>
<tr class="row-odd"><td><p>Built-in sinks: stdout JSON / pretty</p></td>
<td class="text-right"><p>Y</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">README.md</span></code> features; <code class="docutils literal notranslate"><span class="pre">src/fapilog/__init__.py</span></code> format auto-detect; sinks exist under <code class="docutils literal notranslate"><span class="pre">src/fapilog/plugins/sinks/stdout_*.py</span></code> (per tree)</p></td>
<td><p>Beta</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">format=&quot;auto&quot;</span></code> chooses pretty when TTY else JSON (<code class="docutils literal notranslate"><span class="pre">src/fapilog/__init__.py</span></code>).</p></td>
</tr>
<tr class="row-even"><td><p>Built-in sink: rotating file with size/time rotation + retention + gzip</p></td>
<td class="text-right"><p>Y</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">README.md</span></code> preset table mentions file rotation; <code class="docutils literal notranslate"><span class="pre">src/fapilog/plugins/sinks/rotating_file.py</span></code></p></td>
<td><p>Beta</p></td>
<td><p>Uses <code class="docutils literal notranslate"><span class="pre">asyncio.to_thread()</span></code> for FS ops (good); has careful retention enforcement.</p></td>
</tr>
<tr class="row-odd"><td><p>Built-in sink: webhook/HTTP with batching + retries + HMAC signing</p></td>
<td class="text-right"><p>Y</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">README.md</span></code> “webhook”; <code class="docutils literal notranslate"><span class="pre">docs/user-guide/webhook-security.md</span></code>; <code class="docutils literal notranslate"><span class="pre">src/fapilog/plugins/sinks/webhook.py</span></code></p></td>
<td><p>Beta</p></td>
<td><p>Default signing mode is HMAC with timestamp (<code class="docutils literal notranslate"><span class="pre">src/fapilog/plugins/sinks/webhook.py</span></code>).</p></td>
</tr>
<tr class="row-even"><td><p>Built-in sinks: CloudWatch / Loki / Postgres</p></td>
<td class="text-right"><p>Y</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">README.md</span></code> plugin ecosystem list; sinks code under <code class="docutils literal notranslate"><span class="pre">src/fapilog/plugins/sinks/contrib/*</span></code></p></td>
<td><p>Beta</p></td>
<td><p>CloudWatch uses <code class="docutils literal notranslate"><span class="pre">boto3</span></code> with <code class="docutils literal notranslate"><span class="pre">asyncio.to_thread()</span></code> and limit enforcement (<code class="docutils literal notranslate"><span class="pre">cloudwatch.py</span></code>). Loki uses <code class="docutils literal notranslate"><span class="pre">httpx</span></code> and label sanitation (<code class="docutils literal notranslate"><span class="pre">loki.py</span></code>). Postgres uses <code class="docutils literal notranslate"><span class="pre">asyncpg</span></code> and creates table/indexes best-effort (<code class="docutils literal notranslate"><span class="pre">postgres.py</span></code>).</p></td>
</tr>
<tr class="row-odd"><td><p>Sink routing by level (fan-out rules)</p></td>
<td class="text-right"><p>Y</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">README.md</span></code> env example; <code class="docutils literal notranslate"><span class="pre">docs/user-guide/sink-routing.md</span></code> (exists); code path <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/settings.py</span></code> <code class="docutils literal notranslate"><span class="pre">SinkRoutingSettings</span></code>, and routing writer referenced in <code class="docutils literal notranslate"><span class="pre">src/fapilog/__init__.py</span></code></p></td>
<td><p>Beta</p></td>
<td><p>Routing is optional; otherwise fan-out to all sinks.</p></td>
</tr>
<tr class="row-even"><td><p>Sink circuit breaker / fault isolation</p></td>
<td class="text-right"><p>Y (partly)</p></td>
<td><p>Mentioned in README “non-blocking under slow sinks” and error handling; explicit code <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/circuit_breaker.py</span></code>, used in <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/sink_writers.py</span></code> and sinks (CloudWatch/Loki/Postgres)</p></td>
<td><p>Beta</p></td>
<td><p>Simple per-sink breaker: open after consecutive failures; half-open probes.</p></td>
</tr>
<tr class="row-odd"><td><p>Fallback on sink write failure to stderr with minimal redaction</p></td>
<td class="text-right"><p>Y</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">docs/user-guide/configuration.md</span></code> (sink write failure fallback); <code class="docutils literal notranslate"><span class="pre">src/fapilog/plugins/sinks/fallback.py</span></code>; <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/defaults.py</span></code> sensitive fields list</p></td>
<td><p>Beta</p></td>
<td><p>Default <code class="docutils literal notranslate"><span class="pre">minimal</span></code> redaction masks key names like <code class="docutils literal notranslate"><span class="pre">password</span></code>, <code class="docutils literal notranslate"><span class="pre">token</span></code>, etc., recursively through dicts/lists (<code class="docutils literal notranslate"><span class="pre">fallback.py</span></code>).</p></td>
</tr>
<tr class="row-even"><td><p>Redaction stage (field/regex/url redactors)</p></td>
<td class="text-right"><p>Y</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">README.md</span></code>; <code class="docutils literal notranslate"><span class="pre">docs/user-guide/reliability-defaults.md</span></code>; redactors exist in <code class="docutils literal notranslate"><span class="pre">src/fapilog/plugins/redactors/*</span></code></p></td>
<td><p>Beta</p></td>
<td><p><strong>Preset gotcha</strong>: <code class="docutils literal notranslate"><span class="pre">dev/fastapi/minimal</span></code> explicitly disable redaction (<code class="docutils literal notranslate"><span class="pre">docs/user-guide/reliability-defaults.md</span></code>).</p></td>
</tr>
<tr class="row-odd"><td><p>Error de-duplication window for ERROR/CRITICAL</p></td>
<td class="text-right"><p>Y</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">README.md</span></code> mentions error de-dup; <code class="docutils literal notranslate"><span class="pre">docs/user-guide/reliability-defaults.md</span></code>; implementation in <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/logger.py</span></code> <code class="docutils literal notranslate"><span class="pre">_prepare_payload()</span></code></p></td>
<td><p>Beta</p></td>
<td><p>Suppresses identical message strings within a window; emits a diagnostic about suppressed count (best-effort).</p></td>
</tr>
<tr class="row-even"><td><p>Metrics hooks (queue depth, drops, flush latency)</p></td>
<td class="text-right"><p>Y</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">README.md</span></code> “Optional metrics”; <code class="docutils literal notranslate"><span class="pre">docs/user-guide/reliability-defaults.md</span></code>; settings <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/settings.py</span></code> <code class="docutils literal notranslate"><span class="pre">enable_metrics</span></code>; CI tests include <code class="docutils literal notranslate"><span class="pre">tests/integration/test_load_metrics.py</span></code> (exists per tree)</p></td>
<td><p>Beta</p></td>
<td><p>Metrics are optional extra (<code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> extras <code class="docutils literal notranslate"><span class="pre">metrics</span></code>).</p></td>
</tr>
<tr class="row-odd"><td><p>Plugin system (built-ins + entry points + allowlist)</p></td>
<td class="text-right"><p>Y</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">README.md</span></code> “Plugin-friendly”; <code class="docutils literal notranslate"><span class="pre">docs/user-guide/configuration.md</span></code> “Plugin Security”; <code class="docutils literal notranslate"><span class="pre">src/fapilog/plugins/loader.py</span></code></p></td>
<td><p>Beta</p></td>
<td><p>External entry-point plugins disabled by default; must opt-in (<code class="docutils literal notranslate"><span class="pre">Settings.plugins.allow_external=False</span></code> default).</p></td>
</tr>
<tr class="row-even"><td><p>Plugin contracts + API versioning</p></td>
<td class="text-right"><p>Y</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">docs/plugins/contracts-and-versioning.md</span></code>; <code class="docutils literal notranslate"><span class="pre">src/fapilog/plugins/versioning.py</span></code></p></td>
<td><p>Beta</p></td>
<td><p>Current plugin API <code class="docutils literal notranslate"><span class="pre">(1,0)</span></code>; compatibility requires major match and declared minor ≤ current.</p></td>
</tr>
<tr class="row-odd"><td><p>Plugin validation modes (disabled/warn/strict)</p></td>
<td class="text-right"><p>N (mostly docs-level)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">src/fapilog/plugins/loader.py</span></code> <code class="docutils literal notranslate"><span class="pre">ValidationMode</span></code> + <code class="docutils literal notranslate"><span class="pre">set_validation_mode()</span></code>; wrapper in <code class="docutils literal notranslate"><span class="pre">src/fapilog/__init__.py</span></code> <code class="docutils literal notranslate"><span class="pre">_apply_plugin_settings()</span></code></p></td>
<td><p>Beta</p></td>
<td><p>Global module-level mode is a mild footgun: it’s shared process-wide (though set from Settings at logger creation).</p></td>
</tr>
<tr class="row-even"><td><p>Config hot reload (polling + validate + rollback)</p></td>
<td class="text-right"><p>N</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">src/fapilog/core/hot_reload.py</span></code></p></td>
<td><p>Experimental</p></td>
<td><p>Appears implemented but not featured prominently in README; operational semantics and integration patterns are unclear from sampled docs.</p></td>
</tr>
<tr class="row-odd"><td><p>Generic async resource pools (<code class="docutils literal notranslate"><span class="pre">HttpClientPool</span></code>, etc.)</p></td>
<td class="text-right"><p>N</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">src/fapilog/core/resources.py</span></code>; used by webhook sink (<code class="docutils literal notranslate"><span class="pre">src/fapilog/plugins/sinks/webhook.py</span></code>)</p></td>
<td><p>Beta</p></td>
<td><p>Provides bounded acquisition with timeout, raises <code class="docutils literal notranslate"><span class="pre">BackpressureError</span></code> on exhaustion.</p></td>
</tr>
<tr class="row-even"><td><p>Retry subsystem (pluggable, Tenacity-friendly)</p></td>
<td class="text-right"><p>N (docs mention Tenacity guide exists)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">src/fapilog/core/retry.py</span></code>; webhook uses <code class="docutils literal notranslate"><span class="pre">AsyncRetrier</span></code> (<code class="docutils literal notranslate"><span class="pre">src/fapilog/plugins/sinks/webhook.py</span></code>); docs mention Tenacity integration guide exists (<code class="docutils literal notranslate"><span class="pre">docs/guides/tenacity-integration.md</span></code> per tree)</p></td>
<td><p>Beta</p></td>
<td><p>The default retry policy is generic; sink-specific tuning still needed.</p></td>
</tr>
<tr class="row-odd"><td><p>“Enterprise” security settings (encryption/access control models)</p></td>
<td class="text-right"><p>Partially (implied)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">src/fapilog/core/security.py</span></code>, <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/encryption.py</span></code>, <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/access_control.py</span></code></p></td>
<td><p>Experimental</p></td>
<td><p>These read like <em>framework-level config scaffolding</em> more than a logging-library necessity; unclear how much is exercised in core runtime.</p></td>
</tr>
<tr class="row-even"><td><p>CLI</p></td>
<td class="text-right"><p>Y (as “not implemented”)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">README.md</span></code> stability table says CLI is placeholder; <code class="docutils literal notranslate"><span class="pre">src/fapilog/cli/main.py</span></code> prints placeholder</p></td>
<td><p>Placeholder</p></td>
<td><p>This is honest in README; still a gap for users expecting CLI tooling.</p></td>
</tr>
<tr class="row-odd"><td><p>Add-on: audit logging sink (<code class="docutils literal notranslate"><span class="pre">fapilog-audit</span></code>)</p></td>
<td class="text-right"><p>Y (README mentions audit + add-on)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">README.md</span></code> mentions <code class="docutils literal notranslate"><span class="pre">fapilog-tamper</span></code> add-on; <code class="docutils literal notranslate"><span class="pre">packages/fapilog-audit/pyproject.toml</span></code> defines entry point <code class="docutils literal notranslate"><span class="pre">fapilog.sinks</span></code> audit; <code class="docutils literal notranslate"><span class="pre">packages/fapilog-audit/README.md</span></code></p></td>
<td><p>Beta</p></td>
<td><p>External plugin requires allowlisting because core blocks external plugins by default.</p></td>
</tr>
<tr class="row-even"><td><p>Add-on: tamper-evident logging (<code class="docutils literal notranslate"><span class="pre">fapilog-tamper</span></code>)</p></td>
<td class="text-right"><p>Y (README mentions)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">packages/fapilog-tamper/pyproject.toml</span></code> includes <code class="docutils literal notranslate"><span class="pre">cryptography</span></code> and defines enricher/sink entry points + CLI; <code class="docutils literal notranslate"><span class="pre">packages/fapilog-tamper/README.md</span></code> says “placeholder components”</p></td>
<td><p>Experimental</p></td>
<td><p>Docs explicitly say initial release is placeholder; high risk until fully implemented and audited.</p></td>
</tr>
<tr class="row-odd"><td><p>Benchmarking tooling + CI smoke</p></td>
<td class="text-right"><p>Y</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">README.md</span></code> mentions <code class="docutils literal notranslate"><span class="pre">scripts/benchmarking.py</span></code>; docs <code class="docutils literal notranslate"><span class="pre">docs/user-guide/benchmarks.md</span></code>; CI job <code class="docutils literal notranslate"><span class="pre">benchmark-smoke</span></code> in <code class="docutils literal notranslate"><span class="pre">.github/workflows/ci.yml</span></code></p></td>
<td><p>Beta</p></td>
<td><p>Benchmarks show strong benefits under slow sinks, but large overhead under fast sinks.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="boundaries-non-goals-explicit-and-implicit">
<h3>Boundaries &amp; non-goals (explicit and implicit)<a class="headerlink" href="#boundaries-non-goals-explicit-and-implicit" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Explicit non-goal / not ready</strong>: core CLI is “Placeholder / Not implemented” (<code class="docutils literal notranslate"><span class="pre">README.md</span></code> stability table; <code class="docutils literal notranslate"><span class="pre">src/fapilog/cli/main.py</span></code>).</p></li>
<li><p><strong>Implicit boundary</strong>: This is not a general “observability suite”; metrics are narrowly about the logging pipeline (queue depth/drops/flush), not full tracing/APM (only trace IDs are propagated via middleware/context vars) (<code class="docutils literal notranslate"><span class="pre">README.md</span></code> “Operational visibility”; <code class="docutils literal notranslate"><span class="pre">src/fapilog/fastapi/context.py</span></code>).</p></li>
<li><p><strong>Implicit constraint</strong>: “Encryption/access control” appear as configuration models, but there is no evidence in the sampled runtime pipeline that log payloads are actually encrypted before emission (no reviewed sink/processor demonstrated encryption; the encryption module is a validator/config schema) (<code class="docutils literal notranslate"><span class="pre">src/fapilog/core/encryption.py</span></code>, <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/security.py</span></code>).</p></li>
</ul>
</section>
<section id="gotchas-high-impact">
<h3>Gotchas (high impact)<a class="headerlink" href="#gotchas-high-impact" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Performance inversion on fast sinks</strong>: Benchmarks show <code class="docutils literal notranslate"><span class="pre">stdlib</span></code> far faster for local fast file I/O:</p>
<ul>
<li><p>Throughput: stdlib 90,393 logs/sec vs fapilog 3,295 logs/sec (~0.04x) (<code class="docutils literal notranslate"><span class="pre">docs/user-guide/benchmarks.md</span></code>).</p></li>
<li><p>Memory: stdlib 85,719 bytes peak vs fapilog 10,670,043 bytes peak (~10 MB) (<code class="docutils literal notranslate"><span class="pre">docs/user-guide/benchmarks.md</span></code>).</p></li>
<li><p>This is not a minor footnote: it’s a <em>core adoption tradeoff</em>.</p></li>
</ul>
</li>
<li><p><strong>Backpressure nuance (sync same-thread)</strong>: In same-thread calls (sync facade called on worker loop thread), events drop immediately regardless of <code class="docutils literal notranslate"><span class="pre">drop_on_full</span></code> to avoid deadlock (<code class="docutils literal notranslate"><span class="pre">docs/user-guide/reliability-defaults.md</span></code>; <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/logger.py</span></code>).</p></li>
<li><p><strong>Preset redaction behavior</strong>: <code class="docutils literal notranslate"><span class="pre">fastapi</span></code> preset disables redaction explicitly; “no preset” enables URL credential redaction by default (<code class="docutils literal notranslate"><span class="pre">docs/user-guide/reliability-defaults.md</span></code>; <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/settings.py</span></code> <code class="docutils literal notranslate"><span class="pre">CoreSettings.redactors</span></code> default includes <code class="docutils literal notranslate"><span class="pre">[&quot;url_credentials&quot;]</span></code>). Users may assume “fastapi preset” is safer; it is not by default.</p></li>
<li><p><strong>Docs version mismatch risk</strong>: docs benchmark page references <code class="docutils literal notranslate"><span class="pre">fapilog</span> <span class="pre">0.3.6</span></code> (<code class="docutils literal notranslate"><span class="pre">docs/user-guide/benchmarks.md</span></code>), while local tags stop at <code class="docutils literal notranslate"><span class="pre">v0.3.5</span></code> and version is dev (<code class="docutils literal notranslate"><span class="pre">_version.py</span></code>). This can confuse users reproducing results against the latest release.</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="phase-3-technical-assessment-architecture-code-quality">
<h2>Phase 3 — Technical Assessment (Architecture &amp; Code Quality)<a class="headerlink" href="#phase-3-technical-assessment-architecture-code-quality" title="Link to this heading"></a></h2>
<section id="architecture-overview">
<h3>Architecture overview<a class="headerlink" href="#architecture-overview" title="Link to this heading"></a></h3>
<section id="major-components-and-responsibilities-observed">
<h4>Major components and responsibilities (observed)<a class="headerlink" href="#major-components-and-responsibilities-observed" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><strong>Public API / façade construction</strong>: <code class="docutils literal notranslate"><span class="pre">src/fapilog/__init__.py</span></code></p>
<ul>
<li><p>Builds settings/presets, selects format, loads plugins, chooses sink writer (routing or fanout), creates sync/async facades (<code class="docutils literal notranslate"><span class="pre">get_logger</span></code>, <code class="docutils literal notranslate"><span class="pre">get_async_logger</span></code>).</p></li>
</ul>
</li>
<li><p><strong>Settings / config schema</strong>: <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/settings.py</span></code></p>
<ul>
<li><p>Pydantic v2 <code class="docutils literal notranslate"><span class="pre">Settings</span></code> with nested groups (core/security/observability/http), env var mapping, plugin allowlist/denylist and validation mode.</p></li>
</ul>
</li>
<li><p><strong>Logger facades</strong>: <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/logger.py</span></code></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">SyncLoggerFacade</span></code> and <code class="docutils literal notranslate"><span class="pre">AsyncLoggerFacade</span></code> enqueue events into a non-blocking ring queue, manage worker lifecycle, handle dedupe/sampling caches, implement bind/unbind.</p></li>
</ul>
</li>
<li><p><strong>Worker pipeline</strong>: <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/worker.py</span></code></p>
<ul>
<li><p>Batch loop, pipeline stage ordering, serialization fast path, per-stage error containment, metrics recording.</p></li>
</ul>
</li>
<li><p><strong>Serialization</strong>: <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/serialization.py</span></code> and <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/envelope.py</span></code></p>
<ul>
<li><p>Canonical envelope building (<code class="docutils literal notranslate"><span class="pre">build_envelope</span></code>) and envelope serialization (<code class="docutils literal notranslate"><span class="pre">serialize_envelope</span></code>) using <code class="docutils literal notranslate"><span class="pre">orjson</span></code>.</p></li>
</ul>
</li>
<li><p><strong>Sinks and sink-writers</strong>:</p>
<ul>
<li><p>Fanout + circuit breaker wrapper: <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/sink_writers.py</span></code></p></li>
<li><p>Fallback to stderr on failure: <code class="docutils literal notranslate"><span class="pre">src/fapilog/plugins/sinks/fallback.py</span></code></p></li>
<li><p>Built-in sinks: <code class="docutils literal notranslate"><span class="pre">src/fapilog/plugins/sinks/*</span></code> and <code class="docutils literal notranslate"><span class="pre">src/fapilog/plugins/sinks/contrib/*</span></code></p></li>
</ul>
</li>
<li><p><strong>FastAPI integration layer</strong>:</p>
<ul>
<li><p>Setup helper/lifespan: <code class="docutils literal notranslate"><span class="pre">src/fapilog/fastapi/setup.py</span></code></p></li>
<li><p>Request context extraction: <code class="docutils literal notranslate"><span class="pre">src/fapilog/fastapi/context.py</span></code></p></li>
<li><p>Request completion/error logging: <code class="docutils literal notranslate"><span class="pre">src/fapilog/fastapi/logging.py</span></code></p></li>
</ul>
</li>
</ul>
</section>
<section id="data-control-flow-text-diagram">
<h4>Data/control flow (text + diagram)<a class="headerlink" href="#data-control-flow-text-diagram" title="Link to this heading"></a></h4>
<p>A simplified view of the main hot path:</p>
<ol class="arabic simple">
<li><p>App calls <code class="docutils literal notranslate"><span class="pre">logger.info(...)</span></code> (sync or async facade) (<code class="docutils literal notranslate"><span class="pre">src/fapilog/core/logger.py</span></code>).</p></li>
<li><p>Facade builds a payload envelope (timestamp, level, message, context, data, diagnostics) via <code class="docutils literal notranslate"><span class="pre">build_envelope()</span></code> (<code class="docutils literal notranslate"><span class="pre">src/fapilog/core/logger.py</span></code> → <code class="docutils literal notranslate"><span class="pre">build_envelope</span></code> in <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/envelope.py</span></code>).</p></li>
<li><p>Payload is enqueued into a bounded queue (<code class="docutils literal notranslate"><span class="pre">NonBlockingRingQueue</span></code>) and a worker loop drains it in batches (<code class="docutils literal notranslate"><span class="pre">src/fapilog/core/logger.py</span></code>; <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/worker.py</span></code>).</p></li>
<li><p>Worker pipeline stages: filters → enrichers → redactors → processors → sinks (<code class="docutils literal notranslate"><span class="pre">src/fapilog/core/worker.py</span></code>).</p></li>
<li><p>Sink writes are protected by optional circuit breaker and fallback-to-stderr-on-failure (<code class="docutils literal notranslate"><span class="pre">src/fapilog/core/sink_writers.py</span></code>; <code class="docutils literal notranslate"><span class="pre">src/fapilog/plugins/sinks/fallback.py</span></code>).</p></li>
</ol>
<p>Mermaid diagram (conceptual, based on code in <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/worker.py</span></code> and <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/logger.py</span></code>):</p>
<div class="highlight-mermaid notranslate"><div class="highlight"><pre><span></span>flowchart LR
  A[App code\nSyncLoggerFacade/AsyncLoggerFacade] --&gt; B[build_envelope()\ncore/envelope.py]
  B --&gt; C[Bounded queue\nNonBlockingRingQueue]
  C --&gt; D[Worker batch loop\ncore/worker.py]
  D --&gt; E[Filters\nplugins/filters]
  E --&gt; F[Enrichers\nplugins/enrichers]
  F --&gt; G[Redactors\nplugins/redactors]
  G --&gt; H[Processors\nplugins/processors]
  H --&gt; I[SinkWriterGroup\ncore/sink_writers.py]
  I --&gt;|ok| J[Sinks\nstdout/file/http/loki/...]
  I --&gt;|error| K[stderr fallback\nplugins/sinks/fallback.py\nminimal_redact]
</pre></div>
</div>
</section>
</section>
<section id="extensibility-points">
<h3>Extensibility points<a class="headerlink" href="#extensibility-points" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Plugin types</strong>: sinks, enrichers, processors, redactors, filters (<code class="docutils literal notranslate"><span class="pre">docs/plugins/contracts-and-versioning.md</span></code>; plugin loader <code class="docutils literal notranslate"><span class="pre">src/fapilog/plugins/loader.py</span></code>).</p></li>
<li><p><strong>External plugin loading is gated</strong>: default blocks entry points unless allowlisted/allowed (<code class="docutils literal notranslate"><span class="pre">docs/user-guide/configuration.md</span></code> “Plugin Security”; <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/settings.py</span></code> <code class="docutils literal notranslate"><span class="pre">PluginsSettings.allow_external=False</span></code>; enforcement in <code class="docutils literal notranslate"><span class="pre">src/fapilog/plugins/loader.py</span></code> <code class="docutils literal notranslate"><span class="pre">_is_external_allowed()</span></code> and in <code class="docutils literal notranslate"><span class="pre">src/fapilog/__init__.py</span></code> <code class="docutils literal notranslate"><span class="pre">_load_plugins()</span></code>).</p></li>
</ul>
</section>
<section id="code-quality-review-maintainability-clarity-hotspots">
<h3>Code quality review (maintainability, clarity, hotspots)<a class="headerlink" href="#code-quality-review-maintainability-clarity-hotspots" title="Link to this heading"></a></h3>
<section id="strengths-evidence-based">
<h4>Strengths (evidence-based)<a class="headerlink" href="#strengths-evidence-based" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><strong>Clear pipeline stage ordering with rationale</strong>: worker documents stage order and error-handling strategy (<code class="docutils literal notranslate"><span class="pre">src/fapilog/core/worker.py</span></code> docstring on <code class="docutils literal notranslate"><span class="pre">_flush_batch</span></code>).</p></li>
<li><p><strong>Defensive “logging must not crash the app” posture</strong>: many best-effort try/except blocks, especially around diagnostics and plugin lifecycle (<code class="docutils literal notranslate"><span class="pre">src/fapilog/__init__.py</span></code> <code class="docutils literal notranslate"><span class="pre">_start_plugins_sync()</span></code> and <code class="docutils literal notranslate"><span class="pre">_stop_plugins</span></code>; <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/diagnostics.py</span></code> never raises; <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/worker.py</span></code> stage exception handling).</p></li>
<li><p><strong>Robust CI quality gates</strong>: lint, mypy strictness (disallow untyped defs), coverage floor 90, diff coverage enforcement, contract tests, doc build with warnings-as-errors (<code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> tools; <code class="docutils literal notranslate"><span class="pre">.github/workflows/ci.yml</span></code>).</p></li>
<li><p><strong>Security hygiene in dependency selection</strong>: <code class="docutils literal notranslate"><span class="pre">orjson&gt;=3.9.15</span></code> with explicit CVE note (<code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>).</p></li>
</ul>
</section>
<section id="complexity-hotspots-maintenance-risks">
<h4>Complexity hotspots / maintenance risks<a class="headerlink" href="#complexity-hotspots-maintenance-risks" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">src/fapilog/core/logger.py</span></code> is a “god module”</strong>: it contains queueing logic, worker orchestration, backpressure logic, sampling, dedupe, bind/unbind, health checks, drain semantics, plus sync/async differences. This is powerful, but a high-risk hotspot.</p></li>
<li><p><strong>“Enterprise scaffolding” modules</strong> may be overbuilt relative to core logging needs:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">src/fapilog/core/errors.py</span></code> is extremely large and defines a broad error taxonomy plus context capture machinery; only some parts are clearly used by the logging pipeline (e.g., <code class="docutils literal notranslate"><span class="pre">SinkWriteError</span></code> is used by sinks like <code class="docutils literal notranslate"><span class="pre">rotating_file</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">src/fapilog/core/context.py</span></code> implements an execution-context manager and a decorator <code class="docutils literal notranslate"><span class="pre">preserve_context</span></code> with non-obvious semantics (it <code class="docutils literal notranslate"><span class="pre">create_task()</span></code> inside <code class="docutils literal notranslate"><span class="pre">context.run(...)</span></code>, returning a task; this can surprise callers) (<code class="docutils literal notranslate"><span class="pre">src/fapilog/core/context.py</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">src/fapilog/core/access_control.py</span></code> and <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/encryption.py</span></code> provide validation schemas, but it’s unclear how they translate into actual log protection in the pipeline.</p></li>
<li><p>Risk: features that look “enterprise-ready” in docs/marketing, but behave as mostly “config schema placeholders.”</p></li>
</ul>
</li>
</ul>
</section>
</section>
<section id="error-handling-quality-logging-strategy-diagnostics">
<h3>Error handling quality, logging strategy, diagnostics<a class="headerlink" href="#error-handling-quality-logging-strategy-diagnostics" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Internal diagnostics</strong>: structured JSON lines, rate-limited token bucket, disabled by default, emitted to stderr by default (<code class="docutils literal notranslate"><span class="pre">src/fapilog/core/diagnostics.py</span></code>; <code class="docutils literal notranslate"><span class="pre">docs/user-guide/reliability-defaults.md</span></code>).</p></li>
<li><p><strong>Sink failure behavior</strong>:</p>
<ul>
<li><p>Primary sink failure triggers fallback to stderr with minimal redaction by default (<code class="docutils literal notranslate"><span class="pre">src/fapilog/plugins/sinks/fallback.py</span></code>; <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/sink_writers.py</span></code> wraps sink exceptions and handles false returns).</p></li>
<li><p>Fallback can be configured for redaction mode (<code class="docutils literal notranslate"><span class="pre">inherit</span></code>, <code class="docutils literal notranslate"><span class="pre">minimal</span></code>, <code class="docutils literal notranslate"><span class="pre">none</span></code>) (<code class="docutils literal notranslate"><span class="pre">src/fapilog/plugins/sinks/fallback.py</span></code>; <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/settings.py</span></code> <code class="docutils literal notranslate"><span class="pre">fallback_redact_mode</span></code>).</p></li>
</ul>
</li>
<li><p><strong>Error dedupe</strong>: avoids log storms for repeated ERROR messages (<code class="docutils literal notranslate"><span class="pre">src/fapilog/core/logger.py</span></code> <code class="docutils literal notranslate"><span class="pre">_prepare_payload()</span></code> dedupe logic; <code class="docutils literal notranslate"><span class="pre">docs/user-guide/reliability-defaults.md</span></code>).</p></li>
</ul>
</section>
<section id="testing-strategy">
<h3>Testing strategy<a class="headerlink" href="#testing-strategy" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Contract tests</strong>: explicitly run in CI as a dedicated job to catch schema drift (<code class="docutils literal notranslate"><span class="pre">.github/workflows/ci.yml</span></code> <code class="docutils literal notranslate"><span class="pre">contract-tests</span></code>; <code class="docutils literal notranslate"><span class="pre">tests/contract/*</span></code>).</p></li>
<li><p><strong>Integration tests</strong>: include FastAPI middleware and external sinks (CloudWatch via LocalStack, Loki, Postgres) (<code class="docutils literal notranslate"><span class="pre">tests/integration/*</span></code> list).</p></li>
<li><p><strong>Property-based tests</strong>: present (<code class="docutils literal notranslate"><span class="pre">tests/property/*</span></code>).</p></li>
<li><p><strong>Test categorization</strong>: CI uses markers (critical/security/flaky/slow/integration) to optimize PR runs (<code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> <code class="docutils literal notranslate"><span class="pre">pytest.ini_options.markers</span></code>; <code class="docutils literal notranslate"><span class="pre">.github/workflows/ci.yml</span></code> selective test run logic).</p></li>
</ul>
</section>
<section id="type-safety-public-api-stability">
<h3>Type safety / public API stability<a class="headerlink" href="#type-safety-public-api-stability" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Typed package</strong> with <code class="docutils literal notranslate"><span class="pre">py.typed</span></code> and “Typed” classifier (<code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>; <code class="docutils literal notranslate"><span class="pre">src/fapilog/py.typed</span></code>).</p></li>
<li><p><strong>Mypy strict configuration</strong>: <code class="docutils literal notranslate"><span class="pre">disallow_untyped_defs</span> <span class="pre">=</span> <span class="pre">true</span></code>, <code class="docutils literal notranslate"><span class="pre">disallow_incomplete_defs</span> <span class="pre">=</span> <span class="pre">true</span></code>, etc. (<code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> <code class="docutils literal notranslate"><span class="pre">[tool.mypy]</span></code>).</p></li>
<li><p><strong>Public API policy</strong>: modules define <code class="docutils literal notranslate"><span class="pre">__all__</span></code> to control public surface (<code class="docutils literal notranslate"><span class="pre">CONTRIBUTING.md</span></code> “Public API Policy”; <code class="docutils literal notranslate"><span class="pre">src/fapilog/__init__.py</span></code> exports list).</p></li>
</ul>
</section>
<section id="performance-considerations">
<h3>Performance considerations<a class="headerlink" href="#performance-considerations" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Benchmarks exist and are documented</strong>: <code class="docutils literal notranslate"><span class="pre">docs/user-guide/benchmarks.md</span></code> + <code class="docutils literal notranslate"><span class="pre">scripts/benchmarking.py</span></code> + CI benchmark smoke (<code class="docutils literal notranslate"><span class="pre">.github/workflows/ci.yml</span></code>).</p></li>
<li><p><strong>Design explicitly trades steady-state fast-sink performance for slow-sink latency protection</strong>:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">docs/user-guide/benchmarks.md</span></code> shows fapilog is slower than stdlib for fast local file I/O (throughput and latency).</p></li>
<li><p>Under slow sink delay, fapilog dramatically reduces app-side latency (stdlib ~2ms vs fapilog ~0.286ms avg) (<code class="docutils literal notranslate"><span class="pre">docs/user-guide/benchmarks.md</span></code> slow-sink results).</p></li>
</ul>
</li>
<li><p><strong>Hot path optimizations</strong>:</p>
<ul>
<li><p>Caches settings-derived sampling/dedupe/strict-mode values at logger init to avoid per-call Settings instantiation (<code class="docutils literal notranslate"><span class="pre">src/fapilog/core/logger.py</span></code> <code class="docutils literal notranslate"><span class="pre">_common_init()</span></code> comment “Story 1.23, 1.25”).</p></li>
<li><p>Serialization fast-path (<code class="docutils literal notranslate"><span class="pre">serialize_in_flush</span></code>) allows sinks supporting <code class="docutils literal notranslate"><span class="pre">write_serialized</span></code> to avoid re-serializing per sink (<code class="docutils literal notranslate"><span class="pre">src/fapilog/core/worker.py</span></code>; <code class="docutils literal notranslate"><span class="pre">docs/user-guide/performance-tuning.md</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">RotatingFileSink</span></code> uses <code class="docutils literal notranslate"><span class="pre">os.writev</span></code> when available and segments memoryviews to avoid copying (<code class="docutils literal notranslate"><span class="pre">src/fapilog/plugins/sinks/rotating_file.py</span></code>; <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/serialization.py</span></code>).</p></li>
</ul>
</li>
</ul>
</section>
<section id="security-posture-red-flags-required">
<h3>Security posture (RED FLAGS REQUIRED)<a class="headerlink" href="#security-posture-red-flags-required" title="Link to this heading"></a></h3>
<section id="positive-security-signals">
<h4>Positive security signals<a class="headerlink" href="#positive-security-signals" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><strong>External plugins blocked by default</strong> to reduce arbitrary-code execution risk from dependency supply chain (<code class="docutils literal notranslate"><span class="pre">docs/user-guide/configuration.md</span></code> “Plugin Security”; <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/settings.py</span></code> <code class="docutils literal notranslate"><span class="pre">PluginsSettings.allow_external=False</span></code>; enforcement in <code class="docutils literal notranslate"><span class="pre">src/fapilog/plugins/loader.py</span></code>).</p></li>
<li><p><strong>Fallback redaction</strong> masks common sensitive keys and recurses through nested dicts/lists, with recursion depth limit to avoid stack overflow (<code class="docutils literal notranslate"><span class="pre">src/fapilog/plugins/sinks/fallback.py</span></code>; <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/defaults.py</span></code> sensitive fields list).</p></li>
<li><p><strong>Webhook signing</strong> defaults to HMAC with timestamp (replay-resistance) and deprecates “secret-in-header” mode (<code class="docutils literal notranslate"><span class="pre">src/fapilog/plugins/sinks/webhook.py</span></code>; <code class="docutils literal notranslate"><span class="pre">docs/user-guide/webhook-security.md</span></code>).</p></li>
<li><p><strong>CI SBOM + vulnerability scan</strong>: CycloneDX SBOM and <code class="docutils literal notranslate"><span class="pre">pip-audit</span></code> output artifacts (<code class="docutils literal notranslate"><span class="pre">.github/workflows/security-sbom.yml</span></code>).</p></li>
<li><p><strong>Security policy</strong>: present (<code class="docutils literal notranslate"><span class="pre">SECURITY.md</span></code>).</p></li>
</ul>
</section>
<section id="red-flags-risks">
<h4>Red flags / risks<a class="headerlink" href="#red-flags-risks" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><strong>Risk: “redaction off by default” under common presets</strong>. <code class="docutils literal notranslate"><span class="pre">fastapi</span></code> preset disables redaction explicitly (<code class="docutils literal notranslate"><span class="pre">docs/user-guide/reliability-defaults.md</span></code>). For real services, this is a footgun unless teams always use <code class="docutils literal notranslate"><span class="pre">production</span></code> preset or custom settings.</p></li>
<li><p><strong>Risk: stderr fallback may still leak secrets outside the “minimal key list”</strong>. Minimal fallback redaction is key-name based (e.g., <code class="docutils literal notranslate"><span class="pre">password</span></code>, <code class="docutils literal notranslate"><span class="pre">token</span></code>) (<code class="docutils literal notranslate"><span class="pre">src/fapilog/core/defaults.py</span></code>). Secrets stored under non-obvious keys (e.g., <code class="docutils literal notranslate"><span class="pre">session</span></code>, <code class="docutils literal notranslate"><span class="pre">cookie</span></code>, <code class="docutils literal notranslate"><span class="pre">jwt</span></code>, <code class="docutils literal notranslate"><span class="pre">bearer</span></code>, nested structures with innocuous keys) can still leak during sink failures.</p></li>
<li><p><strong>Risk: “enterprise crypto/access control” looks like schema-only</strong>. Encryption/access control models exist (<code class="docutils literal notranslate"><span class="pre">src/fapilog/core/encryption.py</span></code>, <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/access_control.py</span></code>), but I did not find clear evidence in the core pipeline that events are encrypted or access-controlled at runtime. This can create a <strong>false sense of security</strong> if marketed as “enterprise-ready.” (If there is a processor that encrypts payloads, it was not in the sampled sink/processor set.)</p></li>
</ul>
</section>
<section id="risky-patterns-scan-what-i-checked">
<h4>Risky patterns scan (what I checked)<a class="headerlink" href="#risky-patterns-scan-what-i-checked" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p>I searched for <code class="docutils literal notranslate"><span class="pre">eval(</span></code> / <code class="docutils literal notranslate"><span class="pre">exec(</span></code> and found only a test using <code class="docutils literal notranslate"><span class="pre">exec(&quot;from</span> <span class="pre">fapilog</span> <span class="pre">import</span> <span class="pre">*&quot;,</span> <span class="pre">...)</span></code> (<code class="docutils literal notranslate"><span class="pre">tests/unit/test_public_api_exports.py</span></code>) and a docs statement claiming no eval risks (<code class="docutils literal notranslate"><span class="pre">docs/audits/...</span></code>). No runtime eval/exec found in sampled code.</p></li>
<li><p>I searched for <code class="docutils literal notranslate"><span class="pre">subprocess</span></code> usage; occurrences were in scripts/tests/docs, not in runtime library code (<code class="docutils literal notranslate"><span class="pre">scripts/check_*</span></code>, <code class="docutils literal notranslate"><span class="pre">scripts/publish_to_pypi.py</span></code>, etc.).</p></li>
<li><p>I searched for unsafe YAML loading; workflow validator uses <code class="docutils literal notranslate"><span class="pre">yaml.safe_load</span></code> (<code class="docutils literal notranslate"><span class="pre">.github/workflows/validate-workflows.yml</span></code>). No <code class="docutils literal notranslate"><span class="pre">yaml.load</span></code> hits in runtime code from the grep sample (only <code class="docutils literal notranslate"><span class="pre">safe_load</span></code> observed in workflows; other YAML references appear in docs/stories).</p></li>
</ul>
</section>
</section>
<section id="reliability-operability">
<h3>Reliability &amp; operability<a class="headerlink" href="#reliability-operability" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Backpressure and queue high-water mark</strong> tracked (<code class="docutils literal notranslate"><span class="pre">src/fapilog/core/worker.py</span></code> <code class="docutils literal notranslate"><span class="pre">enqueue_with_backpressure()</span></code> updates high watermark and records metrics).</p></li>
<li><p><strong>Circuit breaker</strong> for sinks prevents repeated failures from cascading (<code class="docutils literal notranslate"><span class="pre">src/fapilog/core/circuit_breaker.py</span></code>; used in <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/sink_writers.py</span></code> and some sinks).</p></li>
<li><p><strong>Graceful shutdown</strong>: <code class="docutils literal notranslate"><span class="pre">runtime()</span></code> and <code class="docutils literal notranslate"><span class="pre">runtime_async()</span></code> drain logger on exit (<code class="docutils literal notranslate"><span class="pre">src/fapilog/__init__.py</span></code>); worker stop-and-drain returns structured <code class="docutils literal notranslate"><span class="pre">DrainResult</span></code> (<code class="docutils literal notranslate"><span class="pre">src/fapilog/core/logger.py</span></code>).</p></li>
<li><p><strong>Health checks</strong>: sinks often implement <code class="docutils literal notranslate"><span class="pre">health_check()</span></code> (e.g., CloudWatch/Loki/Postgres) and logger has aggregated health method (<code class="docutils literal notranslate"><span class="pre">src/fapilog/core/logger.py</span></code> <code class="docutils literal notranslate"><span class="pre">check_health()</span></code>; <code class="docutils literal notranslate"><span class="pre">src/fapilog/plugins/health.py</span></code> exists per tree).</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="phase-4-documentation-quality-and-accuracy">
<h2>Phase 4 — Documentation Quality (and Accuracy)<a class="headerlink" href="#phase-4-documentation-quality-and-accuracy" title="Link to this heading"></a></h2>
<section id="docs-inventory">
<h3>Docs inventory<a class="headerlink" href="#docs-inventory" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Top-level README</strong>: strong feature overview, quick start, presets, FastAPI examples, stability section, architecture diagram (<code class="docutils literal notranslate"><span class="pre">README.md</span></code>).</p></li>
<li><p><strong>Sphinx docs site</strong>: large structured docs in <code class="docutils literal notranslate"><span class="pre">docs/</span></code>:</p>
<ul>
<li><p>User guide pages (configuration, reliability defaults, performance tuning, benchmarks, webhook security) (<code class="docutils literal notranslate"><span class="pre">docs/user-guide/*</span></code>).</p></li>
<li><p>Architecture docs and diagrams (<code class="docutils literal notranslate"><span class="pre">docs/architecture/*</span></code>, <code class="docutils literal notranslate"><span class="pre">docs/architecture-diagrams.md</span></code>).</p></li>
<li><p>Plugin guide and contracts/versioning (<code class="docutils literal notranslate"><span class="pre">docs/plugins/*</span></code>, <code class="docutils literal notranslate"><span class="pre">docs/plugin-guide.md</span></code>).</p></li>
<li><p>Troubleshooting pages (<code class="docutils literal notranslate"><span class="pre">docs/troubleshooting/*</span></code>).</p></li>
<li><p>API reference (<code class="docutils literal notranslate"><span class="pre">docs/api-reference/*</span></code>).</p></li>
<li><p>Contributing guides and test category docs (<code class="docutils literal notranslate"><span class="pre">docs/contributing/*</span></code>).</p></li>
</ul>
</li>
<li><p><strong>Docs quality gates</strong>: CI runs doc accuracy check and fails docs build on warnings (<code class="docutils literal notranslate"><span class="pre">.github/workflows/ci.yml</span></code> docs job).</p></li>
</ul>
</section>
<section id="onboarding-time-to-first-success">
<h3>Onboarding &amp; time-to-first-success<a class="headerlink" href="#onboarding-time-to-first-success" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Quick start is short</strong>: <code class="docutils literal notranslate"><span class="pre">get_logger()</span></code> and <code class="docutils literal notranslate"><span class="pre">runtime()</span></code> examples (<code class="docutils literal notranslate"><span class="pre">README.md</span></code>).</p></li>
<li><p><strong>FastAPI integration is straightforward</strong>: <code class="docutils literal notranslate"><span class="pre">setup_logging()</span></code> and <code class="docutils literal notranslate"><span class="pre">get_request_logger</span></code> shown in docs (<code class="docutils literal notranslate"><span class="pre">README.md</span></code>; <code class="docutils literal notranslate"><span class="pre">docs/user-guide/configuration.md</span></code>).</p></li>
</ul>
</section>
<section id="accuracy-completeness-spot-checks">
<h3>Accuracy &amp; completeness (spot checks)<a class="headerlink" href="#accuracy-completeness-spot-checks" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Docs are often tied to code paths</strong>: configuration docs reference Settings and env vars (<code class="docutils literal notranslate"><span class="pre">docs/user-guide/configuration.md</span></code>; implementation in <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/settings.py</span></code>).</p></li>
<li><p><strong>Benchmarks are reproducible</strong>: docs show exact command and script exists, CI smoke test runs it (<code class="docutils literal notranslate"><span class="pre">docs/user-guide/benchmarks.md</span></code>; <code class="docutils literal notranslate"><span class="pre">scripts/benchmarking.py</span></code>; <code class="docutils literal notranslate"><span class="pre">.github/workflows/ci.yml</span></code>).</p></li>
<li><p><strong>Detected docs accuracy concern</strong>: benchmark page lists “fapilog 0.3.6” (<code class="docutils literal notranslate"><span class="pre">docs/user-guide/benchmarks.md</span></code>), but the last local tag is <code class="docutils literal notranslate"><span class="pre">v0.3.5</span></code> and local version file is a dev version (<code class="docutils literal notranslate"><span class="pre">src/fapilog/_version.py</span></code>; <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">tag</span> <span class="pre">--list</span></code>). If published docs claim a stable <code class="docutils literal notranslate"><span class="pre">0.3.6</span></code>, that’s misleading unless it exists on PyPI and tag.</p></li>
</ul>
</section>
<section id="examples-quality">
<h3>Examples quality<a class="headerlink" href="#examples-quality" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>Examples directory includes multiple “tiered” examples:</p>
<ul>
<li><p>minimal fastapi one-liners (<code class="docutils literal notranslate"><span class="pre">examples/fastapi_one_liner/*</span></code>), metrics example (<code class="docutils literal notranslate"><span class="pre">examples/fastapi_metrics/main.py</span></code>), async logging example, Loki/Postgres/CloudWatch setups with docker compose (<code class="docutils literal notranslate"><span class="pre">examples/*</span></code> per <code class="docutils literal notranslate"><span class="pre">LS</span></code>).</p></li>
</ul>
</li>
<li><p>It’s unclear if examples are executed in CI as “example tests.” I only saw <strong>benchmark smoke</strong> and <strong>sink-specific workflows</strong> exist (e.g., <code class="docutils literal notranslate"><span class="pre">.github/workflows/test-postgres-sink.yml</span></code> present per tree list), but I did not inspect those workflows here—so <strong>unknown</strong>.</p></li>
</ul>
</section>
<section id="api-reference-quality">
<h3>API reference quality<a class="headerlink" href="#api-reference-quality" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>There is a <code class="docutils literal notranslate"><span class="pre">docs/api-reference/</span></code> tree that appears extensive, likely Sphinx-generated (<code class="docutils literal notranslate"><span class="pre">docs/api-reference/index.md</span></code> and module pages exist per <code class="docutils literal notranslate"><span class="pre">LS</span></code>).</p></li>
<li><p>Public API control is described via <code class="docutils literal notranslate"><span class="pre">__all__</span></code> and enforced by a test using <code class="docutils literal notranslate"><span class="pre">exec(&quot;from</span> <span class="pre">fapilog</span> <span class="pre">import</span> <span class="pre">*&quot;,</span> <span class="pre">...)</span></code> (<code class="docutils literal notranslate"><span class="pre">CONTRIBUTING.md</span></code>; <code class="docutils literal notranslate"><span class="pre">tests/unit/test_public_api_exports.py</span></code> referenced by grep results).</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="phase-5-developer-experience-dx-review">
<h2>Phase 5 — Developer Experience (DX) Review<a class="headerlink" href="#phase-5-developer-experience-dx-review" title="Link to this heading"></a></h2>
<section id="dx-assessment-010-with-justification">
<h3>DX assessment (0–10) with justification<a class="headerlink" href="#dx-assessment-010-with-justification" title="Link to this heading"></a></h3>
<p><strong>DX score: 7.5 / 10</strong></p>
<p><strong>Why</strong></p>
<ul class="simple">
<li><p><strong>Strong onboarding</strong>: presets + <code class="docutils literal notranslate"><span class="pre">get_logger()</span></code> + <code class="docutils literal notranslate"><span class="pre">runtime()</span></code> + clear FastAPI “one-liner” (<code class="docutils literal notranslate"><span class="pre">README.md</span></code>; <code class="docutils literal notranslate"><span class="pre">docs/user-guide/configuration.md</span></code>; <code class="docutils literal notranslate"><span class="pre">src/fapilog/fastapi/setup.py</span></code>).</p></li>
<li><p><strong>Clear guardrails</strong>: strict config schema via Pydantic, env var mapping, diagnostics that don’t crash apps (<code class="docutils literal notranslate"><span class="pre">src/fapilog/core/settings.py</span></code>; <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/diagnostics.py</span></code>).</p></li>
<li><p><strong>Great CI-quality discipline</strong> helps contributors and downstream users trust changes (<code class="docutils literal notranslate"><span class="pre">.github/workflows/ci.yml</span></code>; <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> tool configs).</p></li>
</ul>
<p><strong>DX pain points</strong></p>
<ul class="simple">
<li><p><strong>Tradeoffs are real and non-obvious</strong>: in a fast-sink environment, fapilog is dramatically slower than stdlib logging (<code class="docutils literal notranslate"><span class="pre">docs/user-guide/benchmarks.md</span></code>). Users must internalize “use this only if slow sinks / bursts matter.”</p></li>
<li><p><strong>Preset safety mismatch</strong>: “fastapi preset” disables redaction (security footgun) (<code class="docutils literal notranslate"><span class="pre">docs/user-guide/reliability-defaults.md</span></code>).</p></li>
<li><p><strong>Complex configuration surface</strong>: Settings schema includes “security/encryption/access_control” that may not materially affect pipeline behavior; can confuse users about what’s actually enforced (<code class="docutils literal notranslate"><span class="pre">src/fapilog/core/settings.py</span></code>; <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/encryption.py</span></code>; <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/access_control.py</span></code>).</p></li>
</ul>
</section>
<section id="top-10-dx-improvements-actionable">
<h3>Top 10 DX improvements (actionable)<a class="headerlink" href="#top-10-dx-improvements-actionable" title="Link to this heading"></a></h3>
<ol class="arabic simple">
<li><p><strong>Make preset safety explicit in FastAPI docs</strong>: call out that <code class="docutils literal notranslate"><span class="pre">preset=&quot;fastapi&quot;</span></code> disables redaction by default (<code class="docutils literal notranslate"><span class="pre">docs/user-guide/reliability-defaults.md</span></code>) and provide a recommended “fastapi+redaction” preset snippet.</p></li>
<li><p><strong>Align published docs to released versions</strong>: avoid referencing <code class="docutils literal notranslate"><span class="pre">0.3.6</span></code> if only <code class="docutils literal notranslate"><span class="pre">0.3.5</span></code> is released; add version banner derived from tag (<code class="docutils literal notranslate"><span class="pre">docs/user-guide/benchmarks.md</span></code>; <code class="docutils literal notranslate"><span class="pre">src/fapilog/_version.py</span></code>).</p></li>
<li><p><strong>Add a “choose fapilog vs alternatives” decision tree</strong> that uses the benchmark results quantitatively (linking to <code class="docutils literal notranslate"><span class="pre">docs/user-guide/benchmarks.md</span></code>).</p></li>
<li><p><strong>Provide “safe-by-default FastAPI” one-liner</strong> (or documented config) that enables at least URL credential redaction for typical web apps.</p></li>
<li><p><strong>Clarify which “enterprise” modules are schema-only</strong> vs enforced runtime behavior (e.g., encryption/access control) to avoid a false security impression.</p></li>
<li><p><strong>Add a “production default config” generator</strong> (not necessarily CLI) that prints env var template; CLI is currently placeholder (<code class="docutils literal notranslate"><span class="pre">src/fapilog/cli/main.py</span></code>).</p></li>
<li><p><strong>Document memory sizing guidance</strong>: convert the “10MB peak” benchmark into recommended queue sizing heuristics (<code class="docutils literal notranslate"><span class="pre">docs/user-guide/benchmarks.md</span></code>; <code class="docutils literal notranslate"><span class="pre">docs/user-guide/performance-tuning.md</span></code>).</p></li>
<li><p><strong>Document failure mode ordering</strong>: “primary sink failure → fallback to stderr (min redaction) → drop” in one prominent place; current info is split (<code class="docutils literal notranslate"><span class="pre">docs/user-guide/configuration.md</span></code>; <code class="docutils literal notranslate"><span class="pre">src/fapilog/plugins/sinks/fallback.py</span></code>).</p></li>
<li><p><strong>Add “example validation in CI”</strong> (if not already): run <code class="docutils literal notranslate"><span class="pre">examples/*</span></code> minimal smoke in CI and pin expected behavior.</p></li>
<li><p><strong>Tame the global plugin validation mode</strong>: document that it is a module-level global in <code class="docutils literal notranslate"><span class="pre">plugins/loader.py</span></code> and specify best practice for multi-logger scenarios.</p></li>
</ol>
</section>
</section>
<hr class="docutils" />
<section id="phase-6-competitor-landscape-comparative-analysis">
<h2>Phase 6 — Competitor Landscape &amp; Comparative Analysis<a class="headerlink" href="#phase-6-competitor-landscape-comparative-analysis" title="Link to this heading"></a></h2>
<section id="competitors-why-each-is-comparable">
<h3>Competitors (why each is comparable)<a class="headerlink" href="#competitors-why-each-is-comparable" title="Link to this heading"></a></h3>
<p>At least 7, with relevance and evidence:</p>
<ol class="arabic simple">
<li><p><strong>Python stdlib <code class="docutils literal notranslate"><span class="pre">logging</span></code> + <code class="docutils literal notranslate"><span class="pre">QueueHandler</span></code>/<code class="docutils literal notranslate"><span class="pre">QueueListener</span></code></strong></p>
<ul class="simple">
<li><p>Comparable because it provides a queue-backed non-blocking pattern, albeit at LogRecord level and without structured pipeline features.</p></li>
<li><p>Evidence: Python docs for <code class="docutils literal notranslate"><span class="pre">QueueHandler</span></code>/<code class="docutils literal notranslate"><span class="pre">QueueListener</span></code> (<code class="docutils literal notranslate"><span class="pre">https://docs.python.org/3.12/library/logging.handlers.html</span></code> via web search; also referenced conceptually in <code class="docutils literal notranslate"><span class="pre">docs/user-guide/comparisons.md</span></code>).</p></li>
</ul>
</li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">structlog</span></code></strong></p>
<ul class="simple">
<li><p>Comparable for structured logging and contextvars-based request/task context.</p></li>
<li><p>Evidence: <code class="docutils literal notranslate"><span class="pre">structlog.contextvars</span></code> docs (<code class="docutils literal notranslate"><span class="pre">https://www.structlog.org/en/25.3.0/contextvars.html</span></code> via web search); fapilog’s own comparison page (<code class="docutils literal notranslate"><span class="pre">docs/user-guide/comparisons.md</span></code>).</p></li>
</ul>
</li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">loguru</span></code></strong></p>
<ul class="simple">
<li><p>Comparable for ergonomic structured-ish logging; supports <code class="docutils literal notranslate"><span class="pre">enqueue=True</span></code> for queued logging, <code class="docutils literal notranslate"><span class="pre">serialize=True</span></code> for JSON output.</p></li>
<li><p>Evidence: Loguru docs for <code class="docutils literal notranslate"><span class="pre">logger.add(...,</span> <span class="pre">enqueue=True,</span> <span class="pre">serialize=True)</span></code> (<code class="docutils literal notranslate"><span class="pre">https://loguru.readthedocs.io/en/stable/api/logger.html</span></code> via web search); fapilog comparison page (<code class="docutils literal notranslate"><span class="pre">docs/user-guide/comparisons.md</span></code>).</p></li>
</ul>
</li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">aiologger</span></code></strong></p>
<ul class="simple">
<li><p>Comparable as an asyncio-focused async logging library.</p></li>
<li><p>Evidence: aiologger docs (<code class="docutils literal notranslate"><span class="pre">https://async-worker.github.io/aiologger/</span></code> via web search) emphasize async logger/handlers; note file logging uses threadpool via aiofiles.</p></li>
</ul>
</li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">python-json-logger</span></code></strong></p>
<ul class="simple">
<li><p>Comparable as a common structured JSON approach layered on stdlib logging.</p></li>
<li><p>Evidence: python-json-logger quickstart docs (<code class="docutils literal notranslate"><span class="pre">https://nhairs.github.io/python-json-logger/latest/quickstart/</span></code> via web search).</p></li>
</ul>
</li>
<li><p><strong>OpenTelemetry Python Logs SDK</strong></p>
<ul class="simple">
<li><p>Comparable for structured logging pipelines in observability ecosystems and for correlation with traces.</p></li>
<li><p>Evidence: OpenTelemetry logs docs and SDK reference (<code class="docutils literal notranslate"><span class="pre">https://opentelemetry-python.readthedocs.io/en/latest/sdk/_logs.html</span></code>, <code class="docutils literal notranslate"><span class="pre">https://opentelemetry.io/docs/zero-code/python/logs-example/</span></code> via web search).</p></li>
</ul>
</li>
<li><p><strong>“DIY” approach: stdlib logging + JSON formatter + custom handlers/sinks</strong></p>
<ul class="simple">
<li><p>Not a single library, but a very real competitor in practice. It maps to: <code class="docutils literal notranslate"><span class="pre">QueueHandler</span></code>/<code class="docutils literal notranslate"><span class="pre">QueueListener</span></code> + JSON formatter + custom error handling.</p></li>
</ul>
</li>
</ol>
</section>
<section id="capability-comparison-matrix">
<h3>Capability comparison matrix<a class="headerlink" href="#capability-comparison-matrix" title="Link to this heading"></a></h3>
<p>Support level: <strong>None / Partial / Full</strong>.</p>
<p>Key:</p>
<ul class="simple">
<li><p><strong>Full</strong> = built-in feature with reasonable ergonomics.</p></li>
<li><p><strong>Partial</strong> = possible but requires non-trivial custom wiring or lacks key parts (backpressure, redaction stage, etc.).</p></li>
<li><p><strong>None</strong> = not meaningfully supported.</p></li>
</ul>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Capability</p></th>
<th class="head"><p><strong>fapilog</strong></p></th>
<th class="head"><p>stdlib + Queue*</p></th>
<th class="head"><p>structlog</p></th>
<th class="head"><p>loguru</p></th>
<th class="head"><p>aiologger</p></th>
<th class="head"><p>python-json-logger</p></th>
<th class="head"><p>OTel Logs SDK</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Non-blocking pipeline under slow sinks</p></td>
<td><p><strong>Full</strong> (<code class="docutils literal notranslate"><span class="pre">core/logger.py</span></code>, <code class="docutils literal notranslate"><span class="pre">worker.py</span></code>)</p></td>
<td><p>Partial (queue decoupling, but custom backpressure/flush semantics)</p></td>
<td><p>Partial (depends on handlers; no built-in queue/backpressure)</p></td>
<td><p>Partial (<code class="docutils literal notranslate"><span class="pre">enqueue=True</span></code>, but semantics differ)</p></td>
<td><p>Partial (async API; file uses threadpool)</p></td>
<td><p>None</p></td>
<td><p>Partial (batch processors/exporters; depends on setup)</p></td>
</tr>
<tr class="row-odd"><td><p>Bounded queue + backpressure/drop policy</p></td>
<td><p><strong>Full</strong> (<code class="docutils literal notranslate"><span class="pre">worker.enqueue_with_backpressure</span></code>)</p></td>
<td><p>Partial (queue size can bound; policy is custom)</p></td>
<td><p>None</p></td>
<td><p>Partial (queue exists; policy differs)</p></td>
<td><p>Partial</p></td>
<td><p>None</p></td>
<td><p>Partial (batch processor queueing; different model)</p></td>
</tr>
<tr class="row-even"><td><p>Structured JSON out-of-the-box</p></td>
<td><p><strong>Full</strong> (envelope + stdout_json)</p></td>
<td><p>Partial (formatter required)</p></td>
<td><p>Full</p></td>
<td><p>Partial (<code class="docutils literal notranslate"><span class="pre">serialize=True</span></code> outputs JSON record)</p></td>
<td><p>Partial (JsonLogger)</p></td>
<td><p>Full (formatter)</p></td>
<td><p>Full (OTLP/record model)</p></td>
</tr>
<tr class="row-odd"><td><p>Context binding via ContextVar</p></td>
<td><p><strong>Full</strong> (<code class="docutils literal notranslate"><span class="pre">bind</span></code>, FastAPI middleware)</p></td>
<td><p>Partial (filters/adapters)</p></td>
<td><p>Full (contextvars helpers)</p></td>
<td><p>Full (contextualize)</p></td>
<td><p>Partial</p></td>
<td><p>Partial</p></td>
<td><p>Full (context propagation, resource/span correlation)</p></td>
</tr>
<tr class="row-even"><td><p>Redaction stage (field/regex/url)</p></td>
<td><p><strong>Full</strong> (<code class="docutils literal notranslate"><span class="pre">plugins/redactors/*</span></code>)</p></td>
<td><p>None</p></td>
<td><p>None (requires custom processors)</p></td>
<td><p>None</p></td>
<td><p>None</p></td>
<td><p>None</p></td>
<td><p>Partial (depends on processors/exporters; not typical)</p></td>
</tr>
<tr class="row-odd"><td><p>Built-in cloud sinks (CloudWatch/Loki)</p></td>
<td><p><strong>Full</strong> (<code class="docutils literal notranslate"><span class="pre">plugins/sinks/contrib/*</span></code>)</p></td>
<td><p>Partial (handlers exist, e.g., watchtower for CloudWatch—external)</p></td>
<td><p>Partial</p></td>
<td><p>Partial</p></td>
<td><p>None</p></td>
<td><p>None</p></td>
<td><p>Full/Partial (exporters exist; not sink-per-service style)</p></td>
</tr>
<tr class="row-even"><td><p>Metrics for pipeline health (queue depth/drops)</p></td>
<td><p><strong>Partial/Full</strong> (internal metrics hooks; optional)</p></td>
<td><p>Partial</p></td>
<td><p>None</p></td>
<td><p>Partial</p></td>
<td><p>None</p></td>
<td><p>None</p></td>
<td><p>Full (telemetry metrics possible, but different focus)</p></td>
</tr>
<tr class="row-odd"><td><p>FastAPI “one-liner” integration</p></td>
<td><p><strong>Full</strong> (<code class="docutils literal notranslate"><span class="pre">fastapi/setup.py</span></code>)</p></td>
<td><p>Partial (manual wiring)</p></td>
<td><p>Partial</p></td>
<td><p>Partial</p></td>
<td><p>Partial</p></td>
<td><p>Partial</p></td>
<td><p>Partial (logging handler + instrumentation)</p></td>
</tr>
<tr class="row-even"><td><p>Tested contract/schemas</p></td>
<td><p><strong>Full</strong> (contract tests + JSON schema validation in repo)</p></td>
<td><p>None</p></td>
<td><p>Partial</p></td>
<td><p>Partial</p></td>
<td><p>Partial</p></td>
<td><p>Partial</p></td>
<td><p>Full (spec-driven, but not project-local)</p></td>
</tr>
</tbody>
</table>
</section>
<section id="differentiation-narrative">
<h3>Differentiation narrative<a class="headerlink" href="#differentiation-narrative" title="Link to this heading"></a></h3>
<section id="where-fapilog-is-clearly-better">
<h4>Where <code class="docutils literal notranslate"><span class="pre">fapilog</span></code> is clearly better<a class="headerlink" href="#where-fapilog-is-clearly-better" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><strong>First-class backpressure + bounded queue semantics</strong> integrated into API, not left as “DIY with QueueHandler” (<code class="docutils literal notranslate"><span class="pre">docs/user-guide/reliability-defaults.md</span></code>; <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/worker.py</span></code>; <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/logger.py</span></code>).</p></li>
<li><p><strong>Redaction as an explicit pipeline stage</strong> (rare in Python logging libraries) with default guardrails (<code class="docutils literal notranslate"><span class="pre">docs/user-guide/reliability-defaults.md</span></code>; redactors in <code class="docutils literal notranslate"><span class="pre">src/fapilog/plugins/redactors/*</span></code>; fallback redaction <code class="docutils literal notranslate"><span class="pre">src/fapilog/plugins/sinks/fallback.py</span></code>).</p></li>
<li><p><strong>Sink ecosystem with operational protections</strong> (circuit breaker, retries, batching, size-limit enforcement) included in the library for common targets (<code class="docutils literal notranslate"><span class="pre">src/fapilog/plugins/sinks/contrib/cloudwatch.py</span></code> limits + token handling; <code class="docutils literal notranslate"><span class="pre">loki.py</span></code> rate limit handling; <code class="docutils literal notranslate"><span class="pre">postgres.py</span></code> retries + table/index creation).</p></li>
</ul>
</section>
<section id="where-it-is-behind-weaker">
<h4>Where it is behind / weaker<a class="headerlink" href="#where-it-is-behind-weaker" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><strong>Fast-sink performance</strong> is substantially worse than stdlib logging in benchmarks (throughput, latency, memory) (<code class="docutils literal notranslate"><span class="pre">docs/user-guide/benchmarks.md</span></code>).</p></li>
<li><p><strong>0.x stability reality</strong>: while README claims “core APIs stable within minor versions,” it’s still a pre-1.0 project and includes breaking changes in “Unreleased” (<code class="docutils literal notranslate"><span class="pre">README.md</span></code> “Stability”; <code class="docutils literal notranslate"><span class="pre">CHANGELOG.md</span></code> indicates multiple breaking changes in Unreleased).</p></li>
<li><p><strong>Docs/version drift risk</strong>: docs referencing an unreleased version undermines confidence for adopters (<code class="docutils literal notranslate"><span class="pre">docs/user-guide/benchmarks.md</span></code> vs <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">tag</span></code> and <code class="docutils literal notranslate"><span class="pre">_version.py</span></code>).</p></li>
</ul>
</section>
<section id="switching-costs">
<h4>Switching costs<a class="headerlink" href="#switching-costs" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p>From <strong>stdlib/structlog/loguru</strong> to fapilog:</p>
<ul>
<li><p>You’re adopting a new schema (context/diagnostics/data, RFC3339 timestamps) (<code class="docutils literal notranslate"><span class="pre">src/fapilog/core/serialization.py</span></code>; <code class="docutils literal notranslate"><span class="pre">CHANGELOG.md</span></code> schema breaks).</p></li>
<li><p>You gain structured pipeline features but must validate operational behavior under your workloads (queue sizing, drop policy, sink throughput).</p></li>
</ul>
</li>
<li><p>From <strong>fapilog</strong> to competitors:</p>
<ul>
<li><p>If you depend on redaction/backpressure semantics, you’ll be re-implementing these in competitors (especially redaction stage and fallback safety).</p></li>
</ul>
</li>
</ul>
</section>
</section>
<section id="recommendations-when-to-pick-which">
<h3>Recommendations (when to pick which)<a class="headerlink" href="#recommendations-when-to-pick-which" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Pick <code class="docutils literal notranslate"><span class="pre">fapilog</span></code> when</strong>:</p>
<ul>
<li><p>You have <strong>slow sinks</strong> (network/log collectors) or <strong>burst traffic</strong> and you must protect request latency SLOs (<code class="docutils literal notranslate"><span class="pre">README.md</span></code> “Non‑blocking under slow sinks”; <code class="docutils literal notranslate"><span class="pre">docs/user-guide/benchmarks.md</span></code> slow-sink results; <code class="docutils literal notranslate"><span class="pre">docs/user-guide/reliability-defaults.md</span></code>).</p></li>
<li><p>You need <strong>built-in redaction guardrails</strong> and want them to be part of the logging pipeline, not ad-hoc per call.</p></li>
<li><p>You want <strong>FastAPI integration</strong> that also sets request/trace context (<code class="docutils literal notranslate"><span class="pre">src/fapilog/fastapi/context.py</span></code>, <code class="docutils literal notranslate"><span class="pre">setup.py</span></code>).</p></li>
</ul>
</li>
<li><p><strong>Pick stdlib logging (optionally with QueueHandler/Listener) when</strong>:</p>
<ul>
<li><p>Your sinks are local/fast and performance matters more than slow-sink resilience (<code class="docutils literal notranslate"><span class="pre">docs/user-guide/benchmarks.md</span></code>).</p></li>
<li><p>You already have an established logging stack (handlers, formatters, ingestion pipelines) and can accept DIY context/redaction.</p></li>
</ul>
</li>
<li><p><strong>Pick <code class="docutils literal notranslate"><span class="pre">structlog</span></code> when</strong>:</p>
<ul>
<li><p>You want structured logs and contextvars, but don’t need backpressure/sink pipeline behavior; you’re willing to rely on stdlib handlers and custom processors (<code class="docutils literal notranslate"><span class="pre">docs/user-guide/comparisons.md</span></code>; structlog contextvars docs via web search).</p></li>
</ul>
</li>
<li><p><strong>Pick <code class="docutils literal notranslate"><span class="pre">loguru</span></code> when</strong>:</p>
<ul>
<li><p>You want an ergonomic API and can leverage <code class="docutils literal notranslate"><span class="pre">enqueue=True</span></code>/<code class="docutils literal notranslate"><span class="pre">serialize=True</span></code>, and your operational needs are simpler than full backpressure + redaction pipeline (loguru docs via web search).</p></li>
</ul>
</li>
<li><p><strong>Pick <code class="docutils literal notranslate"><span class="pre">aiologger</span></code> when</strong>:</p>
<ul>
<li><p>You want a lightweight async logger and are fine with fewer features; especially if you only need async stream logging and not complex sinks/backpressure/redaction (aiologger docs via web search).</p></li>
</ul>
</li>
<li><p><strong>Pick OpenTelemetry Logs when</strong>:</p>
<ul>
<li><p>You’re standardizing on OTel for correlation and exporting logs/traces/metrics to an OTel collector; fapilog becomes a specialized alternative rather than default.</p></li>
</ul>
</li>
</ul>
</section>
<section id="competitive-position-rating-rank-1n-among-compared-set">
<h3>Competitive position rating (rank 1–N among compared set)<a class="headerlink" href="#competitive-position-rating-rank-1n-among-compared-set" title="Link to this heading"></a></h3>
<p>Compared set (N=7): fapilog, stdlib+Queue, structlog, loguru, aiologger, python-json-logger, OTel Logs.</p>
<ul class="simple">
<li><p><strong>Capability breadth</strong>: <strong>Rank 1/7</strong>
Rationale: fapilog bundles backpressure, redaction stage, multiple sinks, routing, and FastAPI integration in one cohesive package (<code class="docutils literal notranslate"><span class="pre">README.md</span></code>; <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/*</span></code>; <code class="docutils literal notranslate"><span class="pre">src/fapilog/plugins/sinks/contrib/*</span></code>).</p></li>
<li><p><strong>DX</strong>: <strong>Rank 2/7</strong>
Rationale: very strong docs + presets + FastAPI one-liner; only behind loguru’s famously minimal ceremony, but fapilog’s “power features” add complexity (<code class="docutils literal notranslate"><span class="pre">README.md</span></code>; <code class="docutils literal notranslate"><span class="pre">docs/user-guide/*</span></code>).</p></li>
<li><p><strong>Security</strong>: <strong>Rank 2/7</strong>
Rationale: plugin allowlisting + fallback redaction + SBOM/pip-audit are strong; OTel can be stronger if your org already runs mature collectors/exporters, but fapilog is unusually security-conscious for a logging library (<code class="docutils literal notranslate"><span class="pre">docs/user-guide/configuration.md</span></code>; <code class="docutils literal notranslate"><span class="pre">security-sbom.yml</span></code>; <code class="docutils literal notranslate"><span class="pre">fallback.py</span></code>).</p></li>
<li><p><strong>Maintenance health</strong>: <strong>Rank 4/7 (uncertain)</strong>
Rationale: local repo shows active work and disciplined CI, but single-maintainer signals and uncertain public community/issue velocity (GitHub evidence not confirmed here) (<code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> maintainers; <code class="docutils literal notranslate"><span class="pre">.github/workflows/*</span></code>; limitation noted).</p></li>
<li><p><strong>Performance</strong>: <strong>Rank 5/7</strong>
Rationale: fapilog is intentionally slower in the “fast sink” case and uses much more memory (<code class="docutils literal notranslate"><span class="pre">docs/user-guide/benchmarks.md</span></code>). It ranks higher only in slow-sink latency protection.</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="phase-7-red-flags-risk-register-be-harsh">
<h2>Phase 7 — Red Flags &amp; Risk Register (be harsh)<a class="headerlink" href="#phase-7-red-flags-risk-register-be-harsh" title="Link to this heading"></a></h2>
<p>Severity levels P0–P3: P0 = critical, P3 = minor.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Risk</p></th>
<th class="head"><p>Severity</p></th>
<th class="head"><p>Likelihood</p></th>
<th class="head"><p>Evidence</p></th>
<th class="head"><p>Impact</p></th>
<th class="head"><p>Mitigation / workaround</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Fast-sink performance regression vs stdlib</p></td>
<td><p><strong>P1</strong></p></td>
<td><p>High</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">docs/user-guide/benchmarks.md</span></code> shows ~0.04x throughput and higher latency</p></td>
<td><p>Users adopt expecting “faster logging” and harm throughput/latency; cost blowups</p></td>
<td><p><strong>Mitigation</strong>: validate under your workload; consider stdlib+QueueHandler for fast-sink cases; use fapilog primarily for slow sinks/bursts. (Moderate)</p></td>
</tr>
<tr class="row-odd"><td><p>Memory overhead due to queue/batching</p></td>
<td><p><strong>P1</strong></p></td>
<td><p>High</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">docs/user-guide/benchmarks.md</span></code> peak memory ~10MB vs stdlib ~85KB</p></td>
<td><p>Higher memory footprint; risk in constrained environments</p></td>
<td><p>Tune <code class="docutils literal notranslate"><span class="pre">core.max_queue_size</span></code>, batch sizes (<code class="docutils literal notranslate"><span class="pre">docs/user-guide/performance-tuning.md</span></code>; <code class="docutils literal notranslate"><span class="pre">core/settings.py</span></code>). (Easy/Moderate)</p></td>
</tr>
<tr class="row-even"><td><p>Redaction disabled in common presets (fastapi/dev/minimal)</p></td>
<td><p><strong>P1</strong></p></td>
<td><p>Medium–High</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">docs/user-guide/reliability-defaults.md</span></code></p></td>
<td><p>Sensitive data leakage risk in production if teams pick “fastapi preset” naively</p></td>
<td><p>Provide a safer preset or require explicit opt-out; document more loudly. (Easy)</p></td>
</tr>
<tr class="row-odd"><td><p>Stderr fallback redaction is key-name based and incomplete</p></td>
<td><p><strong>P1</strong></p></td>
<td><p>Medium</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">src/fapilog/plugins/sinks/fallback.py</span></code>; sensitive key list <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/defaults.py</span></code></p></td>
<td><p>Secrets not matching key list can leak during sink failure incidents</p></td>
<td><p>Expand sensitive key list; support configurable patterns/regex for fallback redaction; prefer “inherit” mode when possible. (Moderate)</p></td>
</tr>
<tr class="row-even"><td><p>“Enterprise” security settings may be misleading (schema vs enforcement)</p></td>
<td><p><strong>P2</strong></p></td>
<td><p>Medium</p></td>
<td><p>Encryption/access control are validators/models (<code class="docutils literal notranslate"><span class="pre">src/fapilog/core/encryption.py</span></code>, <code class="docutils literal notranslate"><span class="pre">access_control.py</span></code>) with unclear runtime use</p></td>
<td><p>Users assume encryption/access control protections exist end-to-end</p></td>
<td><p>Clearly document what is enforced; add tests proving behavior; remove/relocate unused “enterprise” config surface. (Moderate/Hard)</p></td>
</tr>
<tr class="row-odd"><td><p>Complexity hotspots (core logger/context/errors)</p></td>
<td><p><strong>P2</strong></p></td>
<td><p>Medium</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">src/fapilog/core/logger.py</span></code> + <code class="docutils literal notranslate"><span class="pre">core/context.py</span></code> + <code class="docutils literal notranslate"><span class="pre">core/errors.py</span></code> are large and multi-responsibility</p></td>
<td><p>Harder to maintain; higher bug risk for edge cases (shutdown, async/sync boundary)</p></td>
<td><p>Continue extracting smaller modules; increase targeted integration tests for lifecycle edge cases. (Moderate)</p></td>
</tr>
<tr class="row-even"><td><p>Version/documentation drift</p></td>
<td><p><strong>P2</strong></p></td>
<td><p>Medium</p></td>
<td><p>Benchmarks page references <code class="docutils literal notranslate"><span class="pre">0.3.6</span></code> (<code class="docutils literal notranslate"><span class="pre">docs/user-guide/benchmarks.md</span></code>) while tags end at <code class="docutils literal notranslate"><span class="pre">v0.3.5</span></code> and version is dev (<code class="docutils literal notranslate"><span class="pre">_version.py</span></code>)</p></td>
<td><p>Users can’t reproduce docs; undermines trust</p></td>
<td><p>Drive docs version from release workflow; publish docs per tag (release workflow does this; ensure docs match). (Easy)</p></td>
</tr>
<tr class="row-odd"><td><p>Maintenance / bus factor</p></td>
<td><p><strong>P2</strong></p></td>
<td><p>Medium</p></td>
<td><p>Single maintainer listed (<code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>); no governance beyond docs</p></td>
<td><p>Risk of abandonment; slower security patch response</p></td>
<td><p>Add co-maintainers, publish roadmap and support policy; encourage contributors. (Hard)</p></td>
</tr>
<tr class="row-even"><td><p>Ecosystem integration gaps</p></td>
<td><p><strong>P2</strong></p></td>
<td><p>Medium</p></td>
<td><p>README roadmap includes many “not yet implemented” integrations (<code class="docutils literal notranslate"><span class="pre">README.md</span></code> roadmap section)</p></td>
<td><p>Users expect Splunk/Elastic/Kafka integrations and are blocked</p></td>
<td><p>Document current supported sinks clearly; provide plugin templates and community registry. (Moderate)</p></td>
</tr>
<tr class="row-odd"><td><p>CLI missing</p></td>
<td><p><strong>P3</strong></p></td>
<td><p>High</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">README.md</span></code> says CLI placeholder; <code class="docutils literal notranslate"><span class="pre">src/fapilog/cli/main.py</span></code> placeholder</p></td>
<td><p>Some workflows (validation, config generation) harder</p></td>
<td><p>Provide minimal CLI: validate config, print env template, run health checks. (Moderate)</p></td>
</tr>
</tbody>
</table>
</section>
<hr class="docutils" />
<section id="phase-8-verdict-decision-guidance">
<h2>Phase 8 — Verdict &amp; Decision Guidance<a class="headerlink" href="#phase-8-verdict-decision-guidance" title="Link to this heading"></a></h2>
<section id="executive-summary-510-bullets">
<h3>Executive summary (5–10 bullets)<a class="headerlink" href="#executive-summary-510-bullets" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">fapilog</span></code> is a feature-rich, pipeline-oriented logging library</strong>: bounded queue, batching, backpressure/drop policy, pluggable stages (filters/enrichers/redactors/processors/sinks), and FastAPI integration (<code class="docutils literal notranslate"><span class="pre">README.md</span></code>; <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/worker.py</span></code>; <code class="docutils literal notranslate"><span class="pre">src/fapilog/fastapi/*</span></code>).</p></li>
<li><p><strong>It is not “faster logging” in the general case</strong>; it is slower than stdlib under fast local sinks, sometimes drastically (<code class="docutils literal notranslate"><span class="pre">docs/user-guide/benchmarks.md</span></code>).</p></li>
<li><p><strong>Where it shines is slow sinks / bursts</strong>: app-side latency protection is a real, documented win (<code class="docutils literal notranslate"><span class="pre">docs/user-guide/benchmarks.md</span></code> slow-sink results).</p></li>
<li><p><strong>Security posture is above average</strong> for a Python logging library: external plugins blocked by default, fallback redaction, webhook signing defaults, SBOM + pip-audit workflow (<code class="docutils literal notranslate"><span class="pre">docs/user-guide/configuration.md</span></code>; <code class="docutils literal notranslate"><span class="pre">fallback.py</span></code>; <code class="docutils literal notranslate"><span class="pre">security-sbom.yml</span></code>).</p></li>
<li><p><strong>Preset safety is a footgun</strong>: the <code class="docutils literal notranslate"><span class="pre">fastapi</span></code> preset disables redaction (<code class="docutils literal notranslate"><span class="pre">docs/user-guide/reliability-defaults.md</span></code>).</p></li>
<li><p><strong>Engineering discipline is strong</strong>: contract tests, diff coverage, doc accuracy checks, release guardrails (<code class="docutils literal notranslate"><span class="pre">.github/workflows/ci.yml</span></code>, <code class="docutils literal notranslate"><span class="pre">.github/workflows/release.yml</span></code>).</p></li>
<li><p><strong>Complexity is significant</strong> in core modules; this is powerful but raises long-term maintenance risk (<code class="docutils literal notranslate"><span class="pre">src/fapilog/core/logger.py</span></code>, <code class="docutils literal notranslate"><span class="pre">core/context.py</span></code>, <code class="docutils literal notranslate"><span class="pre">core/errors.py</span></code>).</p></li>
<li><p><strong>Add-ons exist</strong> for audit and tamper-evident logging, but tamper add-on admits placeholder components (<code class="docutils literal notranslate"><span class="pre">packages/fapilog-audit/*</span></code>; <code class="docutils literal notranslate"><span class="pre">packages/fapilog-tamper/README.md</span></code>).</p></li>
</ul>
</section>
<section id="recommendation-trial-not-blind-adopt">
<h3>Recommendation: <strong>Trial</strong> (not “blind adopt”)<a class="headerlink" href="#recommendation-trial-not-blind-adopt" title="Link to this heading"></a></h3>
<p><strong>Verdict: Trial</strong></p>
<p>Rationale: Despite strong quality gates and a compelling slow-sink story, the performance/memory tradeoffs and some security footguns (preset redaction behavior) demand a real-world spike before production adoption.</p>
</section>
<section id="fit-by-scenario-guidance">
<h3>Fit-by-scenario guidance<a class="headerlink" href="#fit-by-scenario-guidance" title="Link to this heading"></a></h3>
<section id="best-fit-scenarios">
<h4>Best fit scenarios<a class="headerlink" href="#best-fit-scenarios" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><strong>Latency-sensitive services with slow/remote sinks</strong> (HTTP/webhook, Loki, CloudWatch, Postgres) where you want bounded impact on request latency and predictable behavior under bursts (<code class="docutils literal notranslate"><span class="pre">README.md</span></code>; <code class="docutils literal notranslate"><span class="pre">docs/user-guide/benchmarks.md</span></code>).</p></li>
<li><p><strong>Teams that want structured logging + redaction + sink protections</strong> (circuit breaker/fallback) without assembling custom stdlib handler stacks (<code class="docutils literal notranslate"><span class="pre">src/fapilog/core/sink_writers.py</span></code>; <code class="docutils literal notranslate"><span class="pre">fallback.py</span></code>).</p></li>
</ul>
</section>
<section id="poor-fit-scenarios">
<h4>Poor fit scenarios<a class="headerlink" href="#poor-fit-scenarios" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><strong>High-throughput logging to fast local files/stdout where overhead dominates</strong> (benchmarks show stdlib is faster and far lower memory) (<code class="docutils literal notranslate"><span class="pre">docs/user-guide/benchmarks.md</span></code>).</p></li>
<li><p><strong>Organizations needing mature ecosystem integrations</strong> (Splunk/Elastic/Kafka) today; README marks these as roadmap items (<code class="docutils literal notranslate"><span class="pre">README.md</span></code> roadmap).</p></li>
</ul>
</section>
</section>
<section id="adoption-checklist">
<h3>Adoption checklist<a class="headerlink" href="#adoption-checklist" title="Link to this heading"></a></h3>
<section id="what-i-would-validate-in-a-spike-poc-plan">
<h4>What I would validate in a spike (POC plan)<a class="headerlink" href="#what-i-would-validate-in-a-spike-poc-plan" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p>Confirm app-side latency under realistic slow sink and burst patterns.</p></li>
<li><p>Confirm redaction behavior (including fallback redaction) matches your compliance requirements.</p></li>
<li><p>Confirm operational visibility (drops/high-watermark/flush latency) is sufficient for SREs.</p></li>
<li><p>Confirm that using the <code class="docutils literal notranslate"><span class="pre">fastapi</span></code> preset does not silently disable required safety features (or override it with Settings).</p></li>
</ul>
</section>
<section id="what-i-would-monitor-in-production">
<h4>What I would monitor in production<a class="headerlink" href="#what-i-would-monitor-in-production" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p>Queue depth / high-water mark / drop counts (enable metrics and alert) (<code class="docutils literal notranslate"><span class="pre">docs/user-guide/reliability-defaults.md</span></code>; metrics hooks in <code class="docutils literal notranslate"><span class="pre">worker.py</span></code>).</p></li>
<li><p>Rate of stderr fallback events (this indicates sink failure and possible data leakage risk) (<code class="docutils literal notranslate"><span class="pre">src/fapilog/plugins/sinks/fallback.py</span></code>).</p></li>
<li><p>Circuit breaker open events for sinks (<code class="docutils literal notranslate"><span class="pre">src/fapilog/core/circuit_breaker.py</span></code> emits diagnostics).</p></li>
</ul>
</section>
</section>
<section id="if-avoiding-top-3-alternatives-and-why">
<h3>If avoiding: top 3 alternatives and why<a class="headerlink" href="#if-avoiding-top-3-alternatives-and-why" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>stdlib logging + QueueHandler/QueueListener</strong>: stable, fast, configurable; you build only what you need (<code class="docutils literal notranslate"><span class="pre">https://docs.python.org/3.12/library/logging.handlers.html</span></code>).</p></li>
<li><p><strong>structlog</strong>: excellent structured logging and contextvars ergonomics; pairs well with existing handler stacks (<code class="docutils literal notranslate"><span class="pre">https://www.structlog.org/en/25.3.0/contextvars.html</span></code>).</p></li>
<li><p><strong>loguru</strong>: strong ergonomics and optional queued logging (<code class="docutils literal notranslate"><span class="pre">enqueue=True</span></code>) + JSON serialization (<code class="docutils literal notranslate"><span class="pre">serialize=True</span></code>) (<code class="docutils literal notranslate"><span class="pre">https://loguru.readthedocs.io/en/stable/api/logger.html</span></code>).</p></li>
</ul>
</section>
<section id="open-questions-unknowns">
<h3>Open Questions / Unknowns<a class="headerlink" href="#open-questions-unknowns" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Community/maintenance health on GitHub</strong>: issue/PR responsiveness, contributor diversity, bus factor beyond “single maintainer” could not be confirmed from repo-local evidence alone.</p></li>
<li><p><strong>Which “enterprise” config fields are truly enforced</strong> in the runtime pipeline vs being forward-looking schema scaffolding (encryption/access control).</p></li>
<li><p><strong>Windows behavior</strong>: some extras exclude win32 (<code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> <code class="docutils literal notranslate"><span class="pre">psutil</span></code> marker), but broader Windows correctness wasn’t assessed.</p></li>
<li><p><strong>Example coverage</strong>: unclear whether examples are executed as CI tests (I didn’t inspect all sink test workflows).</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="appendix-scoring-rubric-mandatory">
<h2>Appendix — Scoring Rubric (Mandatory)<a class="headerlink" href="#appendix-scoring-rubric-mandatory" title="Link to this heading"></a></h2>
<section id="score-summary-table">
<h3>1) Score Summary Table<a class="headerlink" href="#score-summary-table" title="Link to this heading"></a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Category</p></th>
<th class="head text-right"><p>Weight</p></th>
<th class="head text-right"><p>Score (0–10)</p></th>
<th class="head text-right"><p>Weighted Points (weight * score)</p></th>
<th class="head"><p>Confidence</p></th>
<th class="head"><p>Evidence pointers</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Capability Coverage &amp; Maturity</p></td>
<td class="text-right"><p>20</p></td>
<td class="text-right"><p>7.5</p></td>
<td class="text-right"><p>150</p></td>
<td><p>Medium</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">README.md</span></code>; <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/*</span></code>; <code class="docutils literal notranslate"><span class="pre">src/fapilog/plugins/sinks/contrib/*</span></code>; <code class="docutils literal notranslate"><span class="pre">CHANGELOG.md</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Technical Architecture &amp; Code Quality</p></td>
<td class="text-right"><p>18</p></td>
<td class="text-right"><p>7.0</p></td>
<td class="text-right"><p>126</p></td>
<td><p>Medium</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">src/fapilog/core/logger.py</span></code>; <code class="docutils literal notranslate"><span class="pre">src/fapilog/core/worker.py</span></code>; <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> mypy/ruff; <code class="docutils literal notranslate"><span class="pre">tests/contract/*</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Documentation Quality &amp; Accuracy</p></td>
<td class="text-right"><p>14</p></td>
<td class="text-right"><p>7.5</p></td>
<td class="text-right"><p>105</p></td>
<td><p>Medium</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">README.md</span></code>; <code class="docutils literal notranslate"><span class="pre">docs/user-guide/*</span></code>; <code class="docutils literal notranslate"><span class="pre">.github/workflows/ci.yml</span></code> docs job; note version drift in <code class="docutils literal notranslate"><span class="pre">docs/user-guide/benchmarks.md</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Developer Experience (DX)</p></td>
<td class="text-right"><p>16</p></td>
<td class="text-right"><p>7.5</p></td>
<td class="text-right"><p>120</p></td>
<td><p>Medium</p></td>
<td><p>Presets + FastAPI one-liner (<code class="docutils literal notranslate"><span class="pre">README.md</span></code>, <code class="docutils literal notranslate"><span class="pre">docs/user-guide/configuration.md</span></code>); plugin allowlist docs; benchmark tradeoff clarity</p></td>
</tr>
<tr class="row-even"><td><p>Security Posture</p></td>
<td class="text-right"><p>12</p></td>
<td class="text-right"><p>7.0</p></td>
<td class="text-right"><p>84</p></td>
<td><p>Medium</p></td>
<td><p>External plugins blocked by default (<code class="docutils literal notranslate"><span class="pre">core/settings.py</span></code>, <code class="docutils literal notranslate"><span class="pre">plugins/loader.py</span></code>); fallback redaction (<code class="docutils literal notranslate"><span class="pre">plugins/sinks/fallback.py</span></code>); SBOM/pip-audit (<code class="docutils literal notranslate"><span class="pre">security-sbom.yml</span></code>)</p></td>
</tr>
<tr class="row-odd"><td><p>Performance &amp; Efficiency</p></td>
<td class="text-right"><p>8</p></td>
<td class="text-right"><p>6.0</p></td>
<td class="text-right"><p>48</p></td>
<td><p>High</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">docs/user-guide/benchmarks.md</span></code>; <code class="docutils literal notranslate"><span class="pre">scripts/benchmarking.py</span></code>; benchmark CI smoke (<code class="docutils literal notranslate"><span class="pre">ci.yml</span></code>)</p></td>
</tr>
<tr class="row-even"><td><p>Reliability &amp; Operability</p></td>
<td class="text-right"><p>6</p></td>
<td class="text-right"><p>6.5</p></td>
<td class="text-right"><p>39</p></td>
<td><p>Medium</p></td>
<td><p>Backpressure and drain (<code class="docutils literal notranslate"><span class="pre">core/logger.py</span></code>, <code class="docutils literal notranslate"><span class="pre">core/worker.py</span></code>); circuit breaker (<code class="docutils literal notranslate"><span class="pre">core/circuit_breaker.py</span></code>); fallback behavior (<code class="docutils literal notranslate"><span class="pre">fallback.py</span></code>)</p></td>
</tr>
<tr class="row-odd"><td><p>Maintenance &amp; Project Health</p></td>
<td class="text-right"><p>6</p></td>
<td class="text-right"><p>6.5</p></td>
<td class="text-right"><p>39</p></td>
<td><p>Low–Medium</p></td>
<td><p>Tags/changelog/release automation (<code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">CHANGELOG.md</span></code>, <code class="docutils literal notranslate"><span class="pre">release.yml</span></code>); single maintainer (<code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>); GitHub activity unknown</p></td>
</tr>
</tbody>
</table>
</section>
<section id="final-score">
<h3>2) Final Score<a class="headerlink" href="#final-score" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Weighted Score (0–100)</strong>: ((150 + 126 + 105 + 120 + 84 + 48 + 39 + 39) / 10 = 71.1)</p></li>
<li><p><strong>Confidence</strong>: <strong>Medium</strong></p>
<ul>
<li><p>High confidence in code/CI/docs content inspected locally.</p></li>
<li><p>Lower confidence in community/maintenance responsiveness due to limited verified GitHub activity evidence.</p></li>
</ul>
</li>
</ul>
</section>
<section id="gate-check">
<h3>3) Gate Check<a class="headerlink" href="#gate-check" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>P0 Avoid Gates triggered?</strong> No confirmed P0 triggers found.</p></li>
<li><p><strong>P1 Trial-only Gates triggered?</strong> No rubric-defined P1 gate strictly triggered (docs are strong, core capabilities exist, tests are substantial).
That said, the overall verdict remains <strong>Trial</strong> due to real performance tradeoffs and preset safety footguns—these require validation, even if they’re not “gates.”</p></li>
</ul>
</section>
<section id="if-i-had-2-hours-validation-plan-minimal-poc-checklist">
<h3>4) “If I had 2 hours” Validation Plan (minimal POC checklist)<a class="headerlink" href="#if-i-had-2-hours-validation-plan-minimal-poc-checklist" title="Link to this heading"></a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>What to test</p></th>
<th class="head"><p>How to test</p></th>
<th class="head"><p>Pass / Fail</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>FastAPI integration end-to-end</p></td>
<td><p>Run a minimal FastAPI app using <code class="docutils literal notranslate"><span class="pre">setup_logging()</span></code> and middleware; confirm logs include <code class="docutils literal notranslate"><span class="pre">request_id</span></code>, <code class="docutils literal notranslate"><span class="pre">trace_id/span_id</span></code> when <code class="docutils literal notranslate"><span class="pre">traceparent</span></code> is set (<code class="docutils literal notranslate"><span class="pre">src/fapilog/fastapi/setup.py</span></code>, <code class="docutils literal notranslate"><span class="pre">context.py</span></code>, <code class="docutils literal notranslate"><span class="pre">logging.py</span></code>).</p></td>
<td><p><strong>Pass</strong>: consistent request IDs and trace IDs across handlers and background tasks; <strong>Fail</strong>: missing/unstable IDs.</p></td>
</tr>
<tr class="row-odd"><td><p>Slow-sink latency protection</p></td>
<td><p>Reproduce enterprise slow-sink benchmark logic (slow sink delay) and measure app-side latencies (<code class="docutils literal notranslate"><span class="pre">docs/user-guide/benchmarks.md</span></code>; <code class="docutils literal notranslate"><span class="pre">scripts/benchmarking.py</span></code> enterprise section).</p></td>
<td><p><strong>Pass</strong>: app-side log-call latency stays sub-ms under configured slow sink; <strong>Fail</strong>: calls block near sink delay.</p></td>
</tr>
<tr class="row-even"><td><p>Drop/backpressure semantics</p></td>
<td><p>Configure <code class="docutils literal notranslate"><span class="pre">drop_on_full</span></code> true/false and fill queue; verify behavior matches docs (including same-thread nuance) (<code class="docutils literal notranslate"><span class="pre">docs/user-guide/reliability-defaults.md</span></code>; <code class="docutils literal notranslate"><span class="pre">core/logger.py</span></code>).</p></td>
<td><p><strong>Pass</strong>: observed drops/waits match docs; <strong>Fail</strong>: silent blocking or unexpected drops.</p></td>
</tr>
<tr class="row-odd"><td><p>Redaction defaults and preset behavior</p></td>
<td><p>Compare <code class="docutils literal notranslate"><span class="pre">preset=&quot;fastapi&quot;</span></code> vs no preset vs <code class="docutils literal notranslate"><span class="pre">production</span></code> and log secrets (URLs with creds, <code class="docutils literal notranslate"><span class="pre">password</span></code>, nested lists) (<code class="docutils literal notranslate"><span class="pre">docs/user-guide/reliability-defaults.md</span></code>; <code class="docutils literal notranslate"><span class="pre">core/settings.py</span></code>; <code class="docutils literal notranslate"><span class="pre">fallback.py</span></code>).</p></td>
<td><p><strong>Pass</strong>: secrets are redacted as documented; <strong>Fail</strong>: secrets leak unexpectedly (especially on fallback).</p></td>
</tr>
<tr class="row-even"><td><p>Sink failure fallback safety</p></td>
<td><p>Force sink exceptions and ensure fallback to stderr occurs and minimal redaction is applied (<code class="docutils literal notranslate"><span class="pre">plugins/sinks/fallback.py</span></code>; <code class="docutils literal notranslate"><span class="pre">core/sink_writers.py</span></code>).</p></td>
<td><p><strong>Pass</strong>: fallback logs redact sensitive keys and diagnostics are emitted if enabled; <strong>Fail</strong>: raw secrets leak.</p></td>
</tr>
<tr class="row-odd"><td><p>External plugin allowlisting</p></td>
<td><p>Install <code class="docutils literal notranslate"><span class="pre">fapilog-audit</span></code>, attempt to load without allowlist, then with allowlist (<code class="docutils literal notranslate"><span class="pre">packages/fapilog-audit/README.md</span></code>; <code class="docutils literal notranslate"><span class="pre">plugins/loader.py</span></code>).</p></td>
<td><p><strong>Pass</strong>: blocked by default; works only when allowlisted; <strong>Fail</strong>: loads unexpectedly.</p></td>
</tr>
<tr class="row-even"><td><p>Reproducibility of docs benchmark claims</p></td>
<td><p>Run <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">scripts/benchmarking.py</span> <span class="pre">...</span></code> and compare orders of magnitude to <code class="docutils literal notranslate"><span class="pre">docs/user-guide/benchmarks.md</span></code>.</p></td>
<td><p><strong>Pass</strong>: same qualitative outcome (stdlib faster for fast sink, fapilog better for slow sink); <strong>Fail</strong>: contradictions.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="fapilog-assessment-2026-01-19%20%28Claude-Opus-4.5%29.html" class="btn btn-neutral float-left" title="Fapilog Open Source Library Assessment" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="fapilog-assessment-2026-01-19%20%28Gemini-3-Flash%29.html" class="btn btn-neutral float-right" title="fapilog: Open Source Library Assessment Report" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Chris Haste.
      <span class="lastupdated">Last updated on January 21, 2026.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>