


<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Custom log levels in Python (TRACE, AUDIT, NOTICE) &mdash; fapilog 0.13.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=9edc463e" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css" />

  
    <link rel="canonical" href="https://docs.fapilog.dev/en/stable/cookbook/custom-log-levels.html" />
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=1019fba8"></script>
      <script src="../_static/doctools.js?v=fd6eb6e6"></script>
      <script src="../_static/sphinx_highlight.js?v=6ffebe34"></script>
      <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../_static/copybutton.js?v=30646c52"></script>
      <script src="../_static/custom.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Examples &amp; Recipes" href="../examples/index.html" />
    <link rel="prev" title="Exception logging in FastAPI with request_id + structured context" href="exception-logging-request-context.html" />
 



</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #2980B9" >

          
          
          <a href="../index.html" class="icon icon-home">
            fapilog
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting-started/index.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/installation.html">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/quickstart.html">Quickstart Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/hello-world.html">Hello World Walkthrough</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../why-fapilog.html">Why fapilog?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../comparisons.html">Python Logging Library Comparison</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-concepts/index.html">Core Concepts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../core-concepts/pipeline-architecture.html">Pipeline Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core-concepts/envelope.html">Envelope</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core-concepts/context-binding.html">Context Binding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core-concepts/batching-backpressure.html">Batching &amp; Backpressure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core-concepts/sinks.html">Sinks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core-concepts/metrics.html">Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core-concepts/diagnostics-resilience.html">Diagnostics Resilience</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core-concepts/diagnostics-resilience.html#id1">Diagnostics &amp; Resilience</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../user-guide/index.html">User Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../user-guide/configuration.html">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user-guide/presets.html">Configuration Presets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user-guide/execution-modes.html">Execution Modes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user-guide/builder-configuration.html">Configuring Fapilog with the Builder API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user-guide/environment-variables.html">Environment Variable Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user-guide/production-checklist.html">Production Checklist</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user-guide/using-logger.html">Using the Logger</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user-guide/context-enrichment.html">Context Enrichment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user-guide/rotating-file-sink.html">Rotating File Sink</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user-guide/sink-routing.html">Sink routing by level</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user-guide/sampling.html">Sampling Strategies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user-guide/graceful-shutdown.html">Graceful Shutdown</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user-guide/performance-tuning.html">Performance Tuning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user-guide/benchmarks.html">Performance Benchmarks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user-guide/integration-guide.html">Integration Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user-guide/stdlib-bridge.html">stdlib Logging Bridge</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user-guide/fastapi.html">FastAPI / ASGI Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user-guide/reliability-defaults.html">Reliability Defaults and Guardrails</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user-guide/testing-plugins.html">Testing Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user-guide/webhook-security.html">Webhook Security</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Cookbook</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="fastapi-microservice-production.html">FastAPI Microservices in Production</a></li>
<li class="toctree-l2"><a class="reference internal" href="fastapi-json-logging.html">FastAPI JSON logging to stdout (Uvicorn access logs included)</a></li>
<li class="toctree-l2"><a class="reference internal" href="fastapi-request-id-logging.html">FastAPI request_id logging (correlation ID middleware, concurrency-safe)</a></li>
<li class="toctree-l2"><a class="reference internal" href="django-structured-logging.html">Django Structured JSON Logging with Correlation IDs</a></li>
<li class="toctree-l2"><a class="reference internal" href="non-blocking-async-logging.html">Non-blocking logging in FastAPI (protect latency under slow sinks)</a></li>
<li class="toctree-l2"><a class="reference internal" href="dev-prod-logging-config.html">One FastAPI logging config for dev + prod (Uvicorn/Gunicorn)</a></li>
<li class="toctree-l2"><a class="reference internal" href="redacting-secrets-pii.html">Redacting secrets and PII in FastAPI logs (Authorization, tokens, fields)</a></li>
<li class="toctree-l2"><a class="reference internal" href="compliance-redaction.html">Compliance Redaction: What Works and What Doesn’t</a></li>
<li class="toctree-l2"><a class="reference internal" href="safe-request-response-logging.html">Logging request/response bodies without hanging (safe patterns)</a></li>
<li class="toctree-l2"><a class="reference internal" href="skip-noisy-endpoints.html">Skipping health/metrics endpoints (noise reduction)</a></li>
<li class="toctree-l2"><a class="reference internal" href="log-sampling-rate-limiting.html">Log sampling and rate limiting for FastAPI</a></li>
<li class="toctree-l2"><a class="reference internal" href="adaptive-sampling-high-volume.html">Adaptive Sampling for High-Volume Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="graceful-shutdown-flush.html">Graceful shutdown &amp; flushing logs (don’t lose logs on deploy)</a></li>
<li class="toctree-l2"><a class="reference internal" href="exception-logging-request-context.html">Exception logging in FastAPI with request_id + structured context</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Custom log levels in Python (TRACE, AUDIT, NOTICE)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../examples/index.html">Examples &amp; Recipes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../examples/builder-configurations.html">Builder Configuration Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/fastapi-logging.html">FastAPI Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/cli-tools.html">Logging in Scripts/CLIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/redacting-secrets.html">Redacting Secrets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/structured-error-logging.html">Structured Error Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/kubernetes-file-sink.html">Kubernetes File Sink</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/prometheus-metrics.html">Prometheus Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/sampling-debug-logs.html">Sampling Debug Logs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/size-limited-destinations.html">Handling Size-Limited Destinations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/cloudwatch_logging/index.html">CloudWatch Logging (LocalStack)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/cloud-sinks/index.html">Cloud Sink Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../redaction/index.html">Redaction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../redaction/presets.html">Redaction Presets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../redaction/configuration.html">Redaction Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../redaction/behavior.html">Redaction Behavior</a></li>
<li class="toctree-l2"><a class="reference internal" href="../redaction/testing.html">Testing Redaction</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../enterprise.html">Enterprise Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api-reference/index.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../api-reference/top-level-functions.html">Top-Level Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-reference/builder.html">Builder API Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-reference/logger-methods.html">Logger Methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-reference/context-binding.html">Context Binding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-reference/audit-trail.html">Audit Trail</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-reference/configuration.html">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-reference/configuration-map.html">Configuration Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-reference/types.html">Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-reference/plugins/index.html">Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-reference/lifecycle-results.html">Lifecycle &amp; Results</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-reference/modules.html">API Modules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../plugins/index.html">Plugin Development</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../plugins/quickstart.html">Plugin Author Quickstart</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/authoring.html">Authoring Fapilog Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/contracts-and-versioning.html">Plugin Contracts and API Versioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/redactors.html">Redactors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/sinks.html">Sinks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/enrichers.html">Enrichers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/filters.html">Filters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/processors.html">Processors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/testing.html">Plugin Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/configuration.html">Plugin Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/health-checks.html">Plugin Health Checks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/error-handling.html">Plugin Error Handling</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../patterns.html">Integration Patterns</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../patterns/sdk-sinks.html">Building SDK-Based Sinks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../patterns/http-sinks.html">Building HTTP-Based Sinks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting/index.html">Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting/logs-dropped-under-load.html">Logs Dropped Under Load</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting/destination-size-limits.html">Logs Rejected by Destination Size Limits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting/context-values-missing.html">Context Values Missing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting/file-sink-not-rotating.html">File Sink Not Rotating</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting/serialization-errors.html">Serialization Errors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting/pii-showing-despite-redaction.html">PII Showing Despite Redaction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting/cloudwatch-sink.html">CloudWatch Sink Issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting/loki-sink.html">Loki Sink Issues</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendices.html">Appendices</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../env-vars.html">Environment Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../settings-guide.html">Settings Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../schema-guide.html">Schema Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../schema-migration-v1.0-to-v1.1.html">Schema Migration Guide: v1.0 to v1.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugin-guide.html">Plugin Catalog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../security-operator-workflows.html">Security Remediation &amp; Approval Workflows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quality-signals.html">Quality Signals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/settings-to-builder-migration.html">Migrating from Settings to Builder</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/migration-file-rotation.html">Migration Guide: Simplified Rotating File Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/tenacity-integration.html">Tenacity Integration Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/testing.html">Testing with Fapilog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/async-context.html">Async Context Propagation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addons/tamper-evident-logging.html">Tamper-Evident Logging Add-on (Optional)</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #2980B9" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">fapilog</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Cookbook</a></li>
      <li class="breadcrumb-item active">Custom log levels in Python (TRACE, AUDIT, NOTICE)</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/cookbook/custom-log-levels.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="custom-log-levels-in-python-trace-audit-notice">
<h1>Custom log levels in Python (TRACE, AUDIT, NOTICE)<a class="headerlink" href="#custom-log-levels-in-python-trace-audit-notice" title="Link to this heading"></a></h1>
<p>Python’s standard logging library provides five levels (DEBUG, INFO, WARNING, ERROR, CRITICAL), but real applications often need more granularity. Whether you’re adding TRACE for detailed debugging, AUDIT for compliance events, or NOTICE for operational alerts, custom levels help you filter and route logs precisely.</p>
<section id="the-problem">
<h2>The Problem<a class="headerlink" href="#the-problem" title="Link to this heading"></a></h2>
<p>The standard five log levels force awkward compromises:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="c1"># Is this DEBUG or INFO? Neither fits well.</span>
<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Entering function&quot;</span><span class="p">)</span>  <span class="c1"># Too verbose for normal debugging</span>
<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Entering function&quot;</span><span class="p">)</span>   <span class="c1"># Clutters INFO output</span>

<span class="c1"># Security events need special handling, but what level?</span>
<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;User login&quot;</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;123&quot;</span><span class="p">})</span>  <span class="c1"># Lost in noise</span>
<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;User login&quot;</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;123&quot;</span><span class="p">})</span>  <span class="c1"># Not a warning</span>

<span class="c1"># Operational alerts that aren&#39;t errors</span>
<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Disk usage at 80%&quot;</span><span class="p">)</span>  <span class="c1"># Is this really a warning?</span>
<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Disk usage at 80%&quot;</span><span class="p">)</span>     <span class="c1"># Might get filtered out</span>
</pre></div>
</div>
<p>This creates problems:</p>
<ol class="arabic simple">
<li><p><strong>Lost granularity</strong> - TRACE events pollute DEBUG, or get omitted entirely</p></li>
<li><p><strong>No audit trail</strong> - Security events mixed with application logs</p></li>
<li><p><strong>Filtering headaches</strong> - Can’t route AUDIT to a separate sink without custom code</p></li>
<li><p><strong>Inconsistent severity</strong> - Teams disagree on what level to use</p></li>
</ol>
</section>
<section id="the-solution">
<h2>The Solution<a class="headerlink" href="#the-solution" title="Link to this heading"></a></h2>
<p>fapilog lets you register custom levels before creating loggers:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">fapilog</span>

<span class="c1"># Register custom levels BEFORE creating any loggers</span>
<span class="n">fapilog</span><span class="o">.</span><span class="n">register_level</span><span class="p">(</span><span class="s2">&quot;TRACE&quot;</span><span class="p">,</span> <span class="n">priority</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">add_method</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">fapilog</span><span class="o">.</span><span class="n">register_level</span><span class="p">(</span><span class="s2">&quot;AUDIT&quot;</span><span class="p">,</span> <span class="n">priority</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span> <span class="n">add_method</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">fapilog</span><span class="o">.</span><span class="n">register_level</span><span class="p">(</span><span class="s2">&quot;NOTICE&quot;</span><span class="p">,</span> <span class="n">priority</span><span class="o">=</span><span class="mi">35</span><span class="p">,</span> <span class="n">add_method</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Now create your logger</span>
<span class="n">logger</span> <span class="o">=</span> <span class="n">fapilog</span><span class="o">.</span><span class="n">get_logger</span><span class="p">()</span>

<span class="c1"># Use custom levels naturally</span>
<span class="n">logger</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s2">&quot;Entering function&quot;</span><span class="p">,</span> <span class="n">function</span><span class="o">=</span><span class="s2">&quot;process_order&quot;</span><span class="p">)</span>
<span class="n">logger</span><span class="o">.</span><span class="n">audit</span><span class="p">(</span><span class="s2">&quot;User login&quot;</span><span class="p">,</span> <span class="n">user_id</span><span class="o">=</span><span class="s2">&quot;123&quot;</span><span class="p">,</span> <span class="n">ip_address</span><span class="o">=</span><span class="s2">&quot;192.168.1.1&quot;</span><span class="p">)</span>
<span class="n">logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span><span class="s2">&quot;Disk usage elevated&quot;</span><span class="p">,</span> <span class="n">percent</span><span class="o">=</span><span class="mi">80</span><span class="p">,</span> <span class="n">mount</span><span class="o">=</span><span class="s2">&quot;/data&quot;</span><span class="p">)</span>
<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Order processed&quot;</span><span class="p">,</span> <span class="n">order_id</span><span class="o">=</span><span class="s2">&quot;456&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">add_method=True</span></code> parameter generates <code class="docutils literal notranslate"><span class="pre">logger.trace()</span></code>, <code class="docutils literal notranslate"><span class="pre">logger.audit()</span></code>, etc. as callable methods.</p>
</section>
<section id="priority-values">
<h2>Priority Values<a class="headerlink" href="#priority-values" title="Link to this heading"></a></h2>
<p>Priorities determine filtering order. Lower values are more verbose:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Level</p></th>
<th class="head"><p>Priority</p></th>
<th class="head"><p>Use Case</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>TRACE</p></td>
<td><p>5</p></td>
<td><p>Function entry/exit, loop iterations</p></td>
</tr>
<tr class="row-odd"><td><p>DEBUG</p></td>
<td><p>10</p></td>
<td><p>Variable values, decision branches</p></td>
</tr>
<tr class="row-even"><td><p>INFO</p></td>
<td><p>20</p></td>
<td><p>Normal operations, milestones</p></td>
</tr>
<tr class="row-odd"><td><p>AUDIT</p></td>
<td><p>25</p></td>
<td><p>Security events, compliance logging</p></td>
</tr>
<tr class="row-even"><td><p>WARNING</p></td>
<td><p>30</p></td>
<td><p>Degraded performance, deprecations</p></td>
</tr>
<tr class="row-odd"><td><p>NOTICE</p></td>
<td><p>35</p></td>
<td><p>Operational alerts, threshold alerts</p></td>
</tr>
<tr class="row-even"><td><p>ERROR</p></td>
<td><p>40</p></td>
<td><p>Failures that don’t stop the app</p></td>
</tr>
<tr class="row-odd"><td><p>CRITICAL</p></td>
<td><p>50</p></td>
<td><p>System failures, data corruption</p></td>
</tr>
</tbody>
</table>
<p>Custom levels integrate with fapilog’s level filtering. Setting <code class="docutils literal notranslate"><span class="pre">min_level=&quot;AUDIT&quot;</span></code> filters out TRACE, DEBUG, and INFO.</p>
</section>
<section id="routing-custom-levels-to-separate-sinks">
<h2>Routing Custom Levels to Separate Sinks<a class="headerlink" href="#routing-custom-levels-to-separate-sinks" title="Link to this heading"></a></h2>
<p>Route specific levels to dedicated outputs:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">fapilog</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">fapilog.sinks</span><span class="w"> </span><span class="kn">import</span> <span class="n">StdoutSink</span><span class="p">,</span> <span class="n">FileSink</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">fapilog.filters</span><span class="w"> </span><span class="kn">import</span> <span class="n">LevelFilter</span>

<span class="c1"># Register custom level</span>
<span class="n">fapilog</span><span class="o">.</span><span class="n">register_level</span><span class="p">(</span><span class="s2">&quot;AUDIT&quot;</span><span class="p">,</span> <span class="n">priority</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span> <span class="n">add_method</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Create sinks with different filters</span>
<span class="n">console_sink</span> <span class="o">=</span> <span class="n">StdoutSink</span><span class="p">(</span>
    <span class="n">filters</span><span class="o">=</span><span class="p">[</span><span class="n">LevelFilter</span><span class="p">(</span><span class="n">min_level</span><span class="o">=</span><span class="s2">&quot;INFO&quot;</span><span class="p">)]</span>  <span class="c1"># INFO and above to console</span>
<span class="p">)</span>

<span class="n">audit_sink</span> <span class="o">=</span> <span class="n">FileSink</span><span class="p">(</span>
    <span class="n">path</span><span class="o">=</span><span class="s2">&quot;/var/log/audit.jsonl&quot;</span><span class="p">,</span>
    <span class="n">filters</span><span class="o">=</span><span class="p">[</span><span class="n">LevelFilter</span><span class="p">(</span><span class="n">min_level</span><span class="o">=</span><span class="s2">&quot;AUDIT&quot;</span><span class="p">,</span> <span class="n">max_level</span><span class="o">=</span><span class="s2">&quot;AUDIT&quot;</span><span class="p">)]</span>  <span class="c1"># AUDIT only</span>
<span class="p">)</span>

<span class="c1"># Configure logger with multiple sinks</span>
<span class="n">logger</span> <span class="o">=</span> <span class="n">fapilog</span><span class="o">.</span><span class="n">get_logger</span><span class="p">(</span><span class="n">sinks</span><span class="o">=</span><span class="p">[</span><span class="n">console_sink</span><span class="p">,</span> <span class="n">audit_sink</span><span class="p">])</span>

<span class="c1"># AUDIT goes to both console AND audit file</span>
<span class="n">logger</span><span class="o">.</span><span class="n">audit</span><span class="p">(</span><span class="s2">&quot;Password changed&quot;</span><span class="p">,</span> <span class="n">user_id</span><span class="o">=</span><span class="s2">&quot;123&quot;</span><span class="p">)</span>

<span class="c1"># INFO goes only to console</span>
<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Request completed&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="async-logger-support">
<h2>Async Logger Support<a class="headerlink" href="#async-logger-support" title="Link to this heading"></a></h2>
<p>Custom levels work identically with async loggers:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">fapilog</span>

<span class="n">fapilog</span><span class="o">.</span><span class="n">register_level</span><span class="p">(</span><span class="s2">&quot;TRACE&quot;</span><span class="p">,</span> <span class="n">priority</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">add_method</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">fapilog</span><span class="o">.</span><span class="n">register_level</span><span class="p">(</span><span class="s2">&quot;AUDIT&quot;</span><span class="p">,</span> <span class="n">priority</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span> <span class="n">add_method</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="n">logger</span> <span class="o">=</span> <span class="k">await</span> <span class="n">fapilog</span><span class="o">.</span><span class="n">get_async_logger</span><span class="p">()</span>

    <span class="k">await</span> <span class="n">logger</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s2">&quot;Starting async operation&quot;</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">logger</span><span class="o">.</span><span class="n">audit</span><span class="p">(</span><span class="s2">&quot;API key created&quot;</span><span class="p">,</span> <span class="n">key_id</span><span class="o">=</span><span class="s2">&quot;abc123&quot;</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Operation complete&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="common-custom-level-patterns">
<h2>Common Custom Level Patterns<a class="headerlink" href="#common-custom-level-patterns" title="Link to this heading"></a></h2>
<section id="trace-for-debugging">
<h3>TRACE for Debugging<a class="headerlink" href="#trace-for-debugging" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">fapilog</span><span class="o">.</span><span class="n">register_level</span><span class="p">(</span><span class="s2">&quot;TRACE&quot;</span><span class="p">,</span> <span class="n">priority</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">add_method</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">fapilog</span><span class="o">.</span><span class="n">get_logger</span><span class="p">()</span>

<span class="k">def</span><span class="w"> </span><span class="nf">calculate_total</span><span class="p">(</span><span class="n">items</span><span class="p">):</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s2">&quot;Entering calculate_total&quot;</span><span class="p">,</span> <span class="n">item_count</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">items</span><span class="p">))</span>
    <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s2">&quot;Processing item&quot;</span><span class="p">,</span> <span class="n">item_id</span><span class="o">=</span><span class="n">item</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">],</span> <span class="n">price</span><span class="o">=</span><span class="n">item</span><span class="p">[</span><span class="s2">&quot;price&quot;</span><span class="p">])</span>
        <span class="n">total</span> <span class="o">+=</span> <span class="n">item</span><span class="p">[</span><span class="s2">&quot;price&quot;</span><span class="p">]</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s2">&quot;Exiting calculate_total&quot;</span><span class="p">,</span> <span class="n">total</span><span class="o">=</span><span class="n">total</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">total</span>
</pre></div>
</div>
</section>
<section id="audit-for-compliance">
<h3>AUDIT for Compliance<a class="headerlink" href="#audit-for-compliance" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">fapilog</span><span class="o">.</span><span class="n">register_level</span><span class="p">(</span><span class="s2">&quot;AUDIT&quot;</span><span class="p">,</span> <span class="n">priority</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span> <span class="n">add_method</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">fapilog</span><span class="o">.</span><span class="n">get_logger</span><span class="p">()</span>

<span class="k">def</span><span class="w"> </span><span class="nf">change_password</span><span class="p">(</span><span class="n">user_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">new_password</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="c1"># Business logic here...</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">audit</span><span class="p">(</span>
        <span class="s2">&quot;Password changed&quot;</span><span class="p">,</span>
        <span class="n">user_id</span><span class="o">=</span><span class="n">user_id</span><span class="p">,</span>
        <span class="n">event_type</span><span class="o">=</span><span class="s2">&quot;security.password_change&quot;</span><span class="p">,</span>
        <span class="n">compliance</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;SOC2&quot;</span><span class="p">,</span> <span class="s2">&quot;GDPR&quot;</span><span class="p">]</span>
    <span class="p">)</span>
</pre></div>
</div>
</section>
<section id="notice-for-operations">
<h3>NOTICE for Operations<a class="headerlink" href="#notice-for-operations" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">fapilog</span><span class="o">.</span><span class="n">register_level</span><span class="p">(</span><span class="s2">&quot;NOTICE&quot;</span><span class="p">,</span> <span class="n">priority</span><span class="o">=</span><span class="mi">35</span><span class="p">,</span> <span class="n">add_method</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">fapilog</span><span class="o">.</span><span class="n">get_logger</span><span class="p">()</span>

<span class="k">def</span><span class="w"> </span><span class="nf">check_disk_usage</span><span class="p">():</span>
    <span class="n">usage</span> <span class="o">=</span> <span class="n">get_disk_usage_percent</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">usage</span> <span class="o">&gt;</span> <span class="mi">80</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">notice</span><span class="p">(</span>
            <span class="s2">&quot;Disk usage elevated&quot;</span><span class="p">,</span>
            <span class="n">percent</span><span class="o">=</span><span class="n">usage</span><span class="p">,</span>
            <span class="n">threshold</span><span class="o">=</span><span class="mi">80</span><span class="p">,</span>
            <span class="n">mount</span><span class="o">=</span><span class="s2">&quot;/data&quot;</span>
        <span class="p">)</span>
    <span class="k">elif</span> <span class="n">usage</span> <span class="o">&gt;</span> <span class="mi">95</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Disk nearly full&quot;</span><span class="p">,</span> <span class="n">percent</span><span class="o">=</span><span class="n">usage</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="registration-timing">
<h2>Registration Timing<a class="headerlink" href="#registration-timing" title="Link to this heading"></a></h2>
<p>Custom levels must be registered before creating loggers:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">fapilog</span>

<span class="c1"># This works</span>
<span class="n">fapilog</span><span class="o">.</span><span class="n">register_level</span><span class="p">(</span><span class="s2">&quot;TRACE&quot;</span><span class="p">,</span> <span class="n">priority</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">add_method</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">logger</span> <span class="o">=</span> <span class="n">fapilog</span><span class="o">.</span><span class="n">get_logger</span><span class="p">()</span>
<span class="n">logger</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s2">&quot;Works!&quot;</span><span class="p">)</span>

<span class="c1"># This raises RuntimeError</span>
<span class="n">logger2</span> <span class="o">=</span> <span class="n">fapilog</span><span class="o">.</span><span class="n">get_logger</span><span class="p">()</span>
<span class="n">fapilog</span><span class="o">.</span><span class="n">register_level</span><span class="p">(</span><span class="s2">&quot;AUDIT&quot;</span><span class="p">,</span> <span class="n">priority</span><span class="o">=</span><span class="mi">25</span><span class="p">)</span>  <span class="c1"># RuntimeError: Registry is frozen</span>
</pre></div>
</div>
<p>The registry freezes when the first logger is created. This prevents inconsistent behavior where some loggers have custom levels and others don’t.</p>
<section id="application-startup-pattern">
<h3>Application Startup Pattern<a class="headerlink" href="#application-startup-pattern" title="Link to this heading"></a></h3>
<p>Register all custom levels in your application’s entry point:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># app/logging_config.py</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">fapilog</span>

<span class="k">def</span><span class="w"> </span><span class="nf">configure_logging</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Call once at application startup, before any imports that create loggers.&quot;&quot;&quot;</span>
    <span class="n">fapilog</span><span class="o">.</span><span class="n">register_level</span><span class="p">(</span><span class="s2">&quot;TRACE&quot;</span><span class="p">,</span> <span class="n">priority</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">add_method</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">fapilog</span><span class="o">.</span><span class="n">register_level</span><span class="p">(</span><span class="s2">&quot;AUDIT&quot;</span><span class="p">,</span> <span class="n">priority</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span> <span class="n">add_method</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">fapilog</span><span class="o">.</span><span class="n">register_level</span><span class="p">(</span><span class="s2">&quot;NOTICE&quot;</span><span class="p">,</span> <span class="n">priority</span><span class="o">=</span><span class="mi">35</span><span class="p">,</span> <span class="n">add_method</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># app/main.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">app.logging_config</span><span class="w"> </span><span class="kn">import</span> <span class="n">configure_logging</span>

<span class="n">configure_logging</span><span class="p">()</span>  <span class="c1"># Must be first!</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">fastapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">FastAPI</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">app.routes</span><span class="w"> </span><span class="kn">import</span> <span class="n">router</span>  <span class="c1"># Now safe to import modules that create loggers</span>
</pre></div>
</div>
</section>
</section>
<section id="going-deeper">
<h2>Going Deeper<a class="headerlink" href="#going-deeper" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="../user-guide/using-logger.html"><span class="std std-doc">Using the Logger</span></a> - Logger methods and patterns</p></li>
<li><p><a class="reference internal" href="../user-guide/sink-routing.html"><span class="std std-doc">Sink Routing</span></a> - Route logs to different destinations</p></li>
<li><p><a class="reference internal" href="../user-guide/configuration.html"><span class="std std-doc">Configuration</span></a> - Full configuration options</p></li>
<li><p><a class="reference internal" href="../why-fapilog.html"><span class="std std-doc">Why Fapilog?</span></a> - How fapilog compares to other logging libraries</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          
<footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer" style="position: relative;">
        <a href="exception-logging-request-context.html" class="btn btn-neutral float-left" title="Exception logging in FastAPI with request_id + structured context" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../examples/index.html" class="btn btn-neutral float-right" title="Examples &amp; Recipes" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
      <div style="position: absolute; left: 50%; transform: translateX(-50%); top: 50%; margin-top: -0.5em;">
        <a href="https://fapilog.dev">www.fapilog.dev</a>
      </div>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Chris Haste.
      <span class="lastupdated">Last updated on February 01, 2026.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>