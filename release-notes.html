


<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Release Notes &mdash; fapilog latest documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=9edc463e" />
      <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="_static/custom.css" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=c6e86fd7"></script>
      <script src="_static/doctools.js?v=fd6eb6e6"></script>
      <script src="_static/sphinx_highlight.js?v=6ffebe34"></script>
      <script src="_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="_static/copybutton.js?v=30646c52"></script>
      <script src="_static/custom.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
 


<link rel="canonical" href="https://docs.fapilog.dev/en/stable/release-notes.html" />
<meta name="robots" content="noindex, follow" />


</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #2980B9" >

          
          
          <a href="index.html" class="icon icon-home">
            fapilog
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="getting-started/index.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="getting-started/installation.html">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-started/quickstart.html">Quickstart Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-started/hello-world.html">Hello World Walkthrough</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="why-fapilog.html">Why fapilog?</a></li>
<li class="toctree-l1"><a class="reference internal" href="features.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="comparisons.html">Python Logging Library Comparison</a></li>
<li class="toctree-l1"><a class="reference internal" href="core-concepts/index.html">Core Concepts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="core-concepts/pipeline-architecture.html">Pipeline Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="core-concepts/envelope.html">Envelope</a></li>
<li class="toctree-l2"><a class="reference internal" href="core-concepts/context-binding.html">Context Binding</a></li>
<li class="toctree-l2"><a class="reference internal" href="core-concepts/batching-backpressure.html">Batching &amp; Backpressure</a></li>
<li class="toctree-l2"><a class="reference internal" href="core-concepts/sinks.html">Sinks</a></li>
<li class="toctree-l2"><a class="reference internal" href="core-concepts/metrics.html">Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="core-concepts/diagnostics-resilience.html">Diagnostics Resilience</a></li>
<li class="toctree-l2"><a class="reference internal" href="core-concepts/diagnostics-resilience.html#id1">Diagnostics &amp; Resilience</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="user-guide/index.html">User Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="user-guide/configuration.html">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="user-guide/presets.html">Configuration Presets</a></li>
<li class="toctree-l2"><a class="reference internal" href="user-guide/execution-modes.html">Execution Modes</a></li>
<li class="toctree-l2"><a class="reference internal" href="user-guide/builder-configuration.html">Configuring Fapilog with the Builder API</a></li>
<li class="toctree-l2"><a class="reference internal" href="user-guide/environment-variables.html">Environment Variable Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="user-guide/production-checklist.html">Production Checklist</a></li>
<li class="toctree-l2"><a class="reference internal" href="user-guide/using-logger.html">Using the Logger</a></li>
<li class="toctree-l2"><a class="reference internal" href="user-guide/context-enrichment.html">Context Enrichment</a></li>
<li class="toctree-l2"><a class="reference internal" href="user-guide/rotating-file-sink.html">Rotating File Sink</a></li>
<li class="toctree-l2"><a class="reference internal" href="user-guide/sink-routing.html">Sink routing by level</a></li>
<li class="toctree-l2"><a class="reference internal" href="user-guide/circuit-breaker.html">Circuit Breaker</a></li>
<li class="toctree-l2"><a class="reference internal" href="user-guide/adaptive-pipeline.html">Adaptive Pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="user-guide/sampling.html">Sampling Strategies</a></li>
<li class="toctree-l2"><a class="reference internal" href="user-guide/graceful-shutdown.html">Graceful Shutdown</a></li>
<li class="toctree-l2"><a class="reference internal" href="user-guide/performance-tuning.html">Performance Tuning</a></li>
<li class="toctree-l2"><a class="reference internal" href="user-guide/benchmarks.html">Performance Benchmarks</a></li>
<li class="toctree-l2"><a class="reference internal" href="user-guide/integration-guide.html">Integration Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="user-guide/stdlib-bridge.html">stdlib Logging Bridge</a></li>
<li class="toctree-l2"><a class="reference internal" href="user-guide/fastapi.html">FastAPI / ASGI Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="user-guide/reliability-defaults.html">Reliability Defaults and Guardrails</a></li>
<li class="toctree-l2"><a class="reference internal" href="user-guide/testing-plugins.html">Testing Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="user-guide/webhook-security.html">Webhook Security</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cookbook/index.html">Cookbook</a><ul>
<li class="toctree-l2"><a class="reference internal" href="cookbook/fastapi-microservice-production.html">FastAPI Microservices in Production</a></li>
<li class="toctree-l2"><a class="reference internal" href="cookbook/fastapi-json-logging.html">FastAPI JSON logging to stdout (Uvicorn access logs included)</a></li>
<li class="toctree-l2"><a class="reference internal" href="cookbook/fastapi-request-id-logging.html">FastAPI request_id logging (correlation ID middleware, concurrency-safe)</a></li>
<li class="toctree-l2"><a class="reference internal" href="cookbook/django-structured-logging.html">Django Structured JSON Logging with Correlation IDs</a></li>
<li class="toctree-l2"><a class="reference internal" href="cookbook/non-blocking-async-logging.html">Non-blocking logging in FastAPI (protect latency under slow sinks)</a></li>
<li class="toctree-l2"><a class="reference internal" href="cookbook/dev-prod-logging-config.html">One FastAPI logging config for dev + prod (Uvicorn/Gunicorn)</a></li>
<li class="toctree-l2"><a class="reference internal" href="cookbook/redacting-secrets-pii.html">Redacting secrets and PII in FastAPI logs (Authorization, tokens, fields)</a></li>
<li class="toctree-l2"><a class="reference internal" href="cookbook/compliance-redaction.html">Compliance Redaction: What Works and What Doesn’t</a></li>
<li class="toctree-l2"><a class="reference internal" href="cookbook/safe-request-response-logging.html">Logging request/response bodies without hanging (safe patterns)</a></li>
<li class="toctree-l2"><a class="reference internal" href="cookbook/skip-noisy-endpoints.html">Skipping health/metrics endpoints (noise reduction)</a></li>
<li class="toctree-l2"><a class="reference internal" href="cookbook/log-sampling-rate-limiting.html">Log sampling and rate limiting for FastAPI</a></li>
<li class="toctree-l2"><a class="reference internal" href="cookbook/adaptive-sampling-high-volume.html">Adaptive Sampling for High-Volume Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="cookbook/graceful-shutdown-flush.html">Graceful shutdown &amp; flushing logs (don’t lose logs on deploy)</a></li>
<li class="toctree-l2"><a class="reference internal" href="cookbook/exception-logging-request-context.html">Exception logging in FastAPI with request_id + structured context</a></li>
<li class="toctree-l2"><a class="reference internal" href="cookbook/custom-log-levels.html">Custom log levels in Python (TRACE, VERBOSE, NOTICE)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="examples/index.html">Examples &amp; Recipes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="examples/builder-configurations.html">Builder Configuration Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples/fastapi-logging.html">FastAPI Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples/cli-tools.html">Logging in Scripts/CLIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples/redacting-secrets.html">Redacting Secrets</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples/structured-error-logging.html">Structured Error Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples/kubernetes-file-sink.html">Kubernetes File Sink</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples/prometheus-metrics.html">Prometheus Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples/sampling-debug-logs.html">Sampling Debug Logs</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples/size-limited-destinations.html">Handling Size-Limited Destinations</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples/cloudwatch_logging/index.html">CloudWatch Logging (LocalStack)</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples/cloud-sinks/index.html">Cloud Sink Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="redaction/index.html">Redaction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="redaction/presets.html">Redaction Presets</a></li>
<li class="toctree-l2"><a class="reference internal" href="redaction/configuration.html">Redaction Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="redaction/behavior.html">Redaction Behavior</a></li>
<li class="toctree-l2"><a class="reference internal" href="redaction/testing.html">Testing Redaction</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="enterprise.html">Enterprise Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-reference/index.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api-reference/top-level-functions.html">Top-Level Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="api-reference/builder.html">Builder API Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="api-reference/logger-methods.html">Logger Methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="api-reference/context-binding.html">Context Binding</a></li>
<li class="toctree-l2"><a class="reference internal" href="api-reference/audit-trail.html">Audit Trail</a></li>
<li class="toctree-l2"><a class="reference internal" href="api-reference/configuration.html">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="api-reference/configuration-map.html">Configuration Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="api-reference/types.html">Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="api-reference/plugins/index.html">Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="api-reference/lifecycle-results.html">Lifecycle &amp; Results</a></li>
<li class="toctree-l2"><a class="reference internal" href="api-reference/modules.html">API Modules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="plugins/index.html">Plugin Development</a><ul>
<li class="toctree-l2"><a class="reference internal" href="plugins/quickstart.html">Plugin Author Quickstart</a></li>
<li class="toctree-l2"><a class="reference internal" href="plugins/authoring.html">Authoring Fapilog Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="plugins/contracts-and-versioning.html">Plugin Contracts and API Versioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="plugins/redactors.html">Redactors</a></li>
<li class="toctree-l2"><a class="reference internal" href="plugins/sinks.html">Sinks</a></li>
<li class="toctree-l2"><a class="reference internal" href="plugins/enrichers.html">Enrichers</a></li>
<li class="toctree-l2"><a class="reference internal" href="plugins/filters.html">Filters</a></li>
<li class="toctree-l2"><a class="reference internal" href="plugins/processors.html">Processors</a></li>
<li class="toctree-l2"><a class="reference internal" href="plugins/testing.html">Plugin Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="plugins/configuration.html">Plugin Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="plugins/health-checks.html">Plugin Health Checks</a></li>
<li class="toctree-l2"><a class="reference internal" href="plugins/error-handling.html">Plugin Error Handling</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="patterns.html">Integration Patterns</a><ul>
<li class="toctree-l2"><a class="reference internal" href="patterns/sdk-sinks.html">Building SDK-Based Sinks</a></li>
<li class="toctree-l2"><a class="reference internal" href="patterns/http-sinks.html">Building HTTP-Based Sinks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting/index.html">Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/logs-dropped-under-load.html">Logs Dropped Under Load</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/destination-size-limits.html">Logs Rejected by Destination Size Limits</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/context-values-missing.html">Context Values Missing</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/file-sink-not-rotating.html">File Sink Not Rotating</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/serialization-errors.html">Serialization Errors</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/pii-showing-despite-redaction.html">PII Showing Despite Redaction</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/cloudwatch-sink.html">CloudWatch Sink Issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/loki-sink.html">Loki Sink Issues</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendices.html">Appendices</a><ul>
<li class="toctree-l2"><a class="reference internal" href="env-vars.html">Environment Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="settings-guide.html">Settings Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="schema-guide.html">Schema Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="schema-migration-v1.0-to-v1.1.html">Schema Migration Guide: v1.0 to v1.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="plugin-guide.html">Plugin Catalog</a></li>
<li class="toctree-l2"><a class="reference internal" href="security-operator-workflows.html">Security Remediation &amp; Approval Workflows</a></li>
<li class="toctree-l2"><a class="reference internal" href="quality-signals.html">Quality Signals</a></li>
<li class="toctree-l2"><a class="reference internal" href="guides/settings-to-builder-migration.html">Migrating from Settings to Builder</a></li>
<li class="toctree-l2"><a class="reference internal" href="guides/migration-file-rotation.html">Migration Guide: Simplified Rotating File Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="guides/tenacity-integration.html">Tenacity Integration Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="guides/testing.html">Testing with Fapilog</a></li>
<li class="toctree-l2"><a class="reference internal" href="guides/async-context.html">Async Context Propagation</a></li>
<li class="toctree-l2"><a class="reference internal" href="addons/tamper-evident-logging.html">Tamper-Evident Logging Add-on (Optional)</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #2980B9" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">fapilog</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Release Notes</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/release-notes.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="release-notes">
<h1>Release Notes<a class="headerlink" href="#release-notes" title="Link to this heading"></a></h1>
<p>All notable changes to this project will be documented in this file. This changelog follows <a class="reference external" href="https://keepachangelog.com/en/1.0.0/">Keep a Changelog</a> and <a class="reference external" href="https://semver.org/spec/v2.0.0.html">Semantic Versioning</a>.</p>
<section id="unreleased">
<h2>[Unreleased]<a class="headerlink" href="#unreleased" title="Link to this heading"></a></h2>
</section>
<section id="id1">
<h2>[0.15.0] - 2026-02-13<a class="headerlink" href="#id1" title="Link to this heading"></a></h2>
<section id="added">
<h3>Added<a class="headerlink" href="#added" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Core - Add priority-aware queue with protected levels:</strong> Add PriorityAwareQueue with O(1) tombstone-based eviction. Protected levels (ERROR, CRITICAL, FATAL) survive queue pressure. Add with_protected_levels() builder method and priority eviction metrics.</p></li>
<li><p><strong>Core - Add AUDIT and SECURITY log levels:</strong> Add AUDIT (60) and SECURITY (70) as standard levels above CRITICAL. Add logger.audit() and logger.security() methods to both facades. Include in default protected_levels.</p></li>
<li><p><strong>Core - Add sensitive container with auto-redaction at envelope time:</strong> Handle sensitive= and pii= kwargs in build_envelope(), merging into data.sensitive with all values recursively masked before enqueue.</p></li>
<li><p><strong>Core - Add unsafe_debug escape hatch for raw diagnostic logging:</strong> Add unsafe_debug() to SyncLoggerFacade and AsyncLoggerFacade. Use _UNSAFE_SENTINEL to prevent user kwargs from bypassing redaction. Skip redaction pipeline for tagged events.</p></li>
<li><p><strong>Core - Always emit correlation_id in envelope for stable schema:</strong> Include correlation_id: null when no correlation context is active. Update JSON schema type from “string” to [“string”, “null”].</p></li>
<li><p><strong>Core - Add Literal type hints for preset name parameters:</strong> Define PresetName and RedactionPresetName type aliases for IDE autocomplete. Add sync-check tests to prevent Literal/registry drift.</p></li>
<li><p><strong>Core - Add pressure monitor and escalation state machine:</strong> Implement PressureLevel enum and EscalationStateMachine with hysteresis. Add PressureMonitor asyncio task with callbacks, diagnostics, and metrics. Wire monitor lifecycle into logger start/drain with fail-open design.</p></li>
<li><p><strong>Core - Add adaptive filter tightening on pressure escalation:</strong> Pre-build filter tuples per pressure level at logger startup. Swap filter snapshot via lock-free callback on pressure change.</p></li>
<li><p><strong>Core - Add dynamic worker scaling on pressure escalation:</strong> Implement WorkerPool with scale_to() and per-worker stop flags. Register scaling callback with PressureMonitor.</p></li>
<li><p><strong>Core - Wire adaptive batch sizing into worker loop:</strong> Accept AdaptiveController in LoggerWorker. Record per-item flush latency and adjust batch size after each flush.</p></li>
<li><p><strong>Core - Wire adaptive queue capacity growth on pressure escalation:</strong> Add grow_capacity() to PriorityAwareQueue with grow-only semantics. Emit diagnostic on capacity growth events.</p></li>
<li><p><strong>Core - Add circuit breaker fallback sink routing:</strong> Route events to configured fallback sink when circuit breaker opens. Add fallback_sink to SinkCircuitBreakerConfig, Prometheus metric, and builder API.</p></li>
<li><p><strong>Core - Add circuit breaker state as adaptive pressure signal:</strong> Feed circuit breaker open/close events into PressureMonitor. Each open circuit boosts effective fill ratio by configurable amount.</p></li>
<li><p><strong>Core - Add adaptive preset and builder API:</strong> Add “adaptive” preset with production base, adaptive features, circuit breaker, and rotating file fallback. Add LoggerBuilder.with_adaptive() for fine-grained configuration.</p></li>
<li><p><strong>Core - Add AdaptiveDrainSummary to DrainResult:</strong> Surface adaptive pipeline metrics via DrainResult.adaptive field. Track escalation/de-escalation counts, time-at-level, peak pressure, and actuator counters.</p></li>
<li><p><strong>Core - Add concurrent sink writes within batch flush:</strong> Split _flush_batch into prepare phase and concurrent write phase bounded by asyncio.Semaphore. Add sink_concurrency setting and with_sink_concurrency() builder method.</p></li>
<li><p><strong>Core - Cache component getter snapshots for worker access:</strong> Add tuple snapshots for filters, enrichers, redactors, processors. Invalidate caches on enable/disable enricher and cleanup.</p></li>
<li><p><strong>Redactors - Add field_blocker redactor for high-risk field names:</strong> Strip dangerous field names (body, payload, raw, etc.) anywhere in event tree. Emit policy_violation diagnostic when blocked fields are encountered.</p></li>
<li><p><strong>Redactors - Add redaction operational metrics counters:</strong> Add fapilog_redacted_fields_total, fapilog_policy_violations_total, fapilog_sensitive_fields_total counters to MetricsCollector.</p></li>
<li><p><strong>Redactors - Honor core guardrails in UrlCredentialsRedactor:</strong> Add core_max_depth and core_max_keys_scanned params with “more restrictive wins” logic.</p></li>
<li><p><strong>Redactors - Add per-field string truncation redactor:</strong> Truncate string values exceeding configurable max_string_length with [truncated] marker. Wire into builder via with_redaction(max_string_length=4096).</p></li>
</ul>
</section>
<section id="changed">
<h3>Changed<a class="headerlink" href="#changed" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Redactors - Reduce allocations in field blocker traversal:</strong> Replace per-key list path building with lazy string paths. Cache instance attributes as locals for tight loop.</p></li>
<li><p><strong>Core - Inline sensitive masking to reduce hot-path overhead:</strong> Inline the dict comprehension directly in build_envelope() to eliminate function-call overhead.</p></li>
<li><p><strong>Redactors - Skip urlsplit for non-URL strings:</strong> Add URL scheme prefix check to avoid parsing plain text.</p></li>
<li><p><strong>Sinks - Replace hardcoded field extraction with schema-aware resolution:</strong> Add _FIELD_LOCATIONS map for v1.1 envelope field lookup paths. Fix event_payload missing nested fields when include_raw_json=False.</p></li>
</ul>
</section>
<section id="fixed">
<h3>Fixed<a class="headerlink" href="#fixed" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Core - Skip error dedup for protected-level events:</strong> Protected_levels promises events MUST NOT be dropped, but error dedup silently suppresses duplicates. Skip the dedup check when the event’s level is in protected_levels.</p></li>
<li><p><strong>Core - Disable batch_sizing by default in adaptive preset:</strong> Adaptive batch sizing only benefits batch-aware sinks — not stdout or file sinks. Change adaptive preset default to batch_sizing=False.</p></li>
<li><p><strong>Sinks - Extract correlation_id from context in Postgres sink:</strong> Read correlation_id from entry[“context”] per v1.1 schema. Add contract test using build_envelope() to prevent schema drift.</p></li>
<li><p><strong>Core - Wire record_sensitive_fields() into envelope builder:</strong> Call MetricsCollector.record_sensitive_fields() after build_envelope() when sensitive=/pii= containers produce masked fields.</p></li>
<li><p><strong>Redactors - Deep-copy events in redact_in_order for snapshot integrity:</strong> Replace shallow dict() copy with orjson roundtrip deep copy. Prevent failing redactors from corrupting last good snapshot.</p></li>
<li><p><strong>Redactors - Align block_on_unredactable default across config layers:</strong> Change RedactorFieldMaskSettings default from False to True to match FieldMaskConfig.</p></li>
<li><p><strong>Redactors - Align FieldMaskRedactor.redact() return type with protocol:</strong> Return original event dict instead of None when drop guardrail fires.</p></li>
<li><p><strong>Core - Wrap metrics calls in try/except for resilience:</strong> Ensure metrics failures don’t affect enqueue success.</p></li>
</ul>
</section>
<section id="documentation">
<h3>Documentation<a class="headerlink" href="#documentation" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Docs - Add AdaptiveDrainSummary to API reference and guides:</strong> Document AdaptiveDrainSummary fields in lifecycle-results.md. Add adaptive summary example to graceful-shutdown-flush.md.</p></li>
<li><p><strong>Docs - Add adaptive pipeline and circuit breaker documentation:</strong> Add adaptive preset to presets guide. Create user guides for adaptive-pipeline.md and circuit-breaker.md. Add glossary terms and performance tuning sections.</p></li>
<li><p><strong>Redactors - Document field_blocker, string_truncate, unsafe_debug, and redaction metrics:</strong> Add all 5 built-in redactors with config tables, examples, and builder shortcuts. Document redaction operational metrics with PromQL examples.</p></li>
<li><p><strong>Docs - Update documentation for AUDIT and SECURITY levels:</strong> Update custom-log-levels cookbook. Change custom level examples from AUDIT to VERBOSE/NOTICE.</p></li>
<li><p><strong>Docs - Add priority queue metrics and tuning documentation:</strong> Add Prometheus metrics reference table. Document priority queue metrics with alerting rules.</p></li>
<li><p><strong>Docs - Improve configuration and FastAPI documentation:</strong> Add configuration hierarchy section. Update FastAPI preset example to use FastAPIBuilder pattern.</p></li>
</ul>
</section>
</section>
<section id="id2">
<h2>[0.14.0] - 2026-02-02<a class="headerlink" href="#id2" title="Link to this heading"></a></h2>
<section id="id3">
<h3>Added<a class="headerlink" href="#id3" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>FastAPI - Add FastAPIBuilder for unified integration:</strong> Extend AsyncLoggerBuilder with FastAPI-specific methods. Add skip_paths, include_headers, sample_rate, log_errors_on_skip. Support env var overrides with warning emission. Deprecate setup_logging() in favor of FastAPIBuilder.</p></li>
</ul>
</section>
<section id="id4">
<h3>Documentation<a class="headerlink" href="#id4" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>FastAPI - Update documentation for FastAPIBuilder:</strong> Update user guide with FastAPIBuilder as recommended approach. Create migration guide from setup_logging() to FastAPIBuilder. Update cookbook entries to use FastAPIBuilder pattern. Mark deprecated sections in documentation.</p></li>
<li><p><strong>FastAPI - Update all documentation to use FastAPIBuilder:</strong> Update all cookbook entries to use FastAPIBuilder instead of setup_logging(). Update user guide pages (configuration, execution-modes, presets). Update integrations/fastapi.md and examples/fastapi-logging.md. Update why-fapilog.md, features.md, context-binding.md.</p></li>
<li><p><strong>Docs - Move migration guide to guides directory:</strong> Move fastapi-builder.md to guides/fastapi-builder-migration.md. Add orphan directive to suppress toctree warning. Update links in user-guide/fastapi.md and user-guide/index.md.</p></li>
</ul>
</section>
</section>
<section id="id5">
<h2>[0.13.0] - 2026-02-01<a class="headerlink" href="#id5" title="Link to this heading"></a></h2>
<section id="id6">
<h3>Added<a class="headerlink" href="#id6" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>FastAPI - Expose header options in setup_logging:</strong> Add include_headers, additional_redact_headers, allow_headers params. Pass header options through to _configure_middleware and LoggingMiddleware.</p></li>
<li><p><strong>Core - Add high-volume preset with adaptive sampling:</strong> Enable cost-effective logging for high-traffic services via preset=“high-volume”. Configure adaptive sampling to target ~100 events/sec with 1-100% dynamic range. Ensure ERROR/CRITICAL/FATAL always pass through (never sampled out).</p></li>
<li><p><strong>Core - Add log origin tracking:</strong> Add LogOrigin type and origin field to LogDiagnostics TypedDict. Set origin=“native” by default in build_envelope(). Stdlib bridge sets origin=“stdlib” via _origin parameter.</p></li>
<li><p><strong>Core - Add async context propagation helpers:</strong> Add create_task_with_context() for context-preserving task creation. Add run_in_executor_with_context() for executor context preservation. Fix preserve_context decorator bug.</p></li>
<li><p><strong>Core - Add custom log level registration API:</strong> Add register_level() to register custom levels with priority 0-99. Integrate custom levels with level filter and routing. Generate dynamic logger methods for levels with add_method=True.</p></li>
<li><p><strong>Core - Add custom sink names to builder API:</strong> Add optional name parameter to all add_* sink methods. Enable multiple sinks of same type with unique names for routing.</p></li>
</ul>
</section>
<section id="id7">
<h3>Fixed<a class="headerlink" href="#id7" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>FastAPI - Preserve default header redactions in setup_logging:</strong> Pass redact_headers=None instead of [] to LoggingMiddleware. Allows DEFAULT_REDACT_HEADERS to apply when include_headers=True.</p></li>
</ul>
</section>
<section id="id8">
<h3>Documentation<a class="headerlink" href="#id8" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Cookbook - Add FastAPI microservice production guide:</strong> Cover preset selection for different traffic patterns. Include Kubernetes probe skip paths. Document serverless containers (Cloud Run, Fargate, Lambda).</p></li>
<li><p><strong>Features - Add features page with comprehensive feature list:</strong> Add features.md with categorized feature tables and benefits.</p></li>
<li><p><strong>Cookbook - Add custom log levels recipe:</strong> Cover TRACE, AUDIT, NOTICE level patterns for Python logging.</p></li>
<li><p><strong>Guides - Add async context propagation guide:</strong> Document create_task_with_context, run_in_executor_with_context, and preserve_context decorator usage.</p></li>
<li><p><strong>Core - Add register_level API documentation:</strong> Add comprehensive register_level() docs to top-level-functions.md with integration tests.</p></li>
</ul>
</section>
</section>
<section id="id9">
<h2>[0.12.0] - 2026-01-30<a class="headerlink" href="#id9" title="Link to this heading"></a></h2>
<section id="id10">
<h3>Added<a class="headerlink" href="#id10" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Core - Add message_id field:</strong> message_id uniquely identifies each log entry (always present). correlation_id now only appears when set via context variable, clarifying semantics: message_id per-entry vs correlation_id per-request.</p></li>
<li><p><strong>Core - Add critical() log level method:</strong> Add critical() method to SyncLoggerFacade and AsyncLoggerFacade. Update stdlib bridge to call critical() directly instead of error() with extras.</p></li>
</ul>
</section>
<section id="id11">
<h3>Fixed<a class="headerlink" href="#id11" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Core - Resolve race condition in cross-thread dropped counter:</strong> Move dropped counting into _async_enqueue so it executes even when caller times out. Remove duplicate counting from sync and async callers. Ensures accurate accounting when fut.result() times out but coroutine completes.</p></li>
<li><p><strong>Docs - Add presets.md to toctree:</strong> Add presets.md to docs/user-guide/index.md toctree. Update test_all_presets_documented to include production-latency.</p></li>
</ul>
</section>
<section id="id12">
<h3>Documentation<a class="headerlink" href="#id12" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Security - Update supported versions:</strong> Remove marketing tagline (not appropriate for security policy). Update version table to reflect current releases.</p></li>
<li><p><strong>Security - Add tagline for brand consistency.</strong></p></li>
<li><p><strong>Readme - Remove redundant title heading:</strong> Logo already provides branding, no need for duplicate heading.</p></li>
<li><p><strong>Readme - Align messaging with fapilog.dev website:</strong> Update tagline to “Your sinks can be slow. Your app shouldn’t be.” Align “Why fapilog?” section with website value propositions. Replace ASCII architecture diagram with website image.</p></li>
<li><p><strong>Stdlib-bridge - Fix CRITICAL level mapping:</strong> Level mapping table incorrectly stated CRITICAL uses error() with critical=True. Implementation actually uses critical() method directly.</p></li>
<li><p><strong>Redactors - Add prominent PII f-string warning:</strong> Add warning callout to main redaction guide explaining message strings bypass redaction. Add same warning to API reference. Expand troubleshooting guide with comprehensive unsafe/safe code examples.</p></li>
</ul>
</section>
</section>
<section id="id13">
<h2>[0.11.0] - 2026-01-30<a class="headerlink" href="#id13" title="Link to this heading"></a></h2>
<section id="id14">
<h3>Added<a class="headerlink" href="#id14" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Core - Add configuration validation:</strong> Validate configuration with hard limits (reject invalid) and soft limits (warn on high values) for queue_capacity, batch_max_size, batch_timeout_seconds, and num_workers.</p></li>
</ul>
</section>
<section id="id15">
<h3>Documentation<a class="headerlink" href="#id15" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Core - Add execution modes guide:</strong> Document execution modes (async, bound loop, thread) with throughput expectations and usage patterns in README and new user guide. Update troubleshooting docs with worker_count tuning guidance.</p></li>
<li><p><strong>Docs - Fix broken cross-reference links:</strong> Remove link to async-sync-boundary.md and replace anchor link with plain text reference for validation limits.</p></li>
</ul>
</section>
</section>
<section id="id16">
<h2>[0.10.2] - 2026-01-30<a class="headerlink" href="#id16" title="Link to this heading"></a></h2>
<section id="id17">
<h3>Fixed<a class="headerlink" href="#id17" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Core - Wait for all workers to complete during drain:</strong> Fix race condition where drain returned before all workers finished. Workers sharing single drained_event caused first-to-finish to win. Use asyncio.gather() to wait for all worker tasks instead.</p></li>
</ul>
</section>
</section>
<section id="id18">
<h2>[0.10.1] - 2026-01-29<a class="headerlink" href="#id18" title="Link to this heading"></a></h2>
<section id="id19">
<h3>Fixed<a class="headerlink" href="#id19" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Core - Merge builder sinks with preset sinks instead of replacing:</strong> Fix bug where <code class="docutils literal notranslate"><span class="pre">with_preset('production').add_file()</span></code> caused messages to be submitted but never processed (processed=0). Merge sink names preserving preset sinks (e.g., stdout_json). Deep-merge sink configs to preserve preset defaults.</p></li>
<li><p><strong>Tests - Use CI timeout multiplier for backpressure timing test:</strong> Apply <code class="docutils literal notranslate"><span class="pre">get_test_timeout()</span></code> to scale timing threshold for CI environments. Prevents flaky failures from 1% timing variance.</p></li>
</ul>
</section>
</section>
<section id="id20">
<h2>[0.10.0] - 2026-01-29<a class="headerlink" href="#id20" title="Link to this heading"></a></h2>
<section id="id21">
<h3>Added<a class="headerlink" href="#id21" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Core - Default production presets to worker_count=2:</strong> Add worker_count: 2 to production, fastapi, serverless, hardened presets. Provides ~30x throughput improvement (3,500 → 105,000 events/sec). Keep dev/minimal presets at 1 worker for simpler debugging.</p></li>
</ul>
</section>
<section id="id22">
<h3>Fixed<a class="headerlink" href="#id22" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Core - Align filter builder config keys with plugin fields:</strong> Fix with_adaptive_sampling() to use min_sample_rate, max_sample_rate, target_eps. Fix with_trace_sampling() to use sample_rate, remove honor_upstream. Add contract tests verifying builder configs load via _build_pipeline.</p></li>
<li><p><strong>Core - Rename max_entries to max_keys in with_first_occurrence():</strong> Fix parameter name mismatch causing silent filter loading failure. Add max_entries as deprecated alias with DeprecationWarning.</p></li>
<li><p><strong>Core - Enable serialize_in_flush for size_guard processor:</strong> with_size_guard() now sets serialize_in_flush=True automatically. Respects explicit user setting if already configured.</p></li>
</ul>
</section>
<section id="id23">
<h3>Documentation<a class="headerlink" href="#id23" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Docs - Use correct logo green and make logo clickable:</strong> Update badge color from #84CC16 to #9FE17B to match logo. Wrap logo image in link to fapilog.dev.</p></li>
</ul>
</section>
</section>
<section id="id24">
<h2>[0.9.0] - 2026-01-29<a class="headerlink" href="#id24" title="Link to this heading"></a></h2>
<section id="id25">
<h3>Added<a class="headerlink" href="#id25" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Core - Add reuse() method to LoggerBuilder:</strong> Expose reuse parameter for controlling logger caching behavior. Pass reuse through build() and build_async() to underlying functions. Enable test isolation by allowing non-cached logger instances.</p></li>
</ul>
</section>
<section id="id26">
<h3>Changed<a class="headerlink" href="#id26" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Core - Use Self return type for LoggerBuilder methods:</strong> Change 44 builder methods from -&gt; LoggerBuilder to -&gt; Self. Enable correct type inference for AsyncLoggerBuilder chaining.</p></li>
</ul>
</section>
<section id="id27">
<h3>Fixed<a class="headerlink" href="#id27" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Core - Flatten data={} kwarg in envelope building:</strong> When logging with <code class="docutils literal notranslate"><span class="pre">data={...}</span></code> (e.g., <code class="docutils literal notranslate"><span class="pre">logger.info(&quot;msg&quot;,</span> <span class="pre">data={&quot;password&quot;:</span> <span class="pre">&quot;secret&quot;})</span></code>), the dict contents are now flattened into the envelope’s <code class="docutils literal notranslate"><span class="pre">data</span></code> section instead of being nested under <code class="docutils literal notranslate"><span class="pre">data.data</span></code>. This fixes a security footgun where redaction rules for fields like <code class="docutils literal notranslate"><span class="pre">password</span></code> would fail silently because the actual path was <code class="docutils literal notranslate"><span class="pre">data.data.password</span></code>. Explicit kwargs override <code class="docutils literal notranslate"><span class="pre">data</span></code> dict values on collision. Non-dict <code class="docutils literal notranslate"><span class="pre">data</span></code> values are preserved as nested.</p></li>
<li><p><strong>Core - Fix flaky thread mode drain counter test:</strong> Track batch counters locally to prevent race condition. Accumulate processed/dropped counts within batch before updating shared counters. Only count unprocessed events as dropped when sink fails mid-batch.</p></li>
</ul>
</section>
<section id="id28">
<h3>Documentation<a class="headerlink" href="#id28" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Fapilog - Document field routing in with_context() docstring:</strong> The <code class="docutils literal notranslate"><span class="pre">with_context()</span></code> builder method docstring now explains that known context fields (<code class="docutils literal notranslate"><span class="pre">request_id</span></code>, <code class="docutils literal notranslate"><span class="pre">user_id</span></code>, <code class="docutils literal notranslate"><span class="pre">tenant_id</span></code>, <code class="docutils literal notranslate"><span class="pre">trace_id</span></code>, <code class="docutils literal notranslate"><span class="pre">span_id</span></code>) are routed to <code class="docutils literal notranslate"><span class="pre">log.context</span></code> while custom fields go to <code class="docutils literal notranslate"><span class="pre">log.data</span></code>.</p></li>
</ul>
</section>
</section>
<section id="id29">
<h2>[0.8.1] - 2026-01-29<a class="headerlink" href="#id29" title="Link to this heading"></a></h2>
<section id="id30">
<h3>Added<a class="headerlink" href="#id30" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Stdout sink capture mode for testing:</strong> <code class="docutils literal notranslate"><span class="pre">StdoutJsonSink</span></code> now accepts a <code class="docutils literal notranslate"><span class="pre">capture_mode=True</span></code> parameter that disables <code class="docutils literal notranslate"><span class="pre">os.writev()</span></code> optimization, allowing output to be captured via <code class="docutils literal notranslate"><span class="pre">sys.stdout</span></code> replacement in tests. The builder API also supports this: <code class="docutils literal notranslate"><span class="pre">add_stdout(capture_mode=True)</span></code>. See <code class="docutils literal notranslate"><span class="pre">docs/guides/testing.md</span></code> for usage patterns.</p></li>
<li><p><strong>Duration parser supports milliseconds and decimals:</strong> The duration string parser now accepts <code class="docutils literal notranslate"><span class="pre">ms</span></code> suffix for milliseconds (e.g., <code class="docutils literal notranslate"><span class="pre">&quot;100ms&quot;</span></code>) and decimal values with any unit (e.g., <code class="docutils literal notranslate"><span class="pre">&quot;0.5s&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;1.5h&quot;</span></code>). Error messages now list all valid formats. Builder methods like <code class="docutils literal notranslate"><span class="pre">with_circuit_breaker(recovery_timeout=&quot;500ms&quot;)</span></code> benefit automatically.</p></li>
<li><p><strong>Doc-accuracy CI check for redaction_fail_mode:</strong> The <code class="docutils literal notranslate"><span class="pre">scripts/check_doc_accuracy.py</span></code> script now validates that <code class="docutils literal notranslate"><span class="pre">docs/redaction/behavior.md</span></code> accurately documents the <code class="docutils literal notranslate"><span class="pre">redaction_fail_mode</span></code> default value from <code class="docutils literal notranslate"><span class="pre">CoreSettings</span></code>. This prevents documentation drift for security-sensitive settings.</p></li>
</ul>
</section>
<section id="id31">
<h3>Fixed<a class="headerlink" href="#id31" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Logger resource cleanup on drain:</strong> Internal data structures (<code class="docutils literal notranslate"><span class="pre">_error_dedupe</span></code>, <code class="docutils literal notranslate"><span class="pre">_plugin_stats</span></code>, <code class="docutils literal notranslate"><span class="pre">_worker_tasks</span></code>, plugin lists) are now cleared after <code class="docutils literal notranslate"><span class="pre">stop_and_drain()</span></code> completes. This prevents memory leaks in long-running applications that create and destroy loggers.</p></li>
</ul>
</section>
</section>
<section id="id32">
<h2>[0.8.0] - 2026-01-28<a class="headerlink" href="#id32" title="Link to this heading"></a></h2>
<section id="breaking-changes">
<h3>Breaking Changes<a class="headerlink" href="#breaking-changes" title="Link to this heading"></a></h3>
<ul>
<li><p><strong>Redaction defaults changed to fail-closed:</strong> All redaction settings now default to fail-closed behavior to prevent PII leakage:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">on_guardrail_exceeded</span></code>: <code class="docutils literal notranslate"><span class="pre">&quot;warn&quot;</span></code> → <code class="docutils literal notranslate"><span class="pre">&quot;replace_subtree&quot;</span></code> (masks unscanned subtrees instead of passing through)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">block_on_unredactable</span></code>: <code class="docutils literal notranslate"><span class="pre">False</span></code> → <code class="docutils literal notranslate"><span class="pre">True</span></code> (drops events when configured fields can’t be redacted)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">redaction_fail_mode</span></code>: <code class="docutils literal notranslate"><span class="pre">&quot;open&quot;</span></code> → <code class="docutils literal notranslate"><span class="pre">&quot;warn&quot;</span></code> (emits diagnostic on redaction exceptions)</p></li>
</ul>
<p><strong>Migration guide:</strong> To restore previous fail-open behavior for debugging:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">fapilog</span><span class="w"> </span><span class="kn">import</span> <span class="n">Settings</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">fapilog.core.settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">CoreSettings</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">fapilog.core.config</span><span class="w"> </span><span class="kn">import</span> <span class="n">RedactorConfig</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">fapilog.plugins.redactors.field_mask</span><span class="w"> </span><span class="kn">import</span> <span class="n">FieldMaskConfig</span>

<span class="n">Settings</span><span class="p">(</span>
    <span class="n">core</span><span class="o">=</span><span class="n">CoreSettings</span><span class="p">(</span><span class="n">redaction_fail_mode</span><span class="o">=</span><span class="s2">&quot;open&quot;</span><span class="p">),</span>
    <span class="n">redactor_config</span><span class="o">=</span><span class="n">RedactorConfig</span><span class="p">(</span>
        <span class="n">field_mask</span><span class="o">=</span><span class="n">FieldMaskConfig</span><span class="p">(</span>
            <span class="n">block_on_unredactable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">on_guardrail_exceeded</span><span class="o">=</span><span class="s2">&quot;warn&quot;</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="id33">
<h3>Changed<a class="headerlink" href="#id33" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Production preset disables Postgres auto-DDL:</strong> The <code class="docutils literal notranslate"><span class="pre">production</span></code> preset now sets <code class="docutils literal notranslate"><span class="pre">create_table=False</span></code> for Postgres sink configuration, requiring explicit table provisioning via migrations. This prevents unexpected DDL execution in regulated environments.</p></li>
<li><p><strong>Worker event-based wakeup:</strong> The background worker loop now uses <code class="docutils literal notranslate"><span class="pre">asyncio.Event</span></code> signaling instead of fixed 1ms polling when an enqueue event is provided, reducing CPU wakeups when the queue is empty.</p></li>
<li><p><strong>Backpressure event-based signaling:</strong> <code class="docutils literal notranslate"><span class="pre">NonBlockingRingQueue.await_enqueue()</span></code> and <code class="docutils literal notranslate"><span class="pre">await_dequeue()</span></code> now use <code class="docutils literal notranslate"><span class="pre">asyncio.Event</span></code> signaling instead of spin-wait loops, reducing CPU usage under sustained backpressure. The <code class="docutils literal notranslate"><span class="pre">yield_every</span></code> parameter has been removed.</p></li>
<li><p><strong>Doc accuracy CI now fails on missing critical files:</strong> The <code class="docutils literal notranslate"><span class="pre">scripts/check_doc_accuracy.py</span></code> script now fails when required documentation files are missing, instead of silently skipping them. This prevents security-sensitive documentation from drifting without CI catching it.</p></li>
</ul>
</section>
<section id="id34">
<h3>Added<a class="headerlink" href="#id34" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>FastAPI middleware <code class="docutils literal notranslate"><span class="pre">require_logger</span></code> parameter:</strong> <code class="docutils literal notranslate"><span class="pre">LoggingMiddleware</span></code> now accepts <code class="docutils literal notranslate"><span class="pre">require_logger=True</span></code> to fail fast with a clear error if no logger is in <code class="docutils literal notranslate"><span class="pre">app.state</span></code>. This avoids latency spikes from lazy logger creation on cold-start requests. Default is <code class="docutils literal notranslate"><span class="pre">False</span></code> for backward compatibility.</p></li>
<li><p><strong>Fallback sink raw output hardening:</strong> When JSON parsing fails for serialized payloads on the fallback path, fapilog now applies keyword scrubbing to mask common secret patterns (<code class="docutils literal notranslate"><span class="pre">password=</span></code>, <code class="docutils literal notranslate"><span class="pre">token=</span></code>, <code class="docutils literal notranslate"><span class="pre">api_key=</span></code>, <code class="docutils literal notranslate"><span class="pre">authorization:</span></code>) before writing to stderr. Optional truncation via <code class="docutils literal notranslate"><span class="pre">core.fallback_raw_max_bytes</span></code> limits output size. Scrubbing is enabled by default; set <code class="docutils literal notranslate"><span class="pre">FAPILOG_CORE__FALLBACK_SCRUB_RAW=false</span></code> to disable for debugging.</p></li>
</ul>
</section>
<section id="id35">
<h3>Fixed<a class="headerlink" href="#id35" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Core redaction guardrails now functional:</strong> The <code class="docutils literal notranslate"><span class="pre">redaction_max_depth</span></code> and <code class="docutils literal notranslate"><span class="pre">redaction_max_keys_scanned</span></code> settings in <code class="docutils literal notranslate"><span class="pre">CoreSettings</span></code> were previously defined but never applied (dead code). They are now passed to <code class="docutils literal notranslate"><span class="pre">FieldMaskRedactor</span></code> and <code class="docutils literal notranslate"><span class="pre">RegexMaskRedactor</span></code> during initialization and act as outer limits that override per-redactor settings when more restrictive.</p></li>
<li><p><strong>Silent data loss in <code class="docutils literal notranslate"><span class="pre">write_serialized</span></code>:</strong> Fixed correctness issue where HTTP, Webhook, Loki, CloudWatch, and PostgreSQL sinks silently replaced log data with placeholder values (e.g., <code class="docutils literal notranslate"><span class="pre">{&quot;message&quot;:</span> <span class="pre">&quot;fallback&quot;}</span></code>) when deserialization failed. All sinks now raise <code class="docutils literal notranslate"><span class="pre">SinkWriteError</span></code> with diagnostics, enabling proper fallback and circuit breaker handling.</p></li>
<li><p><strong>Plugin metadata version default:</strong> Changed <code class="docutils literal notranslate"><span class="pre">create_plugin_metadata()</span></code> default <code class="docutils literal notranslate"><span class="pre">min_fapilog_version</span></code> from <code class="docutils literal notranslate"><span class="pre">&quot;3.0.0&quot;</span></code> to <code class="docutils literal notranslate"><span class="pre">&quot;0.1.0&quot;</span></code>. The previous default was incorrect for a 0.x project and caused compatibility check failures for plugin authors.</p></li>
</ul>
</section>
<section id="id36">
<h3>Documentation<a class="headerlink" href="#id36" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Backpressure API documentation accuracy:</strong> Fixed incorrect examples showing non-existent <code class="docutils literal notranslate"><span class="pre">policy=&quot;wait&quot;</span></code> parameter and <code class="docutils literal notranslate"><span class="pre">discard_oldest</span></code> policy. Documentation now correctly shows actual <code class="docutils literal notranslate"><span class="pre">with_backpressure(wait_ms=...,</span> <span class="pre">drop_on_full=...)</span></code> API with behavior table explaining parameter combinations.</p></li>
<li><p><strong>Architecture documentation accuracy:</strong> Removed stale references to non-existent components (<code class="docutils literal notranslate"><span class="pre">ComplianceEngine</span></code>, <code class="docutils literal notranslate"><span class="pre">UniversalSettings</span></code>, <code class="docutils literal notranslate"><span class="pre">EventCategory</span></code>) and deleted outdated monolithic <code class="docutils literal notranslate"><span class="pre">docs/architecture.md</span></code>.</p></li>
<li><p><strong>Production checklist documentation:</strong> Added consolidated pre-deployment checklist covering preset selection, metrics, diagnostics, redaction validation, backpressure tuning, and graceful shutdown.</p></li>
<li><p><strong>stdlib bridge documentation:</strong> Added user guide for <code class="docutils literal notranslate"><span class="pre">enable_stdlib_bridge()</span></code> with API reference, common use cases, Django/Celery integration examples, level mapping, and troubleshooting.</p></li>
<li><p><strong>Redaction guardrails documentation:</strong> Documented two-level guardrail system (core pipeline vs per-redactor), precedence rules (“more restrictive wins”), and added CI validation for per-redactor defaults.</p></li>
<li><p><strong>Unified sampling documentation:</strong> Restructured sampling docs to emphasize filter-based approach as recommended, added deprecation section for <code class="docutils literal notranslate"><span class="pre">observability.logging.sampling_rate</span></code>, migration guide, strategy comparison table, and environment variable configuration.</p></li>
</ul>
</section>
</section>
<section id="id37">
<h2>[0.7.0] - 2026-01-27<a class="headerlink" href="#id37" title="Link to this heading"></a></h2>
<section id="id38">
<h3>Breaking Changes<a class="headerlink" href="#id38" title="Link to this heading"></a></h3>
<ul>
<li><p><strong>Unified Redaction API:</strong> The following methods have been removed and consolidated into <code class="docutils literal notranslate"><span class="pre">with_redaction()</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">with_field_mask()</span></code> - use <code class="docutils literal notranslate"><span class="pre">with_redaction(fields=[...],</span> <span class="pre">mask=&quot;...&quot;)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">with_regex_mask()</span></code> - use <code class="docutils literal notranslate"><span class="pre">with_redaction(patterns=[...],</span> <span class="pre">mask=&quot;...&quot;)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">with_url_credential_redaction()</span></code> - use <code class="docutils literal notranslate"><span class="pre">with_redaction(url_credentials=True)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">with_redaction_guardrails()</span></code> - use <code class="docutils literal notranslate"><span class="pre">with_redaction(max_depth=...,</span> <span class="pre">max_keys=...)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">with_redaction_preset()</span></code> - use <code class="docutils literal notranslate"><span class="pre">with_redaction(preset=&quot;...&quot;)</span></code></p></li>
</ul>
<p><strong>Migration guide:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Old                                    # New</span>
<span class="o">.</span><span class="n">with_field_mask</span><span class="p">([</span><span class="s2">&quot;password&quot;</span><span class="p">])</span>          <span class="o">.</span><span class="n">with_redaction</span><span class="p">(</span><span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;password&quot;</span><span class="p">])</span>
<span class="o">.</span><span class="n">with_regex_mask</span><span class="p">([</span><span class="s2">&quot;.*secret.*&quot;</span><span class="p">])</span>        <span class="o">.</span><span class="n">with_redaction</span><span class="p">(</span><span class="n">patterns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;.*secret.*&quot;</span><span class="p">])</span>
<span class="o">.</span><span class="n">with_url_credential_redaction</span><span class="p">()</span>        <span class="o">.</span><span class="n">with_redaction</span><span class="p">(</span><span class="n">url_credentials</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="o">.</span><span class="n">with_redaction_guardrails</span><span class="p">(</span><span class="n">max_depth</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">with_redaction</span><span class="p">(</span><span class="n">max_depth</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="o">.</span><span class="n">with_redaction_preset</span><span class="p">(</span><span class="s2">&quot;GDPR_PII&quot;</span><span class="p">)</span>      <span class="o">.</span><span class="n">with_redaction</span><span class="p">(</span><span class="n">preset</span><span class="o">=</span><span class="s2">&quot;GDPR_PII&quot;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p><strong>Auto-prefix for field names:</strong> <code class="docutils literal notranslate"><span class="pre">with_redaction(fields=[&quot;password&quot;])</span></code> now automatically adds the <code class="docutils literal notranslate"><span class="pre">data.</span></code> prefix for simple field names (no dots). Use <code class="docutils literal notranslate"><span class="pre">auto_prefix=False</span></code> to disable. This ensures fields are correctly matched in the log envelope structure.</p></li>
<li><p><strong>Production/FastAPI/Serverless presets now apply CREDENTIALS preset:</strong> Security-focused presets (<code class="docutils literal notranslate"><span class="pre">production</span></code>, <code class="docutils literal notranslate"><span class="pre">fastapi</span></code>, <code class="docutils literal notranslate"><span class="pre">serverless</span></code>) automatically apply the <code class="docutils literal notranslate"><span class="pre">CREDENTIALS</span></code> redaction preset for comprehensive secret protection. Custom credential fields are no longer hardcoded in these presets.</p></li>
</ul>
</section>
<section id="id39">
<h3>Added<a class="headerlink" href="#id39" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Unified <code class="docutils literal notranslate"><span class="pre">with_redaction()</span></code> API:</strong> Single method for all redaction configuration with preset support, URL credentials, guardrails, and custom fields/patterns.</p></li>
<li><p><strong>Preset discovery methods:</strong> <code class="docutils literal notranslate"><span class="pre">LoggerBuilder.list_redaction_presets()</span></code> and <code class="docutils literal notranslate"><span class="pre">LoggerBuilder.get_redaction_preset_info(name)</span></code> for discovering available redaction presets.</p></li>
<li><p><strong>Multiple preset support:</strong> <code class="docutils literal notranslate"><span class="pre">with_redaction(preset=[&quot;GDPR_PII&quot;,</span> <span class="pre">&quot;PCI_DSS&quot;])</span></code> applies multiple presets in one call.</p></li>
<li><p><strong>Composable redaction presets:</strong> One-liner compliance protection via <code class="docutils literal notranslate"><span class="pre">with_redaction(preset=&quot;GDPR_PII&quot;)</span></code>. Includes presets for GDPR, CCPA, HIPAA, PCI-DSS, and CREDENTIALS with inheritance support and metadata filtering.</p></li>
</ul>
</section>
<section id="id40">
<h3>Changed<a class="headerlink" href="#id40" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">with_redaction()</span></code> is now additive by default:</strong> Calling <code class="docutils literal notranslate"><span class="pre">with_redaction()</span></code> multiple times merges fields/patterns instead of replacing. Use <code class="docutils literal notranslate"><span class="pre">replace=True</span></code> to restore the previous overwrite behavior.</p></li>
</ul>
</section>
<section id="id41">
<h3>Documentation<a class="headerlink" href="#id41" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>New dedicated <code class="docutils literal notranslate"><span class="pre">/redaction/</span></code> documentation section with presets reference, configuration guide, behavior documentation, and testing guide.</p></li>
<li><p>Added compliance redaction cookbook explaining what field-name matching covers and its limitations.</p></li>
<li><p>Updated enterprise documentation with compliance preset examples and cross-references.</p></li>
<li><p>Improved documentation navigation structure and fixed toctree cross-references.</p></li>
<li><p>Added configuration approach decision guide with comparison matrix (preset vs builder vs settings).</p></li>
</ul>
</section>
</section>
<section id="id42">
<h2>[0.6.0] - 2026-01-26<a class="headerlink" href="#id42" title="Link to this heading"></a></h2>
<section id="id43">
<h3>Added<a class="headerlink" href="#id43" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Graceful log drain on shutdown:</strong> Loggers now automatically flush pending logs during application shutdown via <code class="docutils literal notranslate"><span class="pre">atexit</span></code> handlers. This ensures logs are not lost when processes terminate.</p></li>
<li><p><strong>Regex ReDoS protection:</strong> <code class="docutils literal notranslate"><span class="pre">RegexMaskRedactor</span></code> now validates patterns at config time to prevent catastrophic backtracking. Patterns with nested quantifiers, overlapping alternation, or wildcards in bounded repetition are rejected. Use <code class="docutils literal notranslate"><span class="pre">allow_unsafe_patterns=True</span></code> to bypass validation if needed.</p></li>
</ul>
</section>
<section id="id44">
<h3>Changed<a class="headerlink" href="#id44" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Secure header redaction by default:</strong> <code class="docutils literal notranslate"><span class="pre">LoggingMiddleware</span></code> now redacts sensitive headers (Authorization, Cookie, X-API-Key, etc.) by default when <code class="docutils literal notranslate"><span class="pre">include_headers=True</span></code>. This prevents accidental credential leakage in logs.</p>
<ul>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">additional_redact_headers</span></code> to add custom headers to the default list</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">allow_headers</span></code> for allowlist mode (only log specified headers)</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">disable_default_redactions=True</span></code> to opt out (emits warning)</p></li>
</ul>
</li>
</ul>
</section>
<section id="id45">
<h3>Documentation<a class="headerlink" href="#id45" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>Added Django structured logging cookbook entry.</p></li>
<li><p>Added library comparison pages (why-fapilog, alternative library comparisons).</p></li>
<li><p>Added security audit findings as stories for tracking.</p></li>
</ul>
</section>
</section>
<section id="id46">
<h2>[0.5.1] - 2026-01-21<a class="headerlink" href="#id46" title="Link to this heading"></a></h2>
<section id="id47">
<h3>Added<a class="headerlink" href="#id47" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>FastAPI <code class="docutils literal notranslate"><span class="pre">log_errors_on_skip</span></code> parameter:</strong> <code class="docutils literal notranslate"><span class="pre">LoggingMiddleware</span></code> and <code class="docutils literal notranslate"><span class="pre">setup_logging()</span></code> now accept <code class="docutils literal notranslate"><span class="pre">log_errors_on_skip</span></code> (default: True) to log unhandled exceptions on skipped paths. This ensures visibility into crashes on health endpoints while still skipping routine success logs.</p></li>
</ul>
</section>
<section id="id48">
<h3>Documentation<a class="headerlink" href="#id48" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>Added 10 cookbook recipes for common FastAPI logging patterns:</p>
<ul>
<li><p>FastAPI request_id logging</p></li>
<li><p>FastAPI JSON logging</p></li>
<li><p>Non-blocking async logging</p></li>
<li><p>Development and production logging configuration</p></li>
<li><p>Redacting secrets and PII</p></li>
<li><p>Safe request/response logging</p></li>
<li><p>Skip noisy endpoints</p></li>
<li><p>Log sampling and rate limiting</p></li>
<li><p>Graceful shutdown and log flushing</p></li>
<li><p>Exception logging with request context</p></li>
</ul>
</li>
<li><p>SEO improvements with sitemap generation and canonical URL tags.</p></li>
<li><p>Fixed documentation accuracy and cross-reference issues.</p></li>
</ul>
</section>
<section id="id49">
<h3>Changed<a class="headerlink" href="#id49" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>Updated PyPI description to be more concrete.</p></li>
<li><p>Organized audit assessment files into versioned directories.</p></li>
</ul>
</section>
</section>
<section id="id50">
<h2>[0.5.0] - 2026-01-21<a class="headerlink" href="#id50" title="Link to this heading"></a></h2>
<section id="id51">
<h3>Breaking Changes<a class="headerlink" href="#id51" title="Link to this heading"></a></h3>
<ul>
<li><p><strong>Logger instance caching enabled by default:</strong> <code class="docutils literal notranslate"><span class="pre">get_logger()</span></code> and <code class="docutils literal notranslate"><span class="pre">get_async_logger()</span></code> now cache instances by name, matching stdlib <code class="docutils literal notranslate"><span class="pre">logging.getLogger()</span></code> behavior. This prevents resource exhaustion from unbounded logger creation.</p>
<p><strong>Migration:</strong> Code that relied on fresh instances per call should add <code class="docutils literal notranslate"><span class="pre">reuse=False</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># v0.4.0: each call created a new instance</span>
<span class="c1"># v0.5.0: same name returns cached instance (add reuse=False for old behavior)</span>
<span class="n">logger</span> <span class="o">=</span> <span class="n">get_logger</span><span class="p">(</span><span class="s2">&quot;my-service&quot;</span><span class="p">,</span> <span class="n">reuse</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p><strong>ResourceWarning on undrained loggers:</strong> Loggers created with <code class="docutils literal notranslate"><span class="pre">reuse=False</span></code> that are garbage collected without <code class="docutils literal notranslate"><span class="pre">drain()</span></code> being called now emit a <code class="docutils literal notranslate"><span class="pre">ResourceWarning</span></code>.</p>
<p><strong>Migration:</strong> Use context managers or explicit cleanup:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Option 1: Context manager (recommended)</span>
<span class="k">async</span> <span class="k">with</span> <span class="n">runtime_async</span><span class="p">()</span> <span class="k">as</span> <span class="n">logger</span><span class="p">:</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;message&quot;</span><span class="p">)</span>

<span class="c1"># Option 2: Explicit drain</span>
<span class="n">logger</span> <span class="o">=</span> <span class="n">get_logger</span><span class="p">(</span><span class="s2">&quot;test&quot;</span><span class="p">,</span> <span class="n">reuse</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="c1"># ... use logger ...</span>
<span class="k">await</span> <span class="n">logger</span><span class="o">.</span><span class="n">drain</span><span class="p">()</span>

<span class="c1"># Option 3: Clear cache in test teardown</span>
<span class="k">await</span> <span class="n">clear_logger_cache</span><span class="p">()</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="id52">
<h3>Added<a class="headerlink" href="#id52" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>Logger instance caching: <code class="docutils literal notranslate"><span class="pre">get_logger()</span></code> and <code class="docutils literal notranslate"><span class="pre">get_async_logger()</span></code> now cache instances by name (like stdlib <code class="docutils literal notranslate"><span class="pre">logging.getLogger()</span></code>), preventing resource exhaustion from unbounded logger creation.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">reuse</span></code> parameter for <code class="docutils literal notranslate"><span class="pre">get_logger()</span></code> and <code class="docutils literal notranslate"><span class="pre">get_async_logger()</span></code> to opt out of caching when needed (e.g., tests).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">get_cached_loggers()</span></code> function to inspect cached logger names and types.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">clear_logger_cache()</span></code> async function to drain and clear all cached loggers.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ResourceWarning</span></code> emitted when loggers are garbage collected without being drained.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">serverless</span></code> preset for AWS Lambda, Google Cloud Run, and Azure Functions: stdout-only output, <code class="docutils literal notranslate"><span class="pre">drop_on_full=True</span></code>, smaller batch size (25), production-grade redaction.</p></li>
<li><p><strong>Builder API parity with Settings:</strong></p>
<ul>
<li><p>Core settings: <code class="docutils literal notranslate"><span class="pre">with_level()</span></code>, <code class="docutils literal notranslate"><span class="pre">with_name()</span></code>, <code class="docutils literal notranslate"><span class="pre">with_queue_size()</span></code>, <code class="docutils literal notranslate"><span class="pre">with_workers()</span></code>, <code class="docutils literal notranslate"><span class="pre">with_drop_on_full()</span></code>, <code class="docutils literal notranslate"><span class="pre">with_strict_mode()</span></code>, <code class="docutils literal notranslate"><span class="pre">with_diagnostics()</span></code></p></li>
<li><p>Cloud sinks: <code class="docutils literal notranslate"><span class="pre">with_cloudwatch()</span></code>, <code class="docutils literal notranslate"><span class="pre">with_loki()</span></code>, <code class="docutils literal notranslate"><span class="pre">with_postgres()</span></code>, <code class="docutils literal notranslate"><span class="pre">with_webhook()</span></code></p></li>
<li><p>Filters: <code class="docutils literal notranslate"><span class="pre">with_level_filter()</span></code>, <code class="docutils literal notranslate"><span class="pre">with_sampling()</span></code>, <code class="docutils literal notranslate"><span class="pre">with_adaptive_sampling()</span></code>, <code class="docutils literal notranslate"><span class="pre">with_trace_sampling()</span></code>, <code class="docutils literal notranslate"><span class="pre">with_rate_limit()</span></code>, <code class="docutils literal notranslate"><span class="pre">with_error_deduplication()</span></code></p></li>
<li><p>Processors: <code class="docutils literal notranslate"><span class="pre">with_size_guard()</span></code></p></li>
<li><p>Advanced: <code class="docutils literal notranslate"><span class="pre">with_context()</span></code>, <code class="docutils literal notranslate"><span class="pre">with_enricher()</span></code>, <code class="docutils literal notranslate"><span class="pre">with_redactor()</span></code>, <code class="docutils literal notranslate"><span class="pre">with_field_mask()</span></code>, <code class="docutils literal notranslate"><span class="pre">with_regex_mask()</span></code>, <code class="docutils literal notranslate"><span class="pre">with_url_credentials_redactor()</span></code>, <code class="docutils literal notranslate"><span class="pre">with_debug()</span></code></p></li>
</ul>
</li>
<li><p>Builder API parity enforcement via CI to prevent configuration drift.</p></li>
</ul>
</section>
<section id="id53">
<h3>Documentation<a class="headerlink" href="#id53" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>Comprehensive builder API documentation with examples for all methods.</p></li>
<li><p>Logger caching documentation explaining lifecycle and cache management.</p></li>
</ul>
</section>
</section>
<section id="id54">
<h2>[0.4.0] - 2026-01-19<a class="headerlink" href="#id54" title="Link to this heading"></a></h2>
<section id="id55">
<h3>Breaking Changes<a class="headerlink" href="#id55" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">fastapi</span></code> preset now enables redaction by default (<code class="docutils literal notranslate"><span class="pre">field_mask</span></code>, <code class="docutils literal notranslate"><span class="pre">regex_mask</span></code>, <code class="docutils literal notranslate"><span class="pre">url_credentials</span></code>), matching <code class="docutils literal notranslate"><span class="pre">production</span></code> preset security posture. Use <code class="docutils literal notranslate"><span class="pre">dev</span></code> preset for debugging or explicitly set <code class="docutils literal notranslate"><span class="pre">redactors=[]</span></code> to disable.</p></li>
<li><p>Log schema v1.1 with semantic field groupings (<code class="docutils literal notranslate"><span class="pre">context</span></code>, <code class="docutils literal notranslate"><span class="pre">diagnostics</span></code>, <code class="docutils literal notranslate"><span class="pre">data</span></code>); <code class="docutils literal notranslate"><span class="pre">metadata</span></code> renamed to <code class="docutils literal notranslate"><span class="pre">data</span></code>, <code class="docutils literal notranslate"><span class="pre">correlation_id</span></code> moved to <code class="docutils literal notranslate"><span class="pre">context.correlation_id</span></code>, timestamp now RFC3339 string. See <code class="docutils literal notranslate"><span class="pre">docs/schema-migration-v1.0-to-v1.1.md</span></code>.</p></li>
<li><p>Enrichers now return nested dicts targeting semantic groups (<code class="docutils literal notranslate"><span class="pre">{&quot;diagnostics&quot;:</span> <span class="pre">{...}}</span></code>) instead of flat dicts; <code class="docutils literal notranslate"><span class="pre">enrich_parallel()</span></code> uses deep-merge; <code class="docutils literal notranslate"><span class="pre">LogEvent</span></code> model updated to v1.1 schema with <code class="docutils literal notranslate"><span class="pre">context</span></code>, <code class="docutils literal notranslate"><span class="pre">diagnostics</span></code>, <code class="docutils literal notranslate"><span class="pre">data</span></code> fields replacing <code class="docutils literal notranslate"><span class="pre">metadata</span></code>, <code class="docutils literal notranslate"><span class="pre">correlation_id</span></code>, <code class="docutils literal notranslate"><span class="pre">component</span></code>.</p></li>
<li><p>Production preset now includes <code class="docutils literal notranslate"><span class="pre">regex_mask</span></code> redactor for broader secret protection; users may see additional fields masked.</p></li>
<li><p>External plugins now blocked by default; use <code class="docutils literal notranslate"><span class="pre">plugins.allow_external=true</span></code> or <code class="docutils literal notranslate"><span class="pre">plugins.allowlist</span></code> for explicit opt-in.</p></li>
</ul>
</section>
<section id="id56">
<h3>Added<a class="headerlink" href="#id56" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>Fluent builder API (<code class="docutils literal notranslate"><span class="pre">LoggerBuilder</span></code>, <code class="docutils literal notranslate"><span class="pre">AsyncLoggerBuilder</span></code>) for chainable logger configuration with IDE autocomplete support.</p></li>
<li><p>Pretty console output (<code class="docutils literal notranslate"><span class="pre">stdout_pretty</span></code>) and <code class="docutils literal notranslate"><span class="pre">format</span></code> selection for stdout logging.</p></li>
<li><p>One-liner FastAPI setup helpers (<code class="docutils literal notranslate"><span class="pre">setup_logging</span></code>, <code class="docutils literal notranslate"><span class="pre">get_request_logger</span></code>) with lifespan support.</p></li>
<li><p>Default log-level selection based on TTY/CI when no preset or explicit log level is set.</p></li>
<li><p>Stderr fallback for sink write failures with optional diagnostics warnings.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SinkWriteError</span></code> for sinks to signal write failures to the core pipeline; core now catches these errors (and <code class="docutils literal notranslate"><span class="pre">False</span></code> returns) to trigger fallback and circuit breaker behavior.</p></li>
<li><p>CI smoke test for benchmark script to catch future regressions.</p></li>
<li><p>CI timeout multiplier (<code class="docutils literal notranslate"><span class="pre">CI_TIMEOUT_MULTIPLIER</span></code>) with <code class="docutils literal notranslate"><span class="pre">get_test_timeout()</span></code> helper for timing-sensitive tests on slow CI runners.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SECURITY.md</span></code> with vulnerability reporting guidance.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CODE_OF_CONDUCT.md</span></code> (Contributor Covenant).</p></li>
<li><p>Production tip callout in README for <code class="docutils literal notranslate"><span class="pre">preset=&quot;production&quot;</span></code> guidance.</p></li>
</ul>
</section>
<section id="id57">
<h3>Changed<a class="headerlink" href="#id57" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>Serialization path cleanup - <code class="docutils literal notranslate"><span class="pre">serialize_envelope()</span></code> now trusts upstream v1.1 schema compliance and only fails for non-JSON-serializable objects; exception-driven fallback is now truly exceptional, not the normal path; <code class="docutils literal notranslate"><span class="pre">strict_envelope_mode</span></code> now works correctly.</p></li>
<li><p>Internal diagnostics now write to stderr by default (Unix convention); add <code class="docutils literal notranslate"><span class="pre">core.diagnostics_output=&quot;stdout&quot;</span></code> for backward compatibility.</p></li>
<li><p>Updated built-in sinks (<code class="docutils literal notranslate"><span class="pre">stdout_json</span></code>, <code class="docutils literal notranslate"><span class="pre">stdout_pretty</span></code>, <code class="docutils literal notranslate"><span class="pre">rotating_file</span></code>, <code class="docutils literal notranslate"><span class="pre">audit</span></code>) to raise <code class="docutils literal notranslate"><span class="pre">SinkWriteError</span></code> instead of swallowing errors, enabling proper fallback handling.</p></li>
<li><p>Updated <code class="docutils literal notranslate"><span class="pre">BaseSink</span></code> protocol documentation to reflect the new error signaling contract.</p></li>
<li><p>Aligned ruff, black, and mypy target versions with <code class="docutils literal notranslate"><span class="pre">requires-python</span> <span class="pre">=</span> <span class="pre">&quot;&gt;=3.10&quot;</span></code>; added pre-commit hook to enforce Python 3.10+.</p></li>
<li><p>Standardized Hypothesis property test settings: removed per-test <code class="docutils literal notranslate"><span class="pre">max_examples</span></code> overrides so all tests respect <code class="docutils literal notranslate"><span class="pre">HYPOTHESIS_MAX_EXAMPLES</span></code> env var.</p></li>
<li><p>Split large test files into focused modules: <code class="docutils literal notranslate"><span class="pre">test_error_handling.py</span></code> → 4 files, <code class="docutils literal notranslate"><span class="pre">test_high_performance_lru_cache.py</span></code> → 3 files, <code class="docutils literal notranslate"><span class="pre">test_logger_pipeline.py</span></code> → 3 files, <code class="docutils literal notranslate"><span class="pre">test_rotating_file_sink.py</span></code> → 3 files (total test count preserved at 1704).</p></li>
</ul>
</section>
<section id="id58">
<h3>Fixed<a class="headerlink" href="#id58" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>Benchmark script key alignment in <code class="docutils literal notranslate"><span class="pre">derive_verdicts()</span></code> to match actual output keys from <code class="docutils literal notranslate"><span class="pre">benchmark()</span></code>.</p></li>
<li><p>Strict mode serialization drops now correctly increment the <code class="docutils literal notranslate"><span class="pre">dropped</span></code> counter and record metrics; previously these drops were silently unaccounted.</p></li>
<li><p>Extras documentation accuracy: removed non-existent extras (enterprise, loki, cloud, siem), documented all real extras with descriptions.</p></li>
<li><p>Python version badge in README (3.8+ → 3.10+).</p></li>
<li><p>Plugin group documentation in architecture docs.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONTRIBUTING.md</span></code> with correct Python version, repo name, and governance file references.</p></li>
</ul>
</section>
<section id="security">
<h3>Security<a class="headerlink" href="#security" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>WebhookSink now supports HMAC-SHA256 signatures (<code class="docutils literal notranslate"><span class="pre">signature_mode=&quot;hmac&quot;</span></code>) instead of sending secrets in headers; legacy header mode emits deprecation warning.</p></li>
<li><p>Bumped orjson minimum version to 3.9.15 (CVE-2024-27454 fix).</p></li>
<li><p>Fallback minimal redaction now recurses into lists, preventing secrets in arrays from leaking to stderr during sink failures.</p></li>
</ul>
</section>
<section id="performance">
<h3>Performance<a class="headerlink" href="#performance" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>Cache sampling rate, filter config, and error dedupe window at logger initialization to avoid <code class="docutils literal notranslate"><span class="pre">Settings()</span></code> instantiation on every log call.</p></li>
</ul>
</section>
<section id="id59">
<h3>Documentation<a class="headerlink" href="#id59" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>Added performance benchmarks page with methodology, results, and reproduction instructions.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">redaction-guarantee.md</span></code> documenting exact redaction behavior per preset; fixed inaccurate claims in <code class="docutils literal notranslate"><span class="pre">reliability-defaults.md</span></code>.</p></li>
<li><p>Documented same-thread backpressure behavior where <code class="docutils literal notranslate"><span class="pre">drop_on_full=False</span></code> cannot be honored; enhanced diagnostic warning with <code class="docutils literal notranslate"><span class="pre">drop_on_full_setting</span></code> field.</p></li>
<li><p>Added automated changelog generation with git-cliff and conventional commit linting via pre-commit hooks; release workflow now validates changelog entries match tagged version.</p></li>
<li><p>Added CloudWatch sink size limit documentation comment.</p></li>
</ul>
</section>
</section>
<section id="id60">
<h2>[0.3.5] - 2026-01-01<a class="headerlink" href="#id60" title="Link to this heading"></a></h2>
<section id="id61">
<h3>Added<a class="headerlink" href="#id61" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>Hash-chain integrity for AuditTrail.</p></li>
</ul>
</section>
<section id="id62">
<h3>Changed<a class="headerlink" href="#id62" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">unbind()</span></code> now returns self for method chaining.</p></li>
</ul>
</section>
<section id="id63">
<h3>Fixed<a class="headerlink" href="#id63" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>GitHub release workflow now handles existing releases.</p></li>
</ul>
</section>
</section>
<section id="id64">
<h2>[0.3.4] - 2025-12-30<a class="headerlink" href="#id64" title="Link to this heading"></a></h2>
<section id="id65">
<h3>Added<a class="headerlink" href="#id65" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>Enterprise key management for tamper-evident plugin.</p></li>
<li><p>Verification API and CLI for tamper-evident plugin.</p></li>
<li><p>Enterprise tamper-evident plugin stories and package scaffold.</p></li>
<li><p>Configurable worker count for logging pipeline.</p></li>
</ul>
</section>
<section id="id66">
<h3>Fixed<a class="headerlink" href="#id66" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>PYTHONPATH passing to subprocess in CLI test.</p></li>
<li><p>fapilog-tamper tests now skip gracefully if package not available.</p></li>
<li><p>Loop stall tolerance increased for CI runners.</p></li>
<li><p>Prometheus fallback typing for mypy.</p></li>
</ul>
</section>
</section>
<section id="id67">
<h2>[0.3.3] - 2025-12-22<a class="headerlink" href="#id67" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Project status upgraded from Alpha to Beta classification.</p></li>
<li><p>Fixed plugin catalog generation to exclude failed plugin entries.</p></li>
<li><p>Disabled PDF/ePub generation in ReadTheDocs due to LaTeX builder incompatibility.</p></li>
<li><p>Added release notes page to documentation (includes CHANGELOG.md).</p></li>
<li><p>Removed placeholder Discord and Plugin Marketplace links from PyPI metadata.</p></li>
</ul>
</section>
<section id="id68">
<h2>[0.3.2] - 2025-12-22<a class="headerlink" href="#id68" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Backpressure configuration now honored: <code class="docutils literal notranslate"><span class="pre">drop_on_full</span></code> waits instead of dropping when set to false; sink/enricher/redactor failures emit diagnostics.</p></li>
<li><p>FastAPI request/response logging middleware added (sampling, header redaction, skip paths) and exported alongside context middleware.</p></li>
<li><p>Metrics dependency is optional via extras; Prometheus exporter disables gracefully when absent; docs updated for lean core + extras.</p></li>
<li><p>New reliability defaults and quality signals docs; coverage badge added (~90%).</p></li>
<li><p>Release workflow now extracts the latest changelog section for GitHub releases and guards builds if the changelog is missing a section.</p></li>
</ul>
</section>
<section id="documentation-release">
<h2>[0.3.1] - Documentation release<a class="headerlink" href="#documentation-release" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Documentation updates and alignment.</p></li>
</ul>
</section>
<section id="initial-release-of-fapilog">
<h2>[0.3.0] - Initial release of fapilog<a class="headerlink" href="#initial-release-of-fapilog" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>First public release.</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          
<footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Chris Haste.
      <span class="lastupdated">Last updated on February 15, 2026.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>