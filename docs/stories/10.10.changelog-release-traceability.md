# Story 10.10: Changelog Release Traceability

**Status:** Complete
**Priority:** High
**Depends on:** None

---

## Context / Background

The GPT-5.2 audit identified that `CHANGELOG.md` is missing entries for versions 0.3.4 and 0.3.5, despite git tags and GitHub releases existing for both versions.

**Current state:**
- Git tags exist: `v0.3.5`, `v0.3.4`, `v0.3.3`, ...
- `CHANGELOG.md` only contains entries up to `[0.3.3] - 2025-12-22`
- This breaks release traceability and makes upgrades harder for users

**Impact:**
- Users cannot determine what changed between 0.3.3 and current version
- Violates Keep-a-Changelog discipline stated in CHANGELOG.md header
- Compliance/audit concerns for production users

---

## Scope (In / Out)

### In Scope

- Add missing `[0.3.4]` section to CHANGELOG.md
- Add missing `[0.3.5]` section to CHANGELOG.md
- Reconstruct changes from git history between tags
- Ensure release workflow validates changelog before tagging

### Out of Scope

- Automated changelog generation tooling (future story)
- Retroactive fixes for versions before 0.3.3

---

## Acceptance Criteria

### AC1: Changelog Contains 0.3.4 Entry

**Description:** CHANGELOG.md has a properly formatted `[0.3.4]` section with date and changes.

**Validation:**
```bash
grep -E "^\[0\.3\.4\]" CHANGELOG.md
# Should return: [0.3.4] - YYYY-MM-DD
```

### AC2: Changelog Contains 0.3.5 Entry

**Description:** CHANGELOG.md has a properly formatted `[0.3.5]` section with date and changes.

**Validation:**
```bash
grep -E "^\[0\.3\.5\]" CHANGELOG.md
# Should return: [0.3.5] - YYYY-MM-DD
```

### AC3: Changes Accurately Reflect Git History

**Description:** Each changelog entry accurately describes the changes between tags.

**Validation:**
```bash
# Compare git log between tags with changelog entries
git log v0.3.3..v0.3.4 --oneline
git log v0.3.4..v0.3.5 --oneline
```

### AC4: Release Workflow Validates Changelog

**Description:** The release workflow in `.github/workflows/release.yml` fails if the tagged version has no changelog entry.

**Validation:**
- Review release.yml for changelog extraction step
- Confirm it fails on missing sections (already partially implemented)

---

## Implementation Notes

### File Changes

```
CHANGELOG.md (MODIFIED - add missing version sections)
.github/workflows/release.yml (REVIEW - ensure validation exists)
```

### Key Steps

1. Extract commit history between tags:
```bash
git log v0.3.3..v0.3.4 --pretty=format:"- %s" --no-merges
git log v0.3.4..v0.3.5 --pretty=format:"- %s" --no-merges
```

2. Get tag dates:
```bash
git log -1 --format=%ai v0.3.4
git log -1 --format=%ai v0.3.5
```

3. Format entries following Keep-a-Changelog categories:
   - Added, Changed, Deprecated, Removed, Fixed, Security

---

## Tasks

### Phase 1: Research

- [ ] Extract git history for v0.3.3..v0.3.4
- [ ] Extract git history for v0.3.4..v0.3.5
- [ ] Categorize changes by type (Added/Changed/Fixed/etc.)
- [ ] Get release dates from tags

### Phase 2: Implementation

- [ ] Add `[0.3.4]` section with categorized changes
- [ ] Add `[0.3.5]` section with categorized changes
- [ ] Move current `[Unreleased]` content appropriately
- [ ] Verify formatting matches existing entries

### Phase 3: Validation

- [ ] Verify release workflow changelog extraction still works
- [ ] Run any existing changelog linting

---

## Tests

### Manual Verification

- Compare changelog entries against `git log` between tags
- Verify dates match tag creation dates
- Ensure no duplicate entries between versions

---

## Definition of Done

### Code Complete

- [ ] 0.3.4 section added with accurate content
- [ ] 0.3.5 section added with accurate content
- [ ] Formatting consistent with existing entries

### Quality Assurance

- [ ] No broken markdown links
- [ ] Dates are accurate
- [ ] Categories follow Keep-a-Changelog format

### Documentation

- [ ] CHANGELOG.md is the deliverable

---

## Risks / Rollback

### Risks

1. **Risk:** Incomplete change reconstruction from git history
   - **Mitigation:** Cross-reference with GitHub release notes if available

2. **Risk:** Incorrect categorization of changes
   - **Mitigation:** Review commit messages carefully; when in doubt, use "Changed"

### Rollback Plan

If issues occur:
1. Revert CHANGELOG.md changes
2. Re-examine git history more carefully

---

## Related Stories

- **Enables:** Story 10.12 - Automated Changelog Generation (prevents future gaps)
- **Related:** Story 10.9 - DX documentation (documentation quality)

---

## Change Log

| Date | Change | Author |
|------|--------|--------|
| 2026-01-16 | Initial draft from GPT-5.2 audit | Claude |
